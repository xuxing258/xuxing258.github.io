import{_ as s,c as a,a as p,o as e}from"./app-cH5Xd749.js";const t={};function l(c,n){return e(),a("div",null,[...n[0]||(n[0]=[p(`<h1 id="作用域与匿名函数" tabindex="-1"><a class="header-anchor" href="#作用域与匿名函数"><span>作用域与匿名函数</span></a></h1><h2 id="作用域" tabindex="-1"><a class="header-anchor" href="#作用域"><span>作用域</span></a></h2><p>作用域规定了在程序中某个位置定义的变量在哪些地方可以被引用。</p><p>全局作用域：全局作用域是在整个程序中都可访问的作用域。在函数外部定义的变量属于全局作用域。全局作用域中的变量可以在程序的任何地方被引用。</p><p>全局作用域的生命周期:全局作用域在程序执行时创建,在程序执行结束时销毁</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">a <span class="token operator">=</span> <span class="token number">10</span>  <span class="token comment"># 全局变量</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>  <span class="token comment"># 可以访问全局变量</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment"># 10</span></span>
<span class="line">func<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 10</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>局部作用域：局部作用域是在函数内部定义的作用域。在函数内部定义的变量属于局部作用域，只能在函数内部被访问。</p><p>局部作用域的生命周期:局部作用域就是在函数调用时创建,调用结束的时候就会销毁</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    y <span class="token operator">=</span> <span class="token number">15</span>  <span class="token comment"># 局部变量</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>  <span class="token comment"># 可以访问到局部变量</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">func<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 输出15</span></span>
<span class="line"><span class="token comment"># print(y) # 报错,全局位置不能直接访问局部变量</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>嵌套作用域：嵌套作用域是指在函数内部可以访问外部函数定义的变量。每当创建一个新的函数，就会创建一个新的嵌套作用域。</p><p>注意:内部函数可以访问外部函数的变量,外部函数不能访问内部函数的变量</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># outer外部</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    a <span class="token operator">=</span> <span class="token number">5</span>  <span class="token comment"># 外部函数的局部变量</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;outer的a:&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># inner内部</span></span>
<span class="line">        b <span class="token operator">=</span> <span class="token number">20</span>  <span class="token comment"># 内部函数的局部变量</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;a+b:&quot;</span><span class="token punctuation">,</span> a <span class="token operator">+</span> b<span class="token punctuation">)</span> <span class="token comment"># 可以访问外部函数的变量</span></span>
<span class="line"></span>
<span class="line">    inner<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">outer<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    a <span class="token operator">=</span> <span class="token number">5</span>  <span class="token comment"># 外部函数的局部变量</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;outer的a:&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># inner内部</span></span>
<span class="line">        b <span class="token operator">=</span> <span class="token number">20</span>  <span class="token comment"># 内部函数的局部变量</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;a+b:&quot;</span><span class="token punctuation">,</span> a <span class="token operator">+</span> b<span class="token punctuation">)</span> <span class="token comment"># 可以访问外部函数的变量</span></span>
<span class="line"></span>
<span class="line">    inner<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># print(a+b) # 外部作用域无法访问内部作用域</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">outer<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>内置作用域：内置作用域是指Python解释器内置的一些函数和变量的作用域。这些函数和变量可以直接在Python代码中使用，无需导入任何模块。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 使用内置函数len()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在Python中，变量的作用域遵循 LEGB 原则，即在查找变量时按照以下顺序进行搜索：局部作用域（Local Scope） -&gt; 嵌套作用域（Enclosing Scope） -&gt; 全局作用域（Global Scope） -&gt; 内置作用域（Built-in Scope）。也就是说，如果在局部作用域找不到变量，就会向上一层作用域继续查找，直到找到为止。如果在所有作用域中都找不到变量，则会抛出 NameError 异常。</p><p><code>global</code>语句：在函数内部修改全局变量；在函数内部定义全局变量（全局声明）。当你在函数内部使用<code>global</code>语句来修改一个变量时，Python 将会将该变量视为全局变量，而非局部变量。这样，你就可以在函数内部修改全局变量的值，而不会创建一个新的局部变量。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># 如果希望在局部作用域修改全部变量就需要使用global关键字来实现</span></span>
<span class="line">num <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> </span>
<span class="line">    <span class="token keyword">global</span> num</span>
<span class="line">    num <span class="token operator">+=</span> <span class="token number">1</span>  <span class="token comment"># num = num + 1</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;函数:&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">func<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;全局:&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>nonlocal</code>语句：在内层函数中修改外层嵌套函数内的变量。当你在一个嵌套函数内部使用 <code>nonlocal</code>语句来引用一个变量时，Python 将会将该变量视为来自于最近的非全局作用域，而非局部作用域。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># 如果希望在内层函数中修改外层函数的变量,就需要使用nonlocal关键字来实现</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    num <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">nonlocal</span> num</span>
<span class="line">        num <span class="token operator">+=</span> <span class="token number">10</span>  <span class="token comment"># num = num + 10</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span></span>
<span class="line">    inner<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;outer输出:&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">outer<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,19)])])}const i=s(t,[["render",l]]),u=JSON.parse('{"path":"/python/11_%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0.html","title":"作用域与匿名函数","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"作用域","slug":"作用域","link":"#作用域","children":[]}],"git":{},"filePathRelative":"python/11_作用域与匿名函数.md"}');export{i as comp,u as data};
