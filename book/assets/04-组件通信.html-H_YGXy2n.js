import{_ as s,c as a,a as p,o as t}from"./app-DWS4XIiF.js";const e={};function l(o,n){return t(),a("div",null,[...n[0]||(n[0]=[p(`<h3 id="父子通信" tabindex="-1"><a class="header-anchor" href="#父子通信"><span>父子通信</span></a></h3><blockquote><p>【父组件】给【子组件】传递数据:通过props传递</p></blockquote><h3 id="子父通信" tabindex="-1"><a class="header-anchor" href="#子父通信"><span>子父通信</span></a></h3><blockquote><p>【子组件】给【父组件】传递数据:通过props传递，要求父提前给子传递一个函数</p></blockquote><h3 id="兄弟组件" tabindex="-1"><a class="header-anchor" href="#兄弟组件"><span>兄弟组件</span></a></h3><ul><li>【父组件】给【子组件】传递数据:通过props传递</li><li>【子组件】给【父组件】传递数据:通过props传递，要求父提前给子传递一个函数</li></ul><h3 id="多层通信" tabindex="-1"><a class="header-anchor" href="#多层通信"><span>多层通信</span></a></h3><ol><li><code>createContext</code> 用于创建一个上下文（Context）。 <ul><li>上下文允许在组件树中共享数据，以避免通过中间组件传递 props 的繁琐过程</li><li><code>const MyContext = createContext();</code></li></ul></li></ol><ul><li><code>MyContext.Provider</code> 在Provider组件树中提供上下文数据，该数据通过 <code>value</code> 属性传递</li><li>在函数组件中使用上下文，需要使用 <code>useContext</code> 钩子来获取上下文数据</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 传递响应式数据,祖先元素修改数据时,后代组件使用\`useContext\`数据时也会发生变化</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useContext<span class="token punctuation">,</span> createContext <span class="token punctuation">}</span> <span class="token operator">=</span> React</span>
<span class="line"><span class="token keyword">const</span> ThemeContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">let</span> info <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>ThemeContext<span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>子组件<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">Hom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>Child <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">      <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span>ThemeContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;this is name&#39;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>Hom age<span class="token operator">=</span><span class="token string">&quot;123&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">          <span class="token operator">&lt;</span><span class="token operator">/</span>ThemeContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>div <span class="token operator">&gt;</span></span>
<span class="line">      <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="diffind算法" tabindex="-1"><a class="header-anchor" href="#diffind算法"><span><code>Diffind</code>算法</span></a></h3><p><code>diff算法</code>用来计算出虚拟DOM真正变化的部分，并只针对该部分进行原生DOM操作，而非重新渲染整个页面，从而<strong>提高了页面渲染效率</strong></p><p>找出两个虚拟对象之间的差异，目的是尽可能做到节点复用</p><ol><li><p>比较新旧节点的时候，比较只会在同层级进行, 不会跨层级比较</p></li><li><p>对比不同类型的元素(标签)</p><ul><li>当根节点(父节点)为不同类型的元素(标签)时，React 会拆卸原有的树并且建立起新的树</li></ul></li><li><p>对比同一类型的元素</p></li></ol><ul><li><p>当对比两个相同类型的 React 元素时，React 会保留 DOM 节点，仅比对及更新有改变的属性, 虚拟DOM是一个js对象</p></li><li><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stuff<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>after<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stuff<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></span>
<span class="line"><span class="token comment">&lt;!-- 通过对比这两个元素，React 知道只需要修改 DOM 元素上的 className 属性 --&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>对比同类型的组件元素</p><ul><li>当一个组件更新时，组件实例会保持不变，因此可以在不同的渲染时保持 state 一致</li></ul></li></ul><ol start="4"><li><p>旧虚拟DOM中未找到与新虚拟DOM相同的key</p><ul><li>创建新的真实DOM,随后渲染到到页面。</li></ul></li><li><p>input框的文本保留问题</p><ul><li>在第一个输入框中输入内容后，点击添加按钮时，由于输入框的 <code>key</code> 值没有改变，React 会将其视为相同的内容，并且会保留输入框中的文本内容</li></ul></li></ol><h4 id="key作用" tabindex="-1"><a class="header-anchor" href="#key作用"><span>key作用</span></a></h4><ul><li>key 特殊属性: 主要用于 React 的虚拟 DOM 算法, 使用 key 时会基于 key 值的变化来渲染, 使用唯一值</li><li>key是虚拟DOM对象的标识，当数据发生变化时，React会根据【新数据】生成【新的虚拟DON】,随后React进行【新虚拟DOM】key值 与【旧虚拟DOM】 key值 的差异比较</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> <span class="token punctuation">[</span>arrNew<span class="token punctuation">,</span>setArrNew<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;一&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;二&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;三&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;四&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token function-variable function">handleChane</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">setArrNew</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;五&quot;</span><span class="token punctuation">,</span><span class="token operator">...</span>arrNew<span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span></span>
<span class="line">        <span class="token operator">&lt;</span>ul className<span class="token operator">=</span><span class="token string">&quot;box&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">                <span class="token punctuation">{</span></span>
<span class="line">                    arrNew<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">                        <span class="token keyword">return</span> <span class="token operator">&lt;</span>li  index<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span></span>
<span class="line">                        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">                            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span></span>
<span class="line">                    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        		<span class="token punctuation">}</span></span>
<span class="line">            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span></span>
<span class="line">                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleChane<span class="token punctuation">}</span><span class="token operator">&gt;</span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span></span>
<span class="line">   		 <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,19)])])}const i=s(e,[["render",l]]),u=JSON.parse('{"path":"/react/04-%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1.html","title":"","lang":"en-US","frontmatter":{},"headers":[{"level":3,"title":"父子通信","slug":"父子通信","link":"#父子通信","children":[]},{"level":3,"title":"子父通信","slug":"子父通信","link":"#子父通信","children":[]},{"level":3,"title":"兄弟组件","slug":"兄弟组件","link":"#兄弟组件","children":[]},{"level":3,"title":"多层通信","slug":"多层通信","link":"#多层通信","children":[]},{"level":3,"title":"Diffind算法","slug":"diffind算法","link":"#diffind算法","children":[]}],"git":{},"filePathRelative":"react/04-组件通信.md"}');export{i as comp,u as data};
