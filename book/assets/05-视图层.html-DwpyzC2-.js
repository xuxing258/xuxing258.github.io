import{_ as n,c as a,a as p,o as e}from"./app-BD3X-Yt7.js";const t={};function l(o,s){return e(),a("div",null,[...s[0]||(s[0]=[p(`<h1 id="视图层" tabindex="-1"><a class="header-anchor" href="#视图层"><span>视图层</span></a></h1><ul><li>提交请求的方式</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token number">1.</span>浏览器搜索栏输入路由访问<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">&gt;</span>朝指定路由提交get请求</span>
<span class="line"></span>
<span class="line"><span class="token number">2</span><span class="token punctuation">.</span>a标签href属性<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">&gt;</span>点击a标签朝href属性指定地址提交get请求</span>
<span class="line"></span>
<span class="line"><span class="token number">3</span><span class="token punctuation">.</span>form表单的action属性和method属性<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">&gt;</span>默认情况下<span class="token punctuation">,</span>朝当前所在地址提交get请求</span>
<span class="line">	action属性的值<span class="token punctuation">:</span><span class="token punctuation">(</span>也是一个地址<span class="token punctuation">)</span></span>
<span class="line">        不写<span class="token punctuation">(</span>为空<span class="token punctuation">)</span><span class="token punctuation">:</span>朝当前地址提交数据<span class="token punctuation">(</span>怎么进来的form表单页面<span class="token punctuation">,</span>就是当前地址<span class="token punctuation">)</span></span>
<span class="line">        指定路由<span class="token punctuation">:</span>朝指定路由提交请求</span>
<span class="line">            </span>
<span class="line">    method属性的值<span class="token punctuation">:</span></span>
<span class="line">        不写<span class="token punctuation">:</span>默认为get请求</span>
<span class="line">        post<span class="token punctuation">:</span>通过点击submit按钮朝action属性的值所在地址提交post请求</span>
<span class="line">            </span>
<span class="line"><span class="token comment"># 注意:只要提交了post请求就需要提前去settings.py中将MIDDLEWARE第四句进行注释</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="request对象" tabindex="-1"><a class="header-anchor" href="#request对象"><span>request对象</span></a></h2><ul><li>request.method:查看当前请求方式 <ul><li>返回值为全大写的字符串:&#39;GET&#39;/&#39;POST&#39;</li></ul></li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># 根据请求的不同,一个视图函数可以做出不同的处理</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># 校验数据</span></span>
<span class="line">        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">&#39;登录成功&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&#39;index.html&#39;</span><span class="token punctuation">)</span>  <span class="token comment"># get请求返回html页面</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="获取post请求提交的数据" tabindex="-1"><a class="header-anchor" href="#获取post请求提交的数据"><span>获取post请求提交的数据</span></a></h3><ul><li>request.POST:接收post请求提交的数据</li><li>request.POST.get(键):获取post请求提交的对应键的值(是个列表的形式),多选只能获取列表中的最后一个值</li><li>request.POST.getlist(键):能够获取到完整的数据列表</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># post请求提交数据后端接收</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&#39;text&#39;</span> name<span class="token operator">=</span><span class="token string">&#39;a&#39;</span> value<span class="token operator">=</span><span class="token string">&#39;111&#39;</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">:</span> <span class="token number">111</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment"># 通过input框给后端传值,后端能接收一个字典,字典的键为name属性的值,字典的值为value属性的值</span></span>
<span class="line"><span class="token comment"># value属性接收用户在input框中输入的文本</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># form表单</span></span>
<span class="line"><span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">&quot;&quot;</span> method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>用户名<span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;name&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;xixixi&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>密码<span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;hahaha&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>性别<span class="token punctuation">:</span> </span>
<span class="line">        <span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;radio&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;sex&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;female&quot;</span><span class="token operator">&gt;</span>女</span>
<span class="line">        <span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;radio&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;sex&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;male&quot;</span><span class="token operator">&gt;</span>男</span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>爱好<span class="token punctuation">:</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;hobby&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;vocal&quot;</span><span class="token operator">&gt;</span>唱</span>
<span class="line">        <span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;hobby&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;dance&quot;</span><span class="token operator">&gt;</span>跳</span>
<span class="line">        <span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;hobby&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;rap&quot;</span><span class="token operator">&gt;</span>rap</span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 后端接收数据格式:</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span></span>
<span class="line"> <span class="token comment"># {&#39;name&#39;: [&#39;xixi&#39;], &#39;password&#39;: [&#39;123456&#39;], &#39;sex&#39;: [&#39;female&#39;], &#39;hobby&#39;: [&#39;vocal&#39;, &#39;dance&#39;]}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># xixi</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;password&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 123456</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;sex&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># female</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;hobby&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># &#39;dance&#39;,多选的值用get获取只能获取到列表中的最后一个值</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>getlist<span class="token punctuation">(</span><span class="token string">&#39;hobby&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># [&#39;vocal&#39;, &#39;dance&#39;]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="post请求上传文件及后端获取" tabindex="-1"><a class="header-anchor" href="#post请求上传文件及后端获取"><span>post请求上传文件及后端获取</span></a></h3><ul><li>前端上传文件</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># 前端上传</span></span>
<span class="line"><span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">&quot;&quot;</span> method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span> enctype<span class="token operator">=</span><span class="token string">&quot;multipart/form-data&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line">	<span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;file&quot;</span> name<span class="token operator">=</span><span class="token string">&#39;...&#39;</span><span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># form表单的enctype属性</span></span>
<span class="line">默认情况下<span class="token punctuation">,</span>enctype编码类型为application<span class="token operator">/</span>x<span class="token operator">-</span>www<span class="token operator">-</span>form<span class="token operator">-</span>urlencoded<span class="token punctuation">,</span>表示上传普通的文本数据</span>
<span class="line">enctype<span class="token operator">=</span><span class="token string">&quot;multipart/form-data&quot;</span>表示可以上传多种格式数据<span class="token punctuation">,</span>既包括普通文本又包括二进制格式数据</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>后端获取 <ul><li>request.FILES:获取用户上传的文件数据</li></ul></li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>FILES<span class="token punctuation">)</span></span>
<span class="line"><span class="token builtin">file</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>FILES<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;file&#39;</span><span class="token punctuation">)</span>  <span class="token comment"># 获取文件对象</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>  <span class="token comment"># 文件对象.属性查看文件对象的名字</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="get请求传递数据后端获取" tabindex="-1"><a class="header-anchor" href="#get请求传递数据后端获取"><span>get请求传递数据后端获取</span></a></h3><ul><li>request.GET:获取get请求提交的所有数据 <ul><li>request.GET.get(&#39;键&#39;):获取get请求提交的数据对应的键的值</li></ul></li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># get请求通过问号后面携带传输给后端传递数据</span></span>
<span class="line"><span class="token comment"># url问号携带参数</span></span>
<span class="line">http<span class="token punctuation">:</span><span class="token operator">//</span>localhost<span class="token punctuation">:</span><span class="token number">8000</span><span class="token operator">/</span>index<span class="token operator">/</span>?a<span class="token operator">=</span><span class="token number">1</span><span class="token operator">&amp;</span>b<span class="token operator">=</span><span class="token number">2</span></span>
<span class="line">        </span>
<span class="line"><span class="token comment"># 后端获取</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>GET<span class="token punctuation">)</span>  <span class="token comment"># &lt;QueryDict: {&#39;a&#39;: [&#39;1&#39;], &#39;b&#39;: [&#39;2&#39;]}&gt;</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 1</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>GET<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 2</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="get请求补充" tabindex="-1"><a class="header-anchor" href="#get请求补充"><span>get请求补充</span></a></h3><ul><li>request.path</li><li>request.path_info</li><li>request.get_full_path()</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>path<span class="token punctuation">)</span>  <span class="token comment"># /index/</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>path_info<span class="token punctuation">)</span>  <span class="token comment"># /index/</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>get_full_path<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># /index/?a=1&amp;b=3</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="fbv和cbv" tabindex="-1"><a class="header-anchor" href="#fbv和cbv"><span>FBV和CBV</span></a></h2><ul><li>FBV:基于函数的视图.在views.py中通过定义函数来处理用户请求,函数中再定义分支结构处理不同请求方式</li><li>CBV:基于类的视图.将FBV的视图函数逻辑拆成了类下的多个函数,依靠函数调用来实现完整的逻辑</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># 导入模块</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>view <span class="token keyword">import</span> View</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyView</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">&#39;登录成功&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    </span>
<span class="line"><span class="token comment"># urls.py中定义路由和视图之间的对应关系</span></span>
<span class="line">path<span class="token punctuation">(</span><span class="token string">&#39;myview/&#39;</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>MyView<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 如果是get请求就执行类中的get函数,如果是post函数就去执行类中的post函数</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># CBV路由逻辑推导</span></span>
<span class="line"><span class="token decorator annotation punctuation">@classonlymethod</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">as_view</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        self <span class="token operator">=</span> cls<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 实例化调用as_view的类的对象</span></span>
<span class="line">        <span class="token keyword">return</span> self<span class="token punctuation">.</span>dispatch<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>  <span class="token comment"># 当前类的对象.dispatch()</span></span>
<span class="line">    <span class="token keyword">return</span> view</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">dispatch</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">in</span> self<span class="token punctuation">.</span>http_method_names<span class="token punctuation">:</span></span>
<span class="line">        handler <span class="token operator">=</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span></span>
<span class="line">            self<span class="token punctuation">,</span> request<span class="token punctuation">.</span>method<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>http_method_not_allowed</span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">else</span><span class="token punctuation">:</span></span>
<span class="line">        handler <span class="token operator">=</span> self<span class="token punctuation">.</span>http_method_not_allowed</span>
<span class="line">    <span class="token keyword">return</span> handler<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>  <span class="token comment"># get()/post()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># getattr(对象, 对象所在类的函数名字符串格式)---&gt;返回当前对象所在类的函数名</span></span>
<span class="line"><span class="token builtin">getattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token builtin">getattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">&#39;post&#39;</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">&gt;</span>返回类中的get函数或post函数名</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># 在urls.py中定义路由和视图之间的对应关系</span></span>
<span class="line">re_path<span class="token punctuation">(</span><span class="token string">&#39;func/(?P&lt;a&gt;\\d+)/(?P&lt;b&gt;\\d+)&#39;</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>Fun<span class="token punctuation">.</span>as_view<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 在views.py中定义视图类</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Fun</span><span class="token punctuation">(</span>View<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span>  <span class="token comment"># *表示接收多出来的位置参数</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span>kwargs<span class="token punctuation">)</span>  <span class="token comment"># **表示接收多出来的关键字参数</span></span>
<span class="line">        <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&#39;test.html&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">&#39;这是post请求的返回值&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="作业" tabindex="-1"><a class="header-anchor" href="#作业"><span>作业</span></a></h1><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token number">1.</span>实现注册功能</span>
<span class="line"></span>
<span class="line"><span class="token number">2.</span>实现登录功能</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">(</span>不需要数据库的逻辑<span class="token punctuation">,</span>只需要完成从前端获取数据<span class="token punctuation">,</span>后端直接判断<span class="token punctuation">,</span>进行返回<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,27)])])}const i=n(t,[["render",l]]),u=JSON.parse('{"path":"/django/05-%E8%A7%86%E5%9B%BE%E5%B1%82.html","title":"视图层","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"request对象","slug":"request对象","link":"#request对象","children":[{"level":3,"title":"获取post请求提交的数据","slug":"获取post请求提交的数据","link":"#获取post请求提交的数据","children":[]},{"level":3,"title":"post请求上传文件及后端获取","slug":"post请求上传文件及后端获取","link":"#post请求上传文件及后端获取","children":[]},{"level":3,"title":"get请求传递数据后端获取","slug":"get请求传递数据后端获取","link":"#get请求传递数据后端获取","children":[]},{"level":3,"title":"get请求补充","slug":"get请求补充","link":"#get请求补充","children":[]}]},{"level":2,"title":"FBV和CBV","slug":"fbv和cbv","link":"#fbv和cbv","children":[]}],"git":{},"filePathRelative":"django/05-视图层.md"}');export{i as comp,u as data};
