import{_ as s,c as a,a as p,o as e}from"./app-Cbtc5Jwy.js";const t={};function l(c,n){return e(),a("div",null,[...n[0]||(n[0]=[p(`<h1 id="作用域与匿名函数" tabindex="-1"><a class="header-anchor" href="#作用域与匿名函数"><span>作用域与匿名函数</span></a></h1><h2 id="_1-上节课回顾" tabindex="-1"><a class="header-anchor" href="#_1-上节课回顾"><span>1.上节课回顾</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token operator">-</span> 参数的补充<span class="token punctuation">:</span>可变参数</span>
<span class="line">    <span class="token operator">*</span>args<span class="token punctuation">:</span>接收任意个数的位置实参存储为一个元组</span>
<span class="line">    <span class="token operator">**</span>kwargs<span class="token punctuation">:</span>接收任意个数的关键字实参存储为一个字典<span class="token punctuation">,</span>参数名作为字典的键<span class="token punctuation">,</span>参数值作为字典的值</span>
<span class="line">    混合使用必须参数<span class="token punctuation">,</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs的时候<span class="token punctuation">,</span>顺序为<span class="token punctuation">:</span>必须参数<span class="token punctuation">,</span><span class="token operator">*</span>args<span class="token punctuation">,</span><span class="token operator">**</span>kwargs</span>
<span class="line">	解包<span class="token punctuation">:</span>调用函数时<span class="token punctuation">,</span>实参可以使用<span class="token operator">*</span>和<span class="token operator">**</span>对可迭代对象进行解包<span class="token punctuation">,</span>将其元素作为单独的参数传递给函数</span>
<span class="line">        </span>
<span class="line"><span class="token operator">-</span> 函数的返回值</span>
<span class="line">	通过<span class="token keyword">return</span>关键字给函数设置返回值</span>
<span class="line">    返回值可以是任意类型</span>
<span class="line">    没有<span class="token keyword">return</span>的返回值结果就是<span class="token boolean">None</span><span class="token punctuation">,</span><span class="token boolean">None</span>是NoneType类型的唯一值<span class="token punctuation">,</span>表示空值</span>
<span class="line">    当函数内部执行到<span class="token keyword">return</span>的时候就会终止函数后面的代码</span>
<span class="line">   </span>
<span class="line"><span class="token operator">-</span> 函数使用的高级特征</span>
<span class="line">	函数可以被引用</span>
<span class="line">    函数可以作为参数传入到另一个函数</span>
<span class="line">    函数可以作为返回值返回</span>
<span class="line">    函数可以作为数据容器里面的元素</span>
<span class="line">    </span>
<span class="line"><span class="token operator">-</span> 上节课作业</span>
<span class="line"><span class="token number">1.</span>定义一个函数num_sum<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span>，用来接收任意个数的整数，并将接收的所有偶数求和，并返回总值</span>
<span class="line"><span class="token keyword">def</span> <span class="token function">num_sum</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    result <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">    <span class="token keyword">for</span> num <span class="token keyword">in</span> args<span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">if</span> num <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span></span>
<span class="line">            result <span class="token operator">+=</span> num</span>
<span class="line">    <span class="token keyword">return</span> result</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">num_sum</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    result <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> args <span class="token keyword">if</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> result</span>
<span class="line">ret <span class="token operator">=</span> num_sum<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token number">2.</span>定义一个函数average_score<span class="token punctuation">(</span>scores<span class="token punctuation">)</span>，接收下面的<span class="token number">5</span>位同学的分数列表，返回所有分数的平均值</span>
<span class="line">score_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">74</span><span class="token punctuation">,</span> <span class="token number">86</span><span class="token punctuation">,</span> <span class="token number">92</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">average_score</span><span class="token punctuation">(</span>scores<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># scores = score_list</span></span>
<span class="line">    result <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># 总分</span></span>
<span class="line">    <span class="token keyword">for</span> score <span class="token keyword">in</span> scores<span class="token punctuation">:</span></span>
<span class="line">        result <span class="token operator">+=</span> score</span>
<span class="line">    <span class="token keyword">return</span> result <span class="token operator">/</span> <span class="token builtin">len</span><span class="token punctuation">(</span>scores<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">average_score</span><span class="token punctuation">(</span>scores<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># scores = score_list</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>scores<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token builtin">len</span><span class="token punctuation">(</span>scores<span class="token punctuation">)</span></span>
<span class="line">ret <span class="token operator">=</span> average_score<span class="token punctuation">(</span>score_list<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token number">3.</span>为了监督饮食质量，食堂向学生发起了一个简单的问卷调查<span class="token punctuation">,</span>收集的结果为evaluate_list的一个列表，请定义一个evaluate_count<span class="token punctuation">(</span>evaluate<span class="token punctuation">)</span>函数，用来接收满意度评价列表，计算每个评价出现的次数，保存到字典中返回，字典的键是评价，字典的值是次数</span>
<span class="line">evaluate_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;满意&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;一般&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;不满意&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;一般&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;一般&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;非常满意&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;满意&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;不满意&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;非常满意&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;满意&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;不满意&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;满意&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;不满意&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;非常满意&#39;</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 通过for循环取值加判断的方式来完成的</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">evaluate_count</span><span class="token punctuation">(</span>evaluate<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># evaluate = evaluate_list</span></span>
<span class="line">    evaluate_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">for</span> i <span class="token keyword">in</span> evaluate<span class="token punctuation">:</span>  <span class="token comment"># 满意</span></span>
<span class="line">        <span class="token keyword">if</span> i <span class="token keyword">not</span> <span class="token keyword">in</span> evaluate_dict<span class="token punctuation">:</span>  <span class="token comment"># 给键赋值最开始的1</span></span>
<span class="line">            evaluate_dict<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">        <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># 出现了重复的,就给这个键自增1</span></span>
<span class="line">            evaluate_dict<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>  <span class="token comment"># evaluate_dict[i] = evaluate_dict[i] + 1</span></span>
<span class="line">    <span class="token keyword">return</span> evaluate_dict</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 通过set去重,然后结合字典推导式来完成</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">evaluate_count</span><span class="token punctuation">(</span>evaluate<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># evaluate = evaluate_list</span></span>
<span class="line">    evaluate_set <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span>evaluate<span class="token punctuation">)</span>  <span class="token comment"># 5种</span></span>
<span class="line">    evaluate_dict <span class="token operator">=</span> <span class="token punctuation">{</span>i<span class="token punctuation">:</span> evaluate<span class="token punctuation">.</span>count<span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> evaluate_set<span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> evaluate_dict</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 通过get方法</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">evaluate_count</span><span class="token punctuation">(</span>evaluate<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># evaluate = evaluate_list</span></span>
<span class="line">    evaluate_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment"># {&quot;满意&quot;:2}</span></span>
<span class="line">    <span class="token keyword">for</span> i <span class="token keyword">in</span> evaluate<span class="token punctuation">:</span></span>
<span class="line">        evaluate_dict<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> evaluate_dict<span class="token punctuation">.</span>get<span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span></span>
<span class="line">    <span class="token keyword">return</span> evaluate_dict</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">ret <span class="token operator">=</span> evaluate_count<span class="token punctuation">(</span>evaluate_list<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-作用域" tabindex="-1"><a class="header-anchor" href="#_2-作用域"><span>2.作用域</span></a></h2><p>作用域规定了在程序中某个位置定义的变量在哪些地方可以被引用。</p><p>全局作用域：全局作用域是在整个程序中都可访问的作用域。在函数外部定义的变量属于全局作用域。全局作用域中的变量可以在程序的任何地方被引用。</p><p>全局作用域的生命周期:全局作用域在程序执行时创建,在程序执行结束时销毁</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">a <span class="token operator">=</span> <span class="token number">10</span>  <span class="token comment"># 全局变量</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>  <span class="token comment"># 可以访问全局变量</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment"># 10</span></span>
<span class="line">func<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 10</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>局部作用域：局部作用域是在函数内部定义的作用域。在函数内部定义的变量属于局部作用域，只能在函数内部被访问。</p><p>局部作用域的生命周期:局部作用域就是在函数调用时创建,调用结束的时候就会销毁</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    y <span class="token operator">=</span> <span class="token number">15</span>  <span class="token comment"># 局部变量</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>  <span class="token comment"># 可以访问到局部变量</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">func<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 输出15</span></span>
<span class="line"><span class="token comment"># print(y) # 报错,全局位置不能直接访问局部变量</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>嵌套作用域：嵌套作用域是指在函数内部可以访问外部函数定义的变量。每当创建一个新的函数，就会创建一个新的嵌套作用域。</p><p>注意:内部函数可以访问外部函数的变量,外部函数不能访问内部函数的变量</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># outer外部</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    a <span class="token operator">=</span> <span class="token number">5</span>  <span class="token comment"># 外部函数的局部变量</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;outer的a:&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># inner内部</span></span>
<span class="line">        b <span class="token operator">=</span> <span class="token number">20</span>  <span class="token comment"># 内部函数的局部变量</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;a+b:&quot;</span><span class="token punctuation">,</span> a <span class="token operator">+</span> b<span class="token punctuation">)</span> <span class="token comment"># 可以访问外部函数的变量</span></span>
<span class="line"></span>
<span class="line">    inner<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">outer<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    a <span class="token operator">=</span> <span class="token number">5</span>  <span class="token comment"># 外部函数的局部变量</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;outer的a:&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># inner内部</span></span>
<span class="line">        b <span class="token operator">=</span> <span class="token number">20</span>  <span class="token comment"># 内部函数的局部变量</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;a+b:&quot;</span><span class="token punctuation">,</span> a <span class="token operator">+</span> b<span class="token punctuation">)</span> <span class="token comment"># 可以访问外部函数的变量</span></span>
<span class="line"></span>
<span class="line">    inner<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># print(a+b) # 外部作用域无法访问内部作用域</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">outer<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>内置作用域：内置作用域是指Python解释器内置的一些函数和变量的作用域。这些函数和变量可以直接在Python代码中使用，无需导入任何模块。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 使用内置函数len()</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>在Python中，变量的作用域遵循 LEGB 原则，即在查找变量时按照以下顺序进行搜索：局部作用域（Local Scope） -&gt; 嵌套作用域（Enclosing Scope） -&gt; 全局作用域（Global Scope） -&gt; 内置作用域（Built-in Scope）。也就是说，如果在局部作用域找不到变量，就会向上一层作用域继续查找，直到找到为止。如果在所有作用域中都找不到变量，则会抛出 NameError 异常。</p><p><code>global</code>语句：在函数内部修改全局变量；在函数内部定义全局变量（全局声明）。当你在函数内部使用<code>global</code>语句来修改一个变量时，Python 将会将该变量视为全局变量，而非局部变量。这样，你就可以在函数内部修改全局变量的值，而不会创建一个新的局部变量。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># 如果希望在局部作用域修改全部变量就需要使用global关键字来实现</span></span>
<span class="line">num <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> </span>
<span class="line">    <span class="token keyword">global</span> num</span>
<span class="line">    num <span class="token operator">+=</span> <span class="token number">1</span>  <span class="token comment"># num = num + 1</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;函数:&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">func<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;全局:&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>nonlocal</code>语句：在内层函数中修改外层嵌套函数内的变量。当你在一个嵌套函数内部使用 <code>nonlocal</code>语句来引用一个变量时，Python 将会将该变量视为来自于最近的非全局作用域，而非局部作用域。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># 如果希望在内层函数中修改外层函数的变量,就需要使用nonlocal关键字来实现</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    num <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">nonlocal</span> num</span>
<span class="line">        num <span class="token operator">+=</span> <span class="token number">10</span>  <span class="token comment"># num = num + 10</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span></span>
<span class="line">    inner<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;outer输出:&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">outer<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,21)])])}const i=s(t,[["render",l]]),u=JSON.parse('{"path":"/python/11_%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0.html","title":"作用域与匿名函数","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"1.上节课回顾","slug":"_1-上节课回顾","link":"#_1-上节课回顾","children":[]},{"level":2,"title":"2.作用域","slug":"_2-作用域","link":"#_2-作用域","children":[]}],"git":{},"filePathRelative":"python/11_作用域与匿名函数.md"}');export{i as comp,u as data};
