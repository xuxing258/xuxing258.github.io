import{_ as s,c as a,a as e,o as p}from"./app-C3PhOBn2.js";const t={};function o(l,n){return p(),a("div",null,[...n[0]||(n[0]=[e(`<h2 id="代理" tabindex="-1"><a class="header-anchor" href="#代理"><span>代理</span></a></h2><p><code>Object.getOwnPropertyDescriptor()</code> 是 JavaScript 中的一个方法，用于获取对象属性的描述符（descriptor），包括属性的值、可写性、可枚举性和可配置性等信息</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// Object.getOwnPropertyDescriptor(obj, prop)</span></span>
<span class="line"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">c</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">d</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token literal-property property">w</span><span class="token operator">:</span><span class="token string">&quot;你好&quot;</span><span class="token punctuation">}</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span> a <span class="token punctuation">,</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>obj</code>：要获取属性描述符的对象。</li><li><code>prop</code>：要获取描述符的属性名称。</li></ul><p>描述符对象包含 <code>value</code>、<code>writable</code>、<code>enumerable</code> 和 <code>configurable</code> 等属性。对于访问器属性（getter 和 setter），描述符对象包含 <code>get</code> 和 <code>set</code> 方法</p><ul><li><code>value</code>：属性的值。</li><li><code>writable</code>：指示属性是否可写入（修改）。如果为 <code>true</code>，则属性的值可以被修改；如果为 <code>false</code>，则属性的值为只读，不能被修改。</li><li><code>enumerable</code>：指示属性是否可枚举。如果为 <code>true</code>，则属性可以在对象的枚举属性中被列举出来；如果为 <code>false</code>，则属性不会出现在枚举中。</li><li><code>configurable</code>：指示属性是否可配置。如果为 <code>true</code>，则属性的特性可以被修改，也可以通过 <code>delete</code> 运算符删除属性；如果为 <code>false</code>，则属性的特性是固定的，不能被修改和删除。</li></ul><p><code>Object.defineProperty()</code> 是 JavaScript 中的一个方法，用于在对象上定义一个新的属性，或者修改现有属性的特性属性</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> descriptor<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>obj</code>：要在其上定义属性的对象。</li><li><code>prop</code>：要定义或修改的属性的名称。</li><li><code>descriptor</code>：一个对象，用于描述属性的特性，包括值、可写性、可枚举性和可配置性等。</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;John&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>vue2代理</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">num</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;xuxin&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">nex</span><span class="token operator">:</span><span class="token string">&quot;男&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token function">obja</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">obja</span><span class="token punctuation">(</span><span class="token parameter">obj1</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>key<span class="token punctuation">,</span>val<span class="token punctuation">]</span><span class="token punctuation">,</span>item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">createDiepre</span><span class="token punctuation">(</span>obj1<span class="token punctuation">,</span>key<span class="token punctuation">,</span>val<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">createDiepre</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span>val</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>key<span class="token punctuation">,</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;获取数据成功&quot;</span><span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">              <span class="token keyword">return</span> val</span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;设置数据&quot;</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            val <span class="token operator">=</span> value</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="proxy" tabindex="-1"><a class="header-anchor" href="#proxy"><span>Proxy</span></a></h2><p>Proxy用于创建一个代理对象，从而实现基本操作的拦截和自定义（如属性查找、赋值、枚举、函数调用等)</p><h3 id="语法使用" tabindex="-1"><a class="header-anchor" href="#语法使用"><span>语法使用</span></a></h3><p><code>const proxy = new Proxy(target, handler)</code></p><ul><li><code>target</code>：要代理的目标对象。</li><li><code>handler</code>：一个用于定义代理行为的处理程序对象，包含一组拦截器（trap）方法。</li></ul><p>示例: 定义了一个 <code>handler</code> 对象，其中包含了 <code>get</code> 和 <code>set</code> 方法，用于拦截对属性的访问和设置操作</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;John&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Getting property &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>prop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Setting property &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>prop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; to &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> proxyPerson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxyPerson<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: &quot;Getting property &quot;name&quot;&quot;，然后输出 &quot;John&quot;</span></span>
<span class="line">proxyPerson<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">35</span><span class="token punctuation">;</span> <span class="token comment">// 输出: &quot;Setting property &quot;age&quot; to &quot;35&quot;&quot;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxyPerson<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: &quot;Getting property &quot;age&quot;&quot;，然后输出 &quot;35&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>get(target, prop, receiver)</code>：拦截对目标对象属性的读取操作。 <ul><li>自定义返回的值或执行其他操作。 <ul><li><code>target</code> 是目标对象，</li><li><code>prop</code> 是属性名称，</li><li><code>receiver</code> 是代理对象或继承代理对象的对象。</li></ul></li></ul></li><li><code>set(target, prop, value, receiver)</code>：拦截对目标对象属性的设置操作。 <ul><li>自定义属性的赋值行为或执行其他操作。 <ul><li><code>target</code> 是目标对象，</li><li><code>prop</code> 是属性名称，</li><li><code>value</code> 是要设置的值，</li><li><code>receiver</code> 是代理对象或继承代理对象的对象。</li></ul></li></ul></li><li><code>has(target, prop)</code>：拦截 <code>in</code> 操作符，用于检查属性是否存在于目标对象中。 <ul><li>自定义返回布尔值的逻辑。</li></ul></li><li><code>deleteProperty(target, prop)</code>：拦截 <code>delete</code> 操作符，用于删除目标对象的属性。 <ul><li>自定义属性删除的逻辑，并返回布尔值指示操作是否成功。</li></ul></li><li><code>apply(target, thisArg, argumentsList)</code>：拦截函数的调用操作。 <ul><li>自定义函数的调用行为，并返回函数的执行结果。</li></ul></li><li><code>construct(target, argumentsList, newTarget)</code>：拦截对代理对象的构造函数调用。 <ul><li>自定义实例化对象的行为，并返回一个对象作为代理对象的实例。</li></ul></li></ul><h3 id="reflect" tabindex="-1"><a class="header-anchor" href="#reflect"><span>reflect</span></a></h3><p>提供了一组静态方法，用于操作对象的行为。</p><p><code>Reflect</code> 方法与对应的原始操作（例如属性访问、函数调用、实例化等）具有相同的功能，但提供了一种更统一且易于使用的方式, 这些方法与proxy的方法相同</p><ul><li>属性操作： <ul><li><code>Reflect.get(target, propertyKey, receiver)</code>：获取目标对象的属性值。</li><li><code>Reflect.set(target, propertyKey, value, receiver)</code>：设置目标对象的属性值。</li><li><code>Reflect.has(target, propertyKey)</code>：检查目标对象是否具有指定属性。</li><li><code>Reflect.deleteProperty(target, propertyKey)</code>：删除目标对象的属性。</li><li><code>Reflect.getOwnPropertyDescriptor(target, propertyKey)</code>：获取目标对象属性的描述符。</li></ul></li><li>原型操作： <ul><li><code>Reflect.getPrototypeOf(target)</code>：获取目标对象的原型。</li><li><code>Reflect.setPrototypeOf(target, prototype)</code>：设置目标对象的原型。</li></ul></li><li>实例化和构造函数操作： <ul><li><code>Reflect.construct(target, argumentsList, newTarget)</code>：使用指定参数实例化目标对象。</li><li><code>Reflect.apply(target, thisArgument, argumentsList)</code>：在指定上下文中调用目标对象。</li></ul></li><li>函数操作： <ul><li><code>Reflect.apply(target, thisArgument, argumentsList)</code>：调用目标函数，并传递指定的参数。</li><li><code>Reflect.construct(target, argumentsList, newTarget)</code>：使用指定参数构造目标函数的实例。</li></ul></li><li>其他操作： <ul><li><code>Reflect.isExtensible(target)</code>：检查目标对象是否可扩展。</li><li><code>Reflect.preventExtensions(target)</code>：使目标对象不可扩展。</li><li><code>Reflect.ownKeys(target)</code>：获取目标对象的所有自身属性的键名。</li></ul></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;xuxin&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// $data的代理data对象配置</span></span>
<span class="line"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> hadnler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> target<span class="token punctuation">[</span>hadnler<span class="token punctuation">]</span></span>
<span class="line">        <span class="token comment">// return Reflect.get(target,hadnler)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> hadnler<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        target<span class="token punctuation">[</span>hadnler<span class="token punctuation">]</span> <span class="token operator">=</span> value</span>
<span class="line">        <span class="token comment">// Reflect.set(target,hadnler,value)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function-variable function">deleteProperty</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> hadnler<span class="token punctuation">,</span>value</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">delete</span> target<span class="token punctuation">[</span>hadnler<span class="token punctuation">]</span></span>
<span class="line">        <span class="token comment">// return Reflect.deleteProperty(target,hadnler)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// $data是代理对象        </span></span>
<span class="line"><span class="token keyword">let</span> $data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span>obj<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,25)])])}const i=s(t,[["render",o]]),u=JSON.parse('{"path":"/javaScript/23-%E8%A1%A5%E5%85%85%E5%BD%95%E6%92%AD%E4%BB%A3%E7%90%86.html","title":"","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"代理","slug":"代理","link":"#代理","children":[]},{"level":2,"title":"Proxy","slug":"proxy","link":"#proxy","children":[{"level":3,"title":"语法使用","slug":"语法使用","link":"#语法使用","children":[]},{"level":3,"title":"reflect","slug":"reflect","link":"#reflect","children":[]}]}],"git":{},"filePathRelative":"javaScript/23-补充录播代理.md"}');export{i as comp,u as data};
