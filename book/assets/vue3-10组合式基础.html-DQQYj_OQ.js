import{_ as s,c as a,a as t,o as p}from"./app-Cbtc5Jwy.js";const e={};function l(o,n){return p(),a("div",null,[...n[0]||(n[0]=[t(`<h2 id="组合式响应式数据" tabindex="-1"><a class="header-anchor" href="#组合式响应式数据"><span>组合式响应式数据</span></a></h2><h3 id="响应式api" tabindex="-1"><a class="header-anchor" href="#响应式api"><span>响应式API</span></a></h3><ol><li>ref() 响应式数据 <ul><li>定义 <code>const xxx = ref(initValue)</code></li><li><code>JS中操作数据： xxx.value</code></li><li>接收的数据可以是：任何值类型</li><li>基本类型的数据：proxy<code>的代理目标必须是非原始值，没有任何方式能去拦截对</code>原始值\`的操作，所以就需要一层对象作为包裹，间接实现原始值的响应式方案</li><li>对象类型的数据：内部 <i style="color:gray;font-weight:bold;">“ 求助 ”</i> 了Vue3.0中的一个新函数—— <code>reactive</code>函数。</li></ul></li><li>reactive() 响应对象对象 <ul><li>仅对对象类型有效 对象、数组，而对 <code>string</code>、<code>number</code> 和 <code>boolean</code> 这样的原始类型无效</li><li>语法：<code>const 代理对象= reactive(源对象)</code>接收一个对象（或数组），返回一个<strong style="color:#DD5145;">代理对象（Proxy的实例对象，简称proxy对象）</strong></li><li>内部基于 ES6 的 Proxy 实现，通过代理对象操作源对象内部数据进行操作。</li><li>直接对引用类型的整体修改不会发生视图变化 <ul><li>Vue会跟踪对象的属性访问和修改，只有被访问的属性才会被转换为响应式，并建立依赖关系。当修改对象的属性时，Vue会触发与被修改属性相关的更新</li><li>修改整个通过ref操作</li></ul></li></ul></li></ol><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>获取setup中{{ss.name}}数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addSetName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>打印setup<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"> <span class="token comment">// 设置组合式方法使用setup</span></span>
<span class="line">    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span></span>
<span class="line">    <span class="token comment">// 响应式数据</span></span>
<span class="line">    <span class="token keyword">let</span> ss <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token comment">// 设置函数</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">addSetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 修改RefImpl对象成功  只需要一个value值</span></span>
<span class="line">        ss<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">123123</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="setup语法糖" tabindex="-1"><a class="header-anchor" href="#setup语法糖"><span>setup语法糖</span></a></h3><blockquote><p>在 <code>setup()</code> 函数中手动暴露大量的状态和方法非常繁琐,我们可以通过使用构建工具来简化该操作</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  state<span class="token punctuation">.</span>count<span class="token operator">++</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="readonly" tabindex="-1"><a class="header-anchor" href="#readonly"><span>readonly</span></a></h3><ul><li>接受一个 (响应式或者普通) 对象或是一个 <a href="https://cn.vuejs.org/api/reactivity-core.html#ref" target="_blank" rel="noopener noreferrer">ref</a>，返回一个原值的只读代理</li><li>只读代理是深层的：对任何嵌套属性的访问都将是只读的</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> original <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">const</span> copy <span class="token operator">=</span> <span class="token function">readonly</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span></span>
<span class="line">copy<span class="token punctuation">.</span>count<span class="token operator">++</span> 	<span class="token comment">// 不可修改</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> copyObj <span class="token operator">=</span> <span class="token function">readonly</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">copyObj<span class="token punctuation">.</span>count<span class="token operator">++</span> 	<span class="token comment">// 不可修改</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="组合式方法" tabindex="-1"><a class="header-anchor" href="#组合式方法"><span>组合式方法</span></a></h2><h3 id="计算属性" tabindex="-1"><a class="header-anchor" href="#计算属性"><span>计算属性</span></a></h3><ul><li>接收一个 getter 函数，返回一个只读的响应式 <a href="https://cn.vuejs.org/api/reactivity-core.html#ref" target="_blank" rel="noopener noreferrer">ref</a> 对象。</li><li>该 ref 通过 <code>.value</code> 暴露 getter 函数的返回值</li><li>也可以接受一个带有 <code>get</code> 和 <code>set</code> 函数的对象来创建一个可写的 ref 对象</li><li>功能与选项式api一致</li></ul><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ author }}--{{result}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span></span>
<span class="line"><span class="token keyword">const</span> author <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&quot;测试数据&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 一个计算属性 ref   默认传递get函数</span></span>
<span class="line"><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token keyword">return</span> msg<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">&quot;计算属性&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 传递get set函数</span></span>
<span class="line"><span class="token keyword">const</span> plusOne <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> author<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    author<span class="token punctuation">.</span>value <span class="token operator">=</span> val <span class="token operator">-</span> <span class="token number">1</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="监听属性" tabindex="-1"><a class="header-anchor" href="#监听属性"><span>监听属性</span></a></h3><p>侦听一个或多个响应式数据源，并在数据源变化时调用所给的回调函数</p><h4 id="watch" tabindex="-1"><a class="header-anchor" href="#watch"><span>watch</span></a></h4><ul><li>watch(数据源,回调函数,options) <ul><li>数据源”：它可以是一个 ref (包括计算属性)、一个响应式对象、一个 getter 函数、或多个数据源组成的数组</li><li>当使用getter函数作为源时，回调只在此函数的返回值变化时才会触发</li><li>直接侦听一个响应式对象时，侦听器会自动启用深层模式</li></ul></li><li>回调函数 <ul><li>单个来源: 接受三个参数：新值、旧值，以及一个用于注册副作用清理的回调函数</li><li>多个来源: 回调函数接受两个数组，分别对应来源数组中的新值和旧值</li></ul></li><li>options <ul><li>immediate：在侦听器创建时立即触发回调。第一次调用时，旧值将为 undefined。</li><li>deep：如果源是对象或数组，则强制深度遍历源，以便在深度变更时触发回调。详见深层侦听器。</li><li>flush：调整回调的刷新时机。 <ul><li>在 Vue 更新DOM之后的，你需要指明 <code>flush: &#39;post&#39;</code></li><li>在 Vue 更新DOM之前的，你需要指明 <code>flush: &#39;sync&#39;</code></li></ul></li><li>onTrack / onTrigger：调试侦听器的依赖关系。详见侦听器调试。</li><li>once: true: 回调只在源变化时触发一次</li></ul></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 监听单个数据</span></span>
<span class="line"><span class="token function">watch</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newss<span class="token punctuation">,</span> oldss</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newss<span class="token punctuation">,</span> oldss<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// 不能直接侦听响应式对象的属性值</span></span>
<span class="line"><span class="token function">watch</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>count<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newss<span class="token punctuation">,</span> oldss</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newss<span class="token punctuation">,</span> oldss<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// 通过函数的返回值进行监听</span></span>
<span class="line"><span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>state<span class="token punctuation">.</span>count<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newss<span class="token punctuation">,</span> oldss</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newss<span class="token punctuation">,</span> oldss<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"></span>
<span class="line"><span class="token comment">// 多个数组源</span></span>
<span class="line"><span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x<span class="token punctuation">,</span>y<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newss<span class="token punctuation">,</span> oldss</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newss<span class="token punctuation">,</span> oldss<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//  默认深度监听: 响应式对象,数组</span></span>
<span class="line"><span class="token function">watch</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newss<span class="token punctuation">,</span> oldss</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newss<span class="token punctuation">,</span> oldss<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>state<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newss<span class="token punctuation">,</span> oldss</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newss<span class="token punctuation">,</span> oldss<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 在页面DOM更新之前执行 flush: &#39;sync&#39;</span></span>
<span class="line"><span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">watch</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newVaue<span class="token punctuation">,</span> old</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newVaue<span class="token punctuation">,</span> old<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">debugger</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">flush</span><span class="token operator">:</span> <span class="token string">&#39;sync&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="注意" tabindex="-1"><a class="header-anchor" href="#注意"><span>注意</span></a></h5><ul><li>在深层级模式中监听对象 <ul><li><code>newValue</code> 此处和 <code>oldValue</code> 是相等的, 它们是同一个对象</li></ul></li><li>监听ref数据时 <ul><li>会得到新值和旧值,</li><li>监听ref引用类型时只有 <strong>整体</strong> 替换会得到新值和旧值,</li></ul></li><li>监听reactive时 <ul><li>监听引用类型中所有单体数据,默认是深度监听,并且新值和旧值一致</li><li>不会进行监听整体</li></ul></li><li>监听reactive单体数据 <ul><li>设置函数返回值为监听数据, 数据变化时得新值和旧值</li></ul></li></ul><h4 id="watcheffect" tabindex="-1"><a class="header-anchor" href="#watcheffect"><span>watchEffect</span></a></h4><p>立即运行一个函数，同时响应式地追踪其依赖，并在依赖更改时重新执行</p><ol><li>watchEffect的套路是：监视回调中响应式数据,会自动追踪 响应式数据作为依赖（和计算属性的行为类似）。每当依赖 变化时，回调会再次执行</li><li>停止一个侦听器，请调用 <code>watch</code> 或 <code>watchEffect</code> 返回的函数执行</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 初始化触发, 同时当内部依赖项触发,将会重新执行</span></span>
<span class="line"><span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> a  <span class="token operator">=</span> num<span class="token punctuation">.</span>value</span>
<span class="line">  <span class="token keyword">let</span> aa <span class="token operator">=</span> x<span class="token punctuation">.</span>value</span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;触发&quot;</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span>aa<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="组件基础" tabindex="-1"><a class="header-anchor" href="#组件基础"><span>组件基础</span></a></h3><p>在setup中直接引入对于的组件即可使用, 不需要进行注册</p><h3 id="props属性" tabindex="-1"><a class="header-anchor" href="#props属性"><span>props属性</span></a></h3><blockquote><p>在 <code>&lt;script setup&gt;</code> 中必须使用 <code>defineProps</code> API 来声明 <code>props</code></p></blockquote><ol><li>如果一个 prop 的名字很长，应使用小驼峰形式</li><li>模板中可以通过接收名称使用</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">//  defineProps可以不用引入 直接使用,  </span></span>
<span class="line"><span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;qqq&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> qwe<span class="token punctuation">,</span> qqq <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;qwe&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;qqq&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="属性验证" tabindex="-1"><a class="header-anchor" href="#属性验证"><span>属性验证</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">let</span> <span class="token punctuation">{</span> qwe<span class="token punctuation">,</span> qqq <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">qwe</span><span class="token operator">:</span> String<span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">qqq</span><span class="token operator">:</span> String<span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">propD</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">100</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="组件数据传递" tabindex="-1"><a class="header-anchor" href="#组件数据传递"><span>组件数据传递</span></a></h3><p>父组件通过props传递数据给子组件</p><p>子组件通过函数或自定义事件发送数据给父组件</p><p>兄弟组件传递数据</p><h3 id="事件" tabindex="-1"><a class="header-anchor" href="#事件"><span>事件</span></a></h3><p>与选项式使用是一致</p><h3 id="自定义事件" tabindex="-1"><a class="header-anchor" href="#自定义事件"><span>自定义事件</span></a></h3><blockquote><p>组件要触发的事件可以显式地通过 <a href="https://cn.vuejs.org/api/sfc-script-setup.html#defineprops-defineemits" target="_blank" rel="noopener noreferrer"><code>defineEmits()</code></a> 宏来声明：</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">//  defineEmits可以不用引入 直接使用</span></span>
<span class="line"><span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;inFocus&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;submit&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> <span class="token function-variable function">handlClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;luyao&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;yaya&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;222&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="自定义指令" tabindex="-1"><a class="header-anchor" href="#自定义指令"><span>自定义指令</span></a></h3><p>与选项式方式一致</p><div class="language-vue line-numbers-mode" data-highlighter="prismjs" data-ext="vue"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-inp</span><span class="token punctuation">&gt;</span></span>-hello组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"><span class="token comment">// 自定义指令生命钩子, 以v开头</span></span>
<span class="line"><span class="token keyword">const</span> vInp <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function-variable function">mounted</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 在元素上做些操作</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="组合式生命周期" tabindex="-1"><a class="header-anchor" href="#组合式生命周期"><span>组合式生命周期</span></a></h2><table><thead><tr><th>选项式 API</th><th>setup内生命周期</th><th>setup最先执行</th></tr></thead><tbody><tr><td><code>beforeCreate</code></td><td>不存在 相当于setup()</td><td>实例化之前执行</td></tr><tr><td><code>created</code></td><td>不存在 相当于setup()</td><td>实例化后执行</td></tr><tr><td><code>beforeMount</code></td><td><code>onBeforeMount</code></td><td>挂载前执行</td></tr><tr><td><code>mounted</code></td><td><code>onMounted</code></td><td>挂载后执行</td></tr><tr><td><code>beforeUpdate</code></td><td><code>onBeforeUpdate</code></td><td>更新前执行</td></tr><tr><td><code>updated</code></td><td><code>onUpdated</code></td><td>更新后执行</td></tr><tr><td><code>beforeUnmount</code></td><td><code>onBeforeUnmount</code></td><td>销毁前执行</td></tr><tr><td><code>unmounted</code></td><td><code>onUnmounted</code></td><td>销毁后执行</td></tr><tr><td><code>activated</code></td><td><code>onActivated</code></td><td>缓存的组件激活时调用</td></tr><tr><td><code>deactivated</code></td><td><code>onDeactivated</code></td><td>缓存的组件失活时调用</td></tr></tbody></table>`,47)])])}const i=s(e,[["render",l]]),u=JSON.parse('{"path":"/vue/vue3-10%E7%BB%84%E5%90%88%E5%BC%8F%E5%9F%BA%E7%A1%80.html","title":"","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"组合式响应式数据","slug":"组合式响应式数据","link":"#组合式响应式数据","children":[{"level":3,"title":"响应式API","slug":"响应式api","link":"#响应式api","children":[]},{"level":3,"title":"setup语法糖","slug":"setup语法糖","link":"#setup语法糖","children":[]},{"level":3,"title":"readonly","slug":"readonly","link":"#readonly","children":[]}]},{"level":2,"title":"组合式方法","slug":"组合式方法","link":"#组合式方法","children":[{"level":3,"title":"计算属性","slug":"计算属性","link":"#计算属性","children":[]},{"level":3,"title":"监听属性","slug":"监听属性","link":"#监听属性","children":[]},{"level":3,"title":"组件基础","slug":"组件基础","link":"#组件基础","children":[]},{"level":3,"title":"props属性","slug":"props属性","link":"#props属性","children":[]},{"level":3,"title":"组件数据传递","slug":"组件数据传递","link":"#组件数据传递","children":[]},{"level":3,"title":"事件","slug":"事件","link":"#事件","children":[]},{"level":3,"title":"自定义事件","slug":"自定义事件","link":"#自定义事件","children":[]},{"level":3,"title":"自定义指令","slug":"自定义指令","link":"#自定义指令","children":[]}]},{"level":2,"title":"组合式生命周期","slug":"组合式生命周期","link":"#组合式生命周期","children":[]}],"git":{},"filePathRelative":"vue/vue3-10组合式基础.md"}');export{i as comp,u as data};
