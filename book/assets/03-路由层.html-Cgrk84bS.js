import{_ as s,c as a,a as p,o as e}from"./app-D_gKCYhm.js";const l={};function t(i,n){return e(),a("div",null,[...n[0]||(n[0]=[p(`<h1 id="路由层" tabindex="-1"><a class="header-anchor" href="#路由层"><span>路由层</span></a></h1><h2 id="视图" tabindex="-1"><a class="header-anchor" href="#视图"><span>视图</span></a></h2><ul><li><p>视图函数的参数</p><p>第一个参数必须为request,接收客户端传过来的请求</p></li><li><p>HttpResponse()</p></li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span>字符串<span class="token punctuation">)</span><span class="token punctuation">:</span>返回字符串</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>render()</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&#39;yyy.html&#39;</span><span class="token punctuation">)</span></span>
<span class="line">第一个参数必须是request</span>
<span class="line">第二个参数template_name<span class="token punctuation">:</span>是返回的html文件的名字</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>redirect()</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">&#39;https://www.baidu.com&#39;</span><span class="token punctuation">)</span>  <span class="token comment"># 可以重定向到完整的地址</span></span>
<span class="line"><span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">&#39;/python/&#39;</span><span class="token punctuation">)</span>  <span class="token comment"># 可以重定向到urls.py中定义的其他的路由</span></span>
<span class="line"><span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">&#39;别名&#39;</span><span class="token punctuation">)</span>  <span class="token comment">#  重定向到别名执行的路由</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 重定向时必须加上前/,前/匹配时会自动在自己的服务器后面加路由匹配</span></span>
<span class="line"><span class="token comment"># 不加前/,那么匹配会直接在当前访问的地址后面加上路由匹配</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="path" tabindex="-1"><a class="header-anchor" href="#path"><span>path()</span></a></h2><p>用于描述路由和视图函数的对应关系</p><ul><li><p>path(route, view, name)</p><ul><li><p>route:字符串类型,匹配的请求路径</p><p>(路由必须加上后/,因为浏览器匹配时会自动加上后/进行匹配)</p></li><li><p>view:就是views.py中要执行的函数名字</p></li><li><p>name:为地址起别名</p></li></ul></li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">例<span class="token punctuation">:</span></span>
<span class="line"><span class="token comment"># urls.py</span></span>
<span class="line"><span class="token keyword">from</span> app01 <span class="token keyword">import</span> views</span>
<span class="line"></span>
<span class="line">urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;index/&#39;</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>test<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    </span>
<span class="line"><span class="token comment"># views.py中定义视图函数:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">test</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 视图函数的第一个参数必须是request</span></span>
<span class="line">    	<span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">&#39;hello world&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="re-path" tabindex="-1"><a class="header-anchor" href="#re-path"><span>re_path()</span></a></h2><p>使用正则表达式进行匹配</p><ul><li>re_path(reg, view, name) <ul><li>reg:正则表达式</li><li>view:要执行的视图函数的名字</li><li>name:为路由起别名</li></ul></li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">re_path<span class="token punctuation">(</span><span class="token string">&#39;\\w+&#39;</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>func<span class="token punctuation">)</span>  <span class="token comment"># 匹配一个或多个任意字符串</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="分组匹配" tabindex="-1"><a class="header-anchor" href="#分组匹配"><span>分组匹配</span></a></h3><p>用来给视图函数传递额外的参数,有多少个分组,就需要接收额外的多少个参数</p><ul><li><p>无名分组</p><p>将正则表达式匹配到的路由内容当做位置参数传递给要执行的视图函数</p></li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># urls.py</span></span>
<span class="line">re_path<span class="token punctuation">(</span><span class="token string">&#39;(\\w+)/(\\w+)&#39;</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>func<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># views.py</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">&#39;这是func视图函数,是由\\w+进来的&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>有名分组</p><p>将正则表达式匹配到的路由内容当做关键字参数传递给要执行的视图函数</p><ul><li>格式:(?&lt;名字&gt;正则表达式)</li></ul></li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># urls.py</span></span>
<span class="line">re_path<span class="token punctuation">(</span><span class="token string">&#39;(?P&lt;year&gt;\\d+)/(?P&lt;month&gt;\\d+)&#39;</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>func2<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># views.py</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">func2</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> year<span class="token punctuation">,</span> month<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># func2(year=2025, month=4)</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span> month<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">&#39;这是func2视图函数&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>注意:</p><p>无名分组和有名分组不能混合使用</p><p>一种分组可以使用多次</p></li></ul><h2 id="反向解析" tabindex="-1"><a class="header-anchor" href="#反向解析"><span>反向解析</span></a></h2><p>通过别名解析对应的路由</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># 前端反向解析</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token operator">%</span> url <span class="token string">&#39;别名&#39;</span> <span class="token operator">%</span><span class="token punctuation">}</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">&gt;</span>解析别名对应的路由</span>
<span class="line"></span>
<span class="line">但是只能解析没有分组的内容<span class="token punctuation">,</span>如果要解析分组的内容<span class="token punctuation">,</span>需要额外的传参</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">{</span><span class="token operator">%</span> url <span class="token string">&#39;别名&#39;</span> 参数<span class="token number">1</span> 参数<span class="token number">2</span> <span class="token operator">%</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 后端反向解析</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> reverse</span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">test</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 视图函数的第一个参数必须是request</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">&#39;other&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># ---&gt;/func/</span></span>
<span class="line">    <span class="token comment"># 无名分组和有名分组都可以使用args以元组的形式给额外的参数传参</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">&#39;date&#39;</span><span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># 有名分组可以通过字典给指定参数传参</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">&#39;date&#39;</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;year&#39;</span><span class="token punctuation">:</span> <span class="token number">2024</span><span class="token punctuation">,</span> <span class="token string">&#39;month&#39;</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;day&#39;</span><span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="路由分发" tabindex="-1"><a class="header-anchor" href="#路由分发"><span>路由分发</span></a></h2><p>django每一个应用应该都要有自己的urls.py文件夹,用来做分组开发(每个程序员就写自己的功能就好了)</p><p>利用路由分发的特点,将所有应用整合起来.总路由(应用同名的文件夹中的urls.py)不再做路由和视图之间的对应关系,而是做路由分发,告诉路由去向哪个应用找对应的urls.py处理路由和视图之间的对应关系</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># 项目同名的urls.py(总路由)</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path<span class="token punctuation">,</span> include</span>
<span class="line"><span class="token keyword">from</span> app01 <span class="token keyword">import</span> urls <span class="token keyword">as</span> app01_urls</span>
<span class="line"><span class="token keyword">from</span> app02 <span class="token keyword">import</span> urls <span class="token keyword">as</span> app02_urls</span>
<span class="line"></span>
<span class="line">urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token comment"># 可以多个路由匹配一个视图函数,但是不能多个视图函数对应一个路由</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;admin/&#39;</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;app01/&#39;</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span>app01_urls<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;app02/&#39;</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span>app02_urls<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 也可以直接通过字符串引用</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;app01/&#39;</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">&#39;app01.urls&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;app02/&#39;</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">&#39;app02.urls&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    </span>
<span class="line"><span class="token comment"># app01文件夹的urls.py</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path</span>
<span class="line"><span class="token keyword">from</span> app01 <span class="token keyword">import</span> views</span>
<span class="line"></span>
<span class="line">urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;index/&#39;</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>index<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># app02文件夹的urls.py</span></span>
<span class="line"><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path</span>
<span class="line"><span class="token keyword">from</span> app02 <span class="token keyword">import</span> views</span>
<span class="line"></span>
<span class="line">urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    path<span class="token punctuation">(</span><span class="token string">&#39;index/&#39;</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>index<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="作业" tabindex="-1"><a class="header-anchor" href="#作业"><span>作业</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token number">1.</span>定义路由成功访问视图获取到指定字符串<span class="token punctuation">:</span>hello world</span>
<span class="line">    </span>
<span class="line"><span class="token number">2.</span>定义路由访问应用app01中的index函数</span>
<span class="line"></span>
<span class="line"><span class="token number">3.</span>定义路由获取到年月日</span>
<span class="line"></span>
<span class="line"><span class="token number">4.</span>设计一个电商项目的路由系统，包含以下功能模块<span class="token punctuation">(</span>不需要完成函数的功能<span class="token punctuation">,</span>直接返回一句话就可以了<span class="token punctuation">)</span>：</span>
<span class="line">	用户认证：注册（<span class="token operator">/</span>register<span class="token operator">/</span>）、登录（<span class="token operator">/</span>login<span class="token operator">/</span>）、注销（<span class="token operator">/</span>logout<span class="token operator">/</span>）。</span>
<span class="line">	商品展示：商品列表（<span class="token operator">/</span>products<span class="token operator">/</span>）、商品详情（<span class="token operator">/</span>products<span class="token operator">/</span>商品<span class="token builtin">id</span><span class="token operator">/</span>）。</span>
<span class="line">	购物车：查看购物车（<span class="token operator">/</span>cart<span class="token operator">/</span>）、添加商品到购物车（<span class="token operator">/</span>cart<span class="token operator">/</span>add<span class="token operator">/</span>商品<span class="token builtin">id</span><span class="token operator">/</span>）。</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,32)])])}const o=s(l,[["render",t]]),u=JSON.parse('{"path":"/django/03-%E8%B7%AF%E7%94%B1%E5%B1%82.html","title":"路由层","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"视图","slug":"视图","link":"#视图","children":[]},{"level":2,"title":"path()","slug":"path","link":"#path","children":[]},{"level":2,"title":"re_path()","slug":"re-path","link":"#re-path","children":[{"level":3,"title":"分组匹配","slug":"分组匹配","link":"#分组匹配","children":[]}]},{"level":2,"title":"反向解析","slug":"反向解析","link":"#反向解析","children":[]},{"level":2,"title":"路由分发","slug":"路由分发","link":"#路由分发","children":[]},{"level":2,"title":"作业","slug":"作业","link":"#作业","children":[]}],"git":{},"filePathRelative":"django/03-路由层.md"}');export{o as comp,u as data};
