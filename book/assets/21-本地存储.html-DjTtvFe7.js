import{_ as s,c as a,a as e,o}from"./app-cH5Xd749.js";const p={};function t(l,n){return o(),a("div",null,[...n[0]||(n[0]=[e(`<h2 id="本地存储" tabindex="-1"><a class="header-anchor" href="#本地存储"><span>本地存储</span></a></h2><p>浏览器提供的一种持久化存储数据的机制。它允许网页在用户的浏览器中存储和检索数据，以便在不同的浏览器会话之间保持数据的状态</p><h2 id="local-storage" tabindex="-1"><a class="header-anchor" href="#local-storage"><span>Local Storage</span></a></h2><ul><li>存储数据 <code>localStorage.setItem(&#39;key&#39;, &#39;value&#39;)</code><ul><li>键为<code>key</code>，值为<code>value</code>。请注意，存储的值必须是字符串类型，如果需要存储其他类型的数据，需要进行适当的转换，如使用<code>JSON.stringify()</code>将对象转换为字符串</li></ul></li><li>读取数据 <code>localStorage.getItem(&#39;key&#39;)</code><ul><li>根据键<code>key</code>从本地存储中获取对应的值，并将其赋值给变量<code>value</code>。如果键不存在，则返回<code>null</code></li></ul></li><li>删除数据 <code>localStorage.removeItem(&#39;key&#39;)</code><ul><li>根据键<code>key</code>从本地存储中删除对应的键值对</li></ul></li><li>清空所有数据 <code>localStorage.clear()</code><ul><li>清空本地存储中的所有键值对</li></ul></li></ul><h3 id="特点" tabindex="-1"><a class="header-anchor" href="#特点"><span>特点:</span></a></h3><ul><li>持久性：本地存储的数据在用户的浏览器中是持久性的，不受会话结束或页面刷新的影响。存储的数据将一直保留在用户的浏览器中，直到被显式删除或浏览器缓存被清除。</li><li>容量限制：本地存储的容量是有限的，通常在几MB左右，具体限制因浏览器而异。超出存储容量限制可能导致存储失败或数据被截断。</li><li>同源策略：本地存储遵循同源策略，即只有在相同的协议、域名和端口下的页面才能访问相同的本地存储数据。</li><li>存储格式：本地存储的数据是以字符串的形式进行存储和检索。</li><li>简单易用：本地存储的API简单易用，使用<code>localStorage</code>对象的方法可以轻松地进行数据的存储、读取和删除操作。</li></ul><h2 id="session-storage" tabindex="-1"><a class="header-anchor" href="#session-storage"><span>session Storage</span></a></h2><ul><li>存储数据 <code>sessionStorage.setItem(&#39;key&#39;, &#39;value&#39;)</code><ul><li>码将一个键值对存储到会话存储中，键为<code>key</code>，值为<code>value</code>。存储的值必须是字符串类型</li></ul></li><li>读取数据 <code>sessionStorage.getItem(&#39;key&#39;)</code><ul><li>根据键<code>key</code>从本地存储中获取对应的值，并将其赋值给变量<code>value</code>。如果键不存在，则返回<code>null</code></li></ul></li><li>删除数据 <code>sessionStorage.removeItem(&#39;key&#39;)</code><ul><li>根据键<code>key</code>从本地存储中删除对应的键值对</li></ul></li><li>清空所有数据 <code>sessionStorage.clear()</code><ul><li>清空本地存储中的所有键值对</li></ul></li></ul><h3 id="特点-1" tabindex="-1"><a class="header-anchor" href="#特点-1"><span>特点:</span></a></h3><ul><li>会话持久性：会话存储的数据仅在当前会话期间有效。当用户在浏览器中打开一个新会话或关闭浏览器窗口时，会话存储中的数据将被清除</li><li>容量限制：本地存储的容量是有限的，通常在几MB左右，具体限制因浏览器而异。超出存储容量限制可能导致存储失败或数据被截断。</li><li>同源策略：本地存储遵循同源策略，即只有在相同的协议、域名和端口下的页面才能访问相同的本地存储数据。</li><li>存储格式：本地存储的数据是以字符串的形式进行存储和检索。</li><li>简单易用：本地存储的API简单易用，使用<code>sessionStorage</code>对象的方法可以轻松地进行数据的存储、读取和删除操作。</li></ul><h2 id="cookie" tabindex="-1"><a class="header-anchor" href="#cookie"><span>cookie</span></a></h2><p>用于在Web浏览器和服务器之间传递信息的机制。它是在用户访问网站时由服务器发送给浏览器的小型文本文件，浏览器会将其保存在用户的计算机上，并在后续请求中将该文件发送回服务器</p><blockquote><p>Cookie 主要用于以下三个方面：</p></blockquote><ul><li>会话状态管理（如用户登录状态、购物车、游戏分数或其它需要记录的信息）</li><li>个性化设置（如用户自定义设置、主题等）</li><li>浏览器行为跟踪（如跟踪分析用户行为等）</li></ul><h3 id="特点-2" tabindex="-1"><a class="header-anchor" href="#特点-2"><span>特点：</span></a></h3><ul><li><p>持久性：Cookie可以设置过期时间，从而可以在浏览器中持久保存一段时间。在设置了过期时间的Cookie还未过期之前，浏览器每次向服务器发送请求时都会带上这些Cookie。</p></li><li><p>容量限制：每个Cookie的容量限制通常为几KB，具体限制因浏览器而异。超出容量限制的Cookie可能会被截断或被浏览器拒绝。</p></li><li><p>同源策略：Cookie遵循同源策略，即只有在相同的协议、域名和端口下的页面才能访问相同的Cookie。不同域名下的页面无法访问彼此的Cookie，提供了一定的安全性。</p></li><li><p>存储格式：Cookie的数据以字符串形式进行存储，并以键值对（key-value pairs）的形式存在。可以通过设置Cookie的名称和值来存储数据。</p></li><li><p>自动发送：浏览器会在每次向服务器发送请求时自动将与当前域相关的Cookie信息附加到请求头中，以便服务器可以读取和处理这些信息。</p></li><li><p>客户端存储：Cookie是在用户的计算机上存储的，并由浏览器进行管理。因此，Cookie的存储和读取都是在客户端进行的，不需要服务器的参与。</p></li><li><p>将中文字符作为值进行设置，浏览器会将其进行编码以确保在传输过程中的正确性</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token string">&quot;你好&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// 中文转换成 Unicode编码</span></span>
<span class="line"><span class="token function">decodeURIComponent</span><span class="token punctuation">(</span><span class="token string">&quot;Unicode编码&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// 转成字符</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="基础" tabindex="-1"><a class="header-anchor" href="#基础"><span>基础</span></a></h3><p><code>document.cookie=name, value[, end[, path[, domain[, secure]]]]</code></p><p>使用<code>document.cookie</code>属性来设置和访问Cookie</p><blockquote><p>属性</p></blockquote><ul><li>名称（Name）：Cookie的名称，用于标识Cookie的唯一性。</li><li>值（Value）：Cookie的值，存储在Cookie中的数据。</li><li>过期时间（Expires）：指定Cookie的过期时间，可以是一个日期或一个相对时间。过期时间到达后，浏览器会自动删除Cookie。如果未设置过期时间，那么Cookie将在会话结束时（关闭浏览器）被删除。</li><li>域名（Domain）：指定可以访问Cookie的域名。默认情况下，Cookie只能在设置它的网页所属的域名下访问。可以使用域名来允许其他子域或父域访问Cookie。</li><li>路径（Path）：指定可以访问Cookie的路径。默认情况下，Cookie只能在设置它的网页所在的路径下访问。可以使用路径来限制Cookie的访问范围。</li><li>HTTP Only标志（HttpOnly）：如果设置为true，表示Cookie不能通过客户端的JavaScript代码访问，只能在HTTP请求中发送给服务器。这可以防止某些类型的跨站脚本攻击（XSS）</li><li>Secure 安全标志：如果设置为true，表示Cookie只能通过HTTPS协议进行传输。这可以增加Cookie的安全性，防止在非安全连接中被窃取。</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">document<span class="token punctuation">.</span>cookie<span class="token operator">=</span>name<span class="token punctuation">,</span> value<span class="token punctuation">[</span><span class="token punctuation">,</span> end<span class="token punctuation">[</span><span class="token punctuation">,</span> path<span class="token punctuation">[</span><span class="token punctuation">,</span> domain<span class="token punctuation">[</span><span class="token punctuation">,</span> secure<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span></span>
<span class="line">name 	<span class="token comment">//要创建或覆盖的cookie的名字 (string)。</span></span>
<span class="line">value 　<span class="token comment">//	cookie的值 (string)，如test=hello</span></span>
<span class="line">expires <span class="token comment">// 绝对过期时间, utc时间格式 toUTCString() GMT</span></span>
<span class="line">        <span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> </span>
<span class="line">		<span class="token keyword">let</span> dataww <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    utc时间格式</span>
<span class="line">        document<span class="token punctuation">.</span>cookie<span class="token operator">=</span><span class="token string">&quot;username=John Doe;expires=&quot;</span><span class="token operator">+</span> dataww <span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">end</span> <span class="token punctuation">(</span>可选<span class="token punctuation">)</span> <span class="token comment">//过期时间</span></span>
<span class="line">domain  <span class="token comment">//限定域名,如www.abc.com</span></span>
<span class="line">path    <span class="token comment">//限定路径，如/index</span></span>
<span class="line">max<span class="token operator">-</span>age <span class="token comment">//相对失效时间，单位为秒；取代expires，冲突则以max-Age为准（IE不支持）</span></span>
<span class="line">secure  <span class="token comment">//协议，不需要指定，为true是只能是HTTPS,false都可以 </span></span>
<span class="line">HttpOnly<span class="token comment">//仅用于服务器发送，JS无法读取  true 或false</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">expires <span class="token comment">// 设置指定过期时间, 时间需要比北京时间早八个小时</span></span>
<span class="line">		<span class="token function">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">30000</span><span class="token punctuation">)</span>  <span class="token constant">GMT</span> 格式</span>
<span class="line">        <span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> </span>
<span class="line">		<span class="token keyword">let</span> dataww <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    utc格式</span>
<span class="line"></span>
<span class="line">max<span class="token operator">-</span>age <span class="token comment">//相对失效时间，单位为秒；取代expires，冲突则以max-Age为准（IE不支持）</span></span>
<span class="line">		document<span class="token punctuation">.</span>cookie<span class="token operator">=</span><span class="token string">&quot;username=John Doe;max-Age=10&quot;</span> <span class="token comment">// 十秒之后过期</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>设置Cookie</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">&quot;cookieName=cookieValue; expires=Fri, 31 Dec 2023 23:59:59 GMT; path=/&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>读取Cookie</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">let</span> cookieValue <span class="token operator">=</span> document<span class="token punctuation">.</span>cookie<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>获取特定Cookie的值</p></blockquote><p>通过遍历所有的Cookie并匹配指定的名称来获取对应的值</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">getCookieValue</span><span class="token punctuation">(</span><span class="token parameter">cookieName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> name <span class="token operator">=</span> cookieName <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">let</span> decodedCookie <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">let</span> cookieArray <span class="token operator">=</span> decodedCookie<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cookieArray<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> cookie <span class="token operator">=</span> cookieArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      cookie <span class="token operator">=</span> cookie<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">return</span> cookie<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span>length<span class="token punctuation">,</span> cookie<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> cookieValue <span class="token operator">=</span> <span class="token function">getCookieValue</span><span class="token punctuation">(</span><span class="token string">&quot;cookieName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>删除Cookie</p></blockquote><p>定义了一个名为<code>deleteCookie</code>的函数，通过设置指定Cookie的过期时间为过去的时间来删除它</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">deleteCookie</span><span class="token punctuation">(</span><span class="token parameter">cookieName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> cookieName <span class="token operator">+</span> <span class="token string">&quot;=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">deleteCookie</span><span class="token punctuation">(</span><span class="token string">&quot;cookieName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>补充</p></blockquote><ul><li>持久性 Cookie 的生命周期取决于过期时间（<code>Expires</code>）或有效期（<code>Max-Age</code>）指定的一段时间</li><li>SameSite 控制 cookie 是否随跨站请求一起发送</li><li>Same Party 是一种关于Cookie的扩展属性，用于进一步限制Cookie的发送范围</li><li>Partition Key Site 使用分区存储来管理存储 cookie数据</li><li>Cross-site 处理在不同站点之间进行数据共享和通信的问题</li><li>Priority 指定资源加载的优先级顺序</li></ul>`,35)])])}const c=s(p,[["render",t]]),u=JSON.parse('{"path":"/javaScript/21-%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8.html","title":"","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"本地存储","slug":"本地存储","link":"#本地存储","children":[]},{"level":2,"title":"Local Storage","slug":"local-storage","link":"#local-storage","children":[{"level":3,"title":"特点:","slug":"特点","link":"#特点","children":[]}]},{"level":2,"title":"session Storage","slug":"session-storage","link":"#session-storage","children":[{"level":3,"title":"特点:","slug":"特点-1","link":"#特点-1","children":[]}]},{"level":2,"title":"cookie","slug":"cookie","link":"#cookie","children":[{"level":3,"title":"特点：","slug":"特点-2","link":"#特点-2","children":[]},{"level":3,"title":"基础","slug":"基础","link":"#基础","children":[]}]}],"git":{},"filePathRelative":"javaScript/21-本地存储.md"}');export{c as comp,u as data};
