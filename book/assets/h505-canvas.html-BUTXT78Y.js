import{_ as s,c as a,a as p,o as t}from"./app-DWS4XIiF.js";const e={};function l(c,n){return t(),a("div",null,[...n[0]||(n[0]=[p(`<h1 id="canvas-绘制" tabindex="-1"><a class="header-anchor" href="#canvas-绘制"><span>canvas 绘制</span></a></h1><p>canvas（画布）是HTML5标准引入的一个新标签，该标签结合js可以实现各种图形的绘制, 可以用于动画、游戏画面、数据可视化、图片编辑以及实时视频处理等方面</p><p>canvas文档API地址: https://www.canvasapi.cn/</p><h2 id="_1-hello-world" tabindex="-1"><a class="header-anchor" href="#_1-hello-world"><span>1. hello world</span></a></h2><p>可以使用 CSS 的 width 和 height 以在渲染期间缩放图像以适应样式大小 ,也可以直接在canvas标签上进行设置</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token operator">&lt;</span>canvas width<span class="token operator">=</span><span class="token string">&quot;600&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;600&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;canvas&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>canvas<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line">canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span></span>
<span class="line">canvas<span class="token punctuation">.</span>height  <span class="token operator">=</span> height<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>width和height属性设置的是画布大小，canvas根据画布尺寸来绘制图像，canvas画布本身的大小就是默认值300*150</p><p>style中的width和height设置的是canvas的在浏览器中的显示大小</p><p>canvas先是根据自身画布大小进行绘制，绘制完毕，由style指定的大小（会进行缩放）渲染到浏览器页面</p><p>要想图片不变模糊，应该以原像素大小设置画布的大小</p><h2 id="_2-基本api" tabindex="-1"><a class="header-anchor" href="#_2-基本api"><span>2. 基本API</span></a></h2><p>首先需要通过canvas节点的<em>getContext</em>方法获取ctx对象，所有的绘制都是在ctx对象上进行操作的。<em>getContext</em>方法的参数为<code> &quot;2d&quot;</code> , 3d可以通过<code>theer.js</code>完成</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 获取画板</span></span>
<span class="line"><span class="token comment">// 绘制上下文的获取</span></span>
<span class="line"><span class="token keyword">let</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     			 <span class="token comment">// 获取画笔</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-绘制基础" tabindex="-1"><a class="header-anchor" href="#_3-绘制基础"><span>3. 绘制基础</span></a></h2><h3 id="_3-1-绘制线段" tabindex="-1"><a class="header-anchor" href="#_3-1-绘制线段"><span>3.1 绘制线段</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">//规定线段的各个起止点</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 线段起点</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 到达位置</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//画线绘制笔</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>线段的绘制，需要使用<em>moveTo</em>方法规定线段的起点，<em>lineTo</em>方法规定线段的各个中间点，这些点的坐标都是相对于canvas标签的左上角(0,0)的。最后使用<em>stroke</em>方法绘制出线段</p><p>绘制方法有两种，一种为stroke（绘制线段）或 使用 <em>fill</em>() 方法将线段围成的区域填充绘制</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">//规定线段的各个起止点</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//填充绘制填充笔  (不会填充线段占据的所在路径)</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-设置绘制颜色" tabindex="-1"><a class="header-anchor" href="#_3-2-设置绘制颜色"><span>3.2 设置绘制颜色</span></a></h3><blockquote><p>默认的线段或者填充是黑色的，我们可以在绘制之前设置颜色：</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//设置填充颜色。</span></span>
<span class="line">ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;rgba(255,0,0,.9)&quot;</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/*</span>
<span class="line">//设置线段颜色</span>
<span class="line">ctx.strokeStyle = &quot;red&quot;;</span>
<span class="line">ctx.stroke();</span>
<span class="line">*/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>颜色值支持 <em>单词</em>、<em>#</em>、<em>rgb</em>、<em>rgba</em>，还支持渐变色，我们在后面介绍</p><h3 id="_3-3-beginpath与closepath" tabindex="-1"><a class="header-anchor" href="#_3-3-beginpath与closepath"><span>3.3 beginPath与closePath</span></a></h3><ul><li>beginPath(bg怕) 抬笔 斩断上一条路径的关系 <ul><li>fillRect与strokeRect线段好像不影响,但是最好设置</li></ul></li><li>closePath(可类似怕) 自动从当前位置闭合线段 (把路径最后位置和开始点直线相连，形成闭合区域)</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">//1</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//2</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上述代码并不能实现一段线段和一块填充，而是1部分有线段和填充，2部分有填充。也就是说2部分的填充对1部分也会生效。如果我们想要让两块内容不相互影响的话，需要使用 <em>beginPath</em> 方法，规定每个部分的绘画起始：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">//1</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//2</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对应的还有 <em>closePath</em> 方法，这个方法会使线段闭合：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>所以，<em>closePath</em>并不是必须的，根据需求决定是否添加。</p><h3 id="_3-4-绘制矩形线段" tabindex="-1"><a class="header-anchor" href="#_3-4-绘制矩形线段"><span>3.4 绘制矩形线段</span></a></h3><blockquote><p>ctx.rect(x,y,w,h);</p></blockquote><p>边框矩形 - 绘制一个只有边框的矩形：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//四个参数， x:起点x坐标，y:起点y坐标，w:矩形宽，h:矩形高</span></span>
<span class="line"><span class="token comment">//比如：绘制一个起点在(10,10)，且宽度是200，高度为100的矩形</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//上两行代码等价于：</span></span>
<span class="line"><span class="token comment">//ctx.strokeRect(10,10,200,100);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>填充矩形 - 绘制一个拥有填充色的矩形：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//参数与上述相同</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//上两行代码等价于：</span></span>
<span class="line"><span class="token comment">//ctx.fillRect(10,10,200,100);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-5-擦除区域" tabindex="-1"><a class="header-anchor" href="#_3-5-擦除区域"><span>3.5 擦除区域</span></a></h3><blockquote><p>clearRect(x,y,w,h)</p></blockquote><p>将指定的矩形区域所绘制的内容擦除：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//擦除该矩形范围里面的绘图内容，参数与上述相同</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-6-绘制圆形-或圆的一部分" tabindex="-1"><a class="header-anchor" href="#_3-6-绘制圆形-或圆的一部分"><span>3.6 绘制圆形(或圆的一部分)</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">*</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token operator">*</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">240</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">240</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">context<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">/*</span>
<span class="line">arc参数</span>
<span class="line">	x ：圆心 x 坐标</span>
<span class="line">	y ：圆心 y 坐标</span>
<span class="line">	r ：半径</span>
<span class="line">	sAngle : 起始弧度</span>
<span class="line">	eAngle : 结束弧度</span>
<span class="line">	counterclockwise ：可选，布尔值，默认false。true代表逆时针画，false代表顺时针画</span>
<span class="line">	</span>
<span class="line">0 弧度是3点钟开始</span>
<span class="line"></span>
<span class="line">1弧度 = 1角度 × (π / 180)</span>
<span class="line">*/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 绘制椭圆</span></span>
<span class="line">context<span class="token punctuation">.</span><span class="token function">ellipse</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radiusX<span class="token punctuation">,</span> radiusY<span class="token punctuation">,</span> rotation<span class="token punctuation">,</span> <span class="token number">0</span><span class="token operator">*</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">context<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">context<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">/*</span>
<span class="line">    x ：圆心 x 坐标</span>
<span class="line">	y ：圆心 y 坐标</span>
<span class="line">	radiusX ：x半径</span>
<span class="line">	radiusY ：y半径</span>
<span class="line">	rotation: 旋转角度使用弧度值  椭圆的旋转(数值)或 单位是弧度</span>
<span class="line">	sAngle : 起始弧度</span>
<span class="line">	eAngle : 结束弧度</span>
<span class="line">	counterclockwise ：可选，布尔值，默认false。true代表逆时针画，false代表顺时针画</span>
<span class="line">*/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-7-绘制弧线" tabindex="-1"><a class="header-anchor" href="#_3-7-绘制弧线"><span>3.7 绘制弧线</span></a></h3><p>与绘制圆不同的是，绘制弧是通过指定点的切线绘制的：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">//弧起点</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">arcTo</span><span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">,</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//弧线</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">/*</span>
<span class="line"></span>
<span class="line">arcTo参数</span>
<span class="line">	x1 : 两条切线交点x坐标</span>
<span class="line">	y1 : 两条切线交点y坐标</span>
<span class="line">	x2 : 第二条切线上一点的x坐标</span>
<span class="line">	y2 : 第二条切线上一点的y坐标</span>
<span class="line">	r : 弧半径</span>
<span class="line">	</span>
<span class="line">也就是说，弧线是与两条相交线段都相切的。  获取对应圆半径大小的弧线 </span>
<span class="line">第一条线段是 起点---(x1,y1)</span>
<span class="line">第二条线段是 (x1,y1)---(x2,y2)  </span>
<span class="line"></span>
<span class="line">通过辅助线理解</span>
<span class="line">       ctx.beginPath()</span>
<span class="line">        ctx.moveTo(100, 20);</span>
<span class="line">        // 中间点</span>
<span class="line">        ctx.lineTo(150,20)</span>
<span class="line">        ctx.lineTo(150,70)</span>
<span class="line">        ctx.stroke();</span>
<span class="line">*/</span>  </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-8-贝塞尔曲线" tabindex="-1"><a class="header-anchor" href="#_3-8-贝塞尔曲线"><span>3.8 贝塞尔曲线</span></a></h3><p>简单点就是一个曲线的画法: 通过控制点进行拉扯设置</p><ul><li>cxt.moveTo(20,20) 设置起始点</li><li>cxt.quadraticCurveTo(拉扯点x, 拉扯点Y, 结束点X, 结束点Y) <ul><li>理解: 起点和终点位置连接成线, 通过拉扯点设置近远, 近曲线就弧线小, 远弧线大</li></ul></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">绘制曲线的贝赛尔曲线  只有一个控制点</span>
<span class="line">cxt<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>			</span>
<span class="line">cxt<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>  	点的起点</span>
<span class="line">                    控制点位置  后两位是的终点 </span>
<span class="line">cxt<span class="token punctuation">.</span><span class="token function">quadraticCurveTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>绘制二次贝赛尔曲线 有两个控制点</p><ul><li>cxt.moveTo(20,20) 设置起始点</li><li>cxt.bezierCurveTo(拉扯点1x, 拉扯点1Y, 拉扯点1x, 拉扯点1Y, 结束点X, 结束点Y)</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">cxt<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>		</span>
<span class="line">cxt<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>    	</span>
<span class="line">cxt<span class="token punctuation">.</span><span class="token function">bezierCurveTo</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-各种样式" tabindex="-1"><a class="header-anchor" href="#_4-各种样式"><span>4.各种样式</span></a></h2><h3 id="_4-1-线条样式" tabindex="-1"><a class="header-anchor" href="#_4-1-线条样式"><span>4.1 线条样式</span></a></h3><ul><li><p>lineWidth</p><p>设置线段的宽度：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">//10px的线段宽度</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>lineCap</p><p>设置线段两端的线帽：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span>lineCap <span class="token operator">=</span> <span class="token string">&quot;round&quot;</span><span class="token punctuation">;</span> <span class="token comment">//线段两端添加圆形线帽</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/*</span>
<span class="line">butt 默认值，平直的边缘</span>
<span class="line">round 圆形线帽（线段会略微变长）</span>
<span class="line">square 正方形线帽（线段会略微变长）</span>
<span class="line">*/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>lineJoin</p><p>设置线段相交时夹角的样式：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span>lineJoin <span class="token operator">=</span> <span class="token string">&quot;round&quot;</span><span class="token punctuation">;</span> <span class="token comment">//圆形夹角</span></span>
<span class="line"><span class="token comment">/*</span>
<span class="line">bevel 斜角</span>
<span class="line">round 圆角</span>
<span class="line">miter 默认，尖角</span>
<span class="line">*/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_4-2-阴影样式" tabindex="-1"><a class="header-anchor" href="#_4-2-阴影样式"><span>4.2 阴影样式</span></a></h3><p>与css设置阴影类似，只不过canvas里面分为4个属性来设置：</p><p><code>ctx.shadowOffsetX</code> 设置水平偏移；</p><p><code>ctx.shadowOffsetY</code> 设置垂直偏移；</p><p><code>ctx.shadowBlur</code> 设置模糊程度；</p><p><code>ctx.shadowColor</code> 设置阴影颜色。</p><blockquote><p>设置颜色才能看见</p></blockquote><h3 id="_4-3-渐变色" tabindex="-1"><a class="header-anchor" href="#_4-3-渐变色"><span>4.3 渐变色</span></a></h3><p>当设置绘制颜色时，除了直接写固定的颜色之外，还可以使用渐变色。渐变是全局性</p><ul><li><p>createLinearGradient(x0,y0,x1,y1)</p></li><li><p>就是从坐标点<code>[x0, y0]</code>到坐标点<code>[x1, y1]</code>的位置画一条线，然后整个渐变色带与与这条线垂直</p></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// x0	渐变开始点的 x 坐标</span></span>
<span class="line"><span class="token comment">// y0	渐变开始点的 y 坐标</span></span>
<span class="line"><span class="token comment">// x1	渐变结束点的 x 坐标</span></span>
<span class="line"><span class="token comment">// y1	渐变结束点的 y 坐标</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 设置线性渐变的 起点坐标 终点坐标</span></span>
<span class="line"><span class="token keyword">let</span> x <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createLinearGradient</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//设置各个色阶（可以结合css来理解）</span></span>
<span class="line">x<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;#000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">x<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">.5</span><span class="token punctuation">,</span><span class="token string">&quot;#f00&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">x<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;#fff&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//应用样式</span></span>
<span class="line">ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> x<span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> x<span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>createRadialGradient(x0,y0,r0,x1,y1,r1)</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// x0	渐变的开始圆的 x 坐标</span></span>
<span class="line"><span class="token comment">// y0	渐变的开始圆的 y 坐标</span></span>
<span class="line"><span class="token comment">// r0	开始圆的半径    第一个圆的大小</span></span>
<span class="line"><span class="token comment">// x1	渐变的结束圆的 x 坐标</span></span>
<span class="line"><span class="token comment">// y1	渐变的结束圆的 y 坐标</span></span>
<span class="line"><span class="token comment">// r1	结束圆的半径</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 渐变开始圆的坐标与半径 结束圆的坐标与半径</span></span>
<span class="line"><span class="token keyword">let</span> x <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createRadialGradient</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//设置各个色阶（可以结合css来理解）</span></span>
<span class="line">x<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;#fff&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  设置第一个圆的颜色</span>
<span class="line">	从第一个圆的半径外到第二个元素进行渐变</span>
<span class="line">x<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token string">&quot;yellow&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line">	第二个元素结束后的颜色</span>
<span class="line">x<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//应用样式</span></span>
<span class="line">ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> x<span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_4-4-转换" tabindex="-1"><a class="header-anchor" href="#_4-4-转换"><span>4.4 转换</span></a></h3><ul><li><p>scale()</p></li><li><p>用来缩放Canvas画布的坐标系，只是影响坐标系，之后的绘制会受此方法影响，但之前已经绘制好的效果不会有任何变化。</p><ul><li>默认缩放中心点是Canvas的左上角(0, 0)坐标点，如果希望改变缩放中心点，需要先使用translate()方法进行位移</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//画布水平整体缩放1.5倍，垂直缩放2倍</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>rotate()</p><ul><li>默认旋转中心点是Canvas的左上角<code>(0, 0)</code>坐标点</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token operator">/</span><span class="token number">180</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//画布旋转30deg，（注意要转换成弧度）</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>translate()</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//规定(100,100)位置 为canvas的(0,0)点</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>setTransform重置画布与 save功能一致</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">context<span class="token punctuation">.</span><span class="token function">setTransform</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token literal-property property">a</span><span class="token operator">:</span> Number水平缩放。</span>
<span class="line"><span class="token literal-property property">b</span><span class="token operator">:</span> Number水平斜切。</span>
<span class="line"><span class="token literal-property property">c</span><span class="token operator">:</span> Number垂直斜切。</span>
<span class="line"><span class="token literal-property property">d</span><span class="token operator">:</span> Number垂直缩放。</span>
<span class="line"><span class="token literal-property property">e</span><span class="token operator">:</span> Number水平位移。</span>
<span class="line"><span class="token literal-property property">f</span><span class="token operator">:</span> Number垂直位移。</span>
<span class="line"></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">setTransform</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  默认值还原<span class="token punctuation">,</span><span class="token punctuation">(</span>重置画布<span class="token punctuation">,</span>无视之前的操作<span class="token punctuation">)</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>ctx.save()</code> 保存当前环境的状态</p></li><li><p><code>ctx.restore()</code> 返回之前保存的环境状态</p></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">cxt<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">cxt<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span></span>
<span class="line">cxt<span class="token punctuation">.</span>shadowOffsetX <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></span>
<span class="line">cxt<span class="token punctuation">.</span>shadowColor <span class="token operator">=</span> <span class="token string">&#39;rgb(50, 50, 50)&#39;</span></span>
<span class="line">cxt<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token operator">/</span><span class="token number">180</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">cxt<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">cxt<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">cxt<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-绘制文字" tabindex="-1"><a class="header-anchor" href="#_5-绘制文字"><span>5.绘制文字</span></a></h2><h3 id="_5-1-绘制方式" tabindex="-1"><a class="header-anchor" href="#_5-1-绘制方式"><span>5.1 绘制方式</span></a></h3><ul><li><p>fillText 实心文字</p><p><code>ctx.fillText(&quot;ABC&quot;,100,100);</code></p><p>文字内容，x坐标，y坐标(文字的下边是y轴线)。</p></li><li><p>strokeText 空心文字，参数与上述相同。</p><ul><li>需要设置font文字样式(否则无法看出空心文字)</li></ul></li></ul><h3 id="_5-2-文字样式" tabindex="-1"><a class="header-anchor" href="#_5-2-文字样式"><span>5.2 文字样式</span></a></h3><ul><li><p>font</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">&quot;bold 18px &#39;微软雅黑&#39;&quot;</span><span class="token punctuation">;</span> <span class="token comment">//值与css类似</span></span>
<span class="line">cxt<span class="token punctuation">.</span><span class="token function">strokeText</span><span class="token punctuation">(</span><span class="token string">&quot;你好&quot;</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>textAlign</p><ul><li>设置x,y坐标的为起始点</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">&quot;right&quot;</span><span class="token punctuation">;</span><span class="token comment">//对齐方式 start默认 end left right center  x坐标</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// left x坐标值容最左侧位置  start默认</span></span>
<span class="line"><span class="token comment">// right x坐标值最右侧位置  end</span></span>
<span class="line"><span class="token comment">// center x坐标值水平中心位置</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>textBaseline 不讲</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">&quot;Middle&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//文字基线 alphabetic    默认值</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//top   设定垂直y坐标作为文本顶部区域</span></span>
<span class="line"><span class="token comment">//middle   设定垂直y坐标作为文本区域的垂直中心位置</span></span>
<span class="line"><span class="token comment">//bottom   设定的垂直y坐标作为文本em区域的底部。</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>文字阴影</p></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">cxt<span class="token punctuation">.</span>shadowOffsetX <span class="token operator">=</span> <span class="token number">10</span>    文字阴影偏移量</span>
<span class="line">cxt<span class="token punctuation">.</span>shadowOffsetY <span class="token operator">=</span> <span class="token number">10</span></span>
<span class="line">cxt<span class="token punctuation">.</span>shadowColor <span class="token operator">=</span> <span class="token number">10</span>		 文字阴影颜色</span>
<span class="line">cxt<span class="token punctuation">.</span>shadowBlur<span class="token operator">=</span> <span class="token number">10</span>   		文字模糊程度</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-绘制图片" tabindex="-1"><a class="header-anchor" href="#_6-绘制图片"><span>6.绘制图片</span></a></h2><p>作用于: 图像压缩,水印合成等处理</p><ul><li>drawImage(image, x, y); 设置图片位置</li><li>drawImage(img,x, y,w,h); 设置图片位置与宽高</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">let</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;./1.png&quot;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//需要先加载图片然后绘制</span></span>
<span class="line">img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line"> ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>图片节点<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>宽<span class="token punctuation">,</span>高<span class="token punctuation">)</span></span>
<span class="line"> ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>oImg<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span> 裁剪图片</span>
<span class="line">  <span class="token comment">//图片节点,裁剪图片开始X,裁剪图片开始Y,裁剪结束宽X,裁剪结束宽Y,图片放置位置X,图片放置位置Y,画布中大小宽,画布中大小高</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span>\`</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="绘制视频" tabindex="-1"><a class="header-anchor" href="#绘制视频"><span>绘制视频</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 设置video事件  video能够播放时触发 oncanplay事件</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">      cxt<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>video<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">//  异步调用显示</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-highlighter="prismjs" data-ext="html"><pre><code><span class="line"> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>video<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./1.mp4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">controls</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>600<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>600<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span> </span>
<span class="line"></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;canvas&quot;</span><span class="token punctuation">)</span></span>
<span class="line"> <span class="token comment">// 获取画笔</span></span>
<span class="line"> <span class="token keyword">let</span> cxt <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span></span>
<span class="line"> <span class="token keyword">let</span> video <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;video&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// 视频加载完成执行</span></span>
<span class="line">video<span class="token punctuation">.</span><span class="token function-variable function">oncanplay</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  video<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">switchToCanvas</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"> <span class="token keyword">function</span> <span class="token function">switchToCanvas</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>video<span class="token punctuation">.</span>ended<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token comment">// 将video上的图片的每一帧以图片的形式绘制的canvas上</span></span>
<span class="line">   cxt<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>video<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token comment">// 执行动画帧</span></span>
<span class="line">   <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>switchToCanvas<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token punctuation">}</span></span>
<span class="line"></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-像素操作" tabindex="-1"><a class="header-anchor" href="#_7-像素操作"><span>7.像素操作</span></a></h2><h3 id="_7-1-获取区域像素数据" tabindex="-1"><a class="header-anchor" href="#_7-1-获取区域像素数据"><span>7.1 获取区域像素数据</span></a></h3><p>对图形进行像素处理</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">let</span> imageData <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getImageData</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">/*</span>
<span class="line">getImageData(x,y,w,h)</span>
<span class="line"></span>
<span class="line">imageData.data中存储着每个像素点的颜色数据,每四位对应一个点的信息 r g b a</span>
<span class="line">imageData.width返回对象的宽度</span>
<span class="line">imageData.height返回对象的高度</span>
<span class="line">*/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 绘制图像马赛克</span></span>
<span class="line"><span class="token keyword">let</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;./9.jpg&quot;</span></span>
<span class="line">img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">let</span> x <span class="token operator">=</span> y <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">let</span> aw <span class="token operator">=</span> ah <span class="token operator">=</span> <span class="token number">50</span></span>
<span class="line">    <span class="token comment">// 获取图片像素</span></span>
<span class="line">    <span class="token keyword">let</span> imageData <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getImageData</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> aw<span class="token punctuation">,</span> aw<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// 马斯克大小</span></span>
<span class="line">    <span class="token keyword">let</span> blockSize <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">let</span> data <span class="token operator">=</span> imageData<span class="token punctuation">.</span>data<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 根据设置马赛克大小,计算多少行</span></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> h <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> h <span class="token operator">&lt;</span> aw<span class="token punctuation">;</span> h <span class="token operator">+=</span> blockSize<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 根据设置马赛克大小,计算多少列</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> w <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> w <span class="token operator">&lt;</span> aw<span class="token punctuation">;</span> w <span class="token operator">+=</span> blockSize<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// w = 0 + (0 * 50)  *  4 </span></span>
<span class="line">            <span class="token comment">// w = 1 + (0 * 50)  *  4 </span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token punctuation">(</span>w <span class="token operator">+</span> <span class="token punctuation">(</span>h <span class="token operator">*</span> aw<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">;</span></span>
<span class="line">            ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string"></span>
<span class="line">rgba(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>data<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>data<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>data<span class="token punctuation">[</span>index <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span>
<span class="line"></span><span class="token template-punctuation string">\`</span></span></span>
<span class="line">            ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>aw <span class="token operator">+</span> w<span class="token punctuation">,</span> aw <span class="token operator">+</span> h<span class="token punctuation">,</span> blockSize<span class="token punctuation">,</span> blockSize<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-创建空白的imagedata对象" tabindex="-1"><a class="header-anchor" href="#_7-2-创建空白的imagedata对象"><span>7.2 创建空白的imageData对象</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">let</span> imgData <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createImageData</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//创建一个空白的 100*100 对象，可以后续设置各个色点数据</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 手动设置</span></span>
<span class="line"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>imgdata<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  imgdata<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">255</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">cxt<span class="token punctuation">.</span><span class="token function">putImageData</span><span class="token punctuation">(</span>imgdata<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-将图像数据绘制到画布" tabindex="-1"><a class="header-anchor" href="#_7-3-将图像数据绘制到画布"><span>7.3 将图像数据绘制到画布</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">putImageData</span><span class="token punctuation">(</span>imgData<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// ctx.putImageData(data,x,y);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-合成" tabindex="-1"><a class="header-anchor" href="#_8-合成"><span>8.合成</span></a></h2><h3 id="_8-1-透明度" tabindex="-1"><a class="header-anchor" href="#_8-1-透明度"><span>8.1 透明度</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span>globalAlpha<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">;</span> <span class="token comment">//设置透明度为0.2</span></span>
<span class="line"><span class="token comment">// 设置画笔全局透明</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-2-绘制内容重叠时合成方式" tabindex="-1"><a class="header-anchor" href="#_8-2-绘制内容重叠时合成方式"><span>8.2 绘制内容重叠时合成方式</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> source<span class="token operator">-</span>over</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="source" tabindex="-1"><a class="header-anchor" href="#source"><span>source</span></a></h4><blockquote><p>设置新内容</p></blockquote><ul><li>source-over 默认新绘制内容在再原图型上方,原图形显示</li><li>source-in 原图形不显示, 只显示原图形和新图形重叠部分的新图形</li><li>source-out 原图形不显示, 重叠位置透明, 显示新图片</li><li>source-atop 原图形显示, 新图形只显示重叠部分</li></ul><h4 id="destination" tabindex="-1"><a class="header-anchor" href="#destination"><span>destination</span></a></h4><blockquote><p>设置原内容</p></blockquote><ul><li>destination-over 原图型在新图形是上方,新图形显示</li><li>destination-in 新图形不显示, 只显示原图形和新图形重叠部分的 原图形内容</li><li>destination-out 新图形不显示, 重叠位置透明, 显示原图片</li><li>destination-atop 新图形显示, 原图形只显示重叠部分</li></ul><h4 id="其他" tabindex="-1"><a class="header-anchor" href="#其他"><span>其他</span></a></h4><ul><li>xor 互相重叠的区域是透明的</li></ul><h2 id="_9-补充" tabindex="-1"><a class="header-anchor" href="#_9-补充"><span>9.补充</span></a></h2><h3 id="_9-1-clip" tabindex="-1"><a class="header-anchor" href="#_9-1-clip"><span>9.1 clip</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">ctx<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">ctx<span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//clip之后，后续所有的绘画的内容只有(50,20,200,120)之间的才会显示</span></span>
<span class="line"><span class="token comment">//如果不想clip影响后续所有，可以使用save方法保存状态，在需要不需要剪裁之后，使用restore</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="下载" tabindex="-1"><a class="header-anchor" href="#下载"><span>下载</span></a></h4><blockquote><p>下载canvas图片 或 下载其他文件</p><p>a标签下载 h5新增 download下载内容</p></blockquote><p><code>a标签设置 download属性 表示可以下载内容 download=&quot;文件名称&quot;</code></p><p>canvas下载 =&gt; base64 格式</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">download</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  a<span class="token punctuation">.</span>href <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  a<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token string">&quot;2.png&quot;</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">// 自动点击了a标签 进行下载</span></span>
<span class="line">  a<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>canvas.toDataURL() 返回一个base64的图片格式</li><li>download 设置下载内容的名称 会自动调整到路径下载</li></ol><p>canvas下载 =&gt; url 格式</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">bol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  canvas<span class="token punctuation">.</span><span class="token function">toBlob</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">Blob</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>Blob<span class="token punctuation">)</span></span>
<span class="line">    a<span class="token punctuation">.</span>href <span class="token operator">=</span> url<span class="token punctuation">;</span></span>
<span class="line">    a<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token string">&quot;2.png&quot;</span></span>
<span class="line">    a<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>canvas.toBlob(callback);</li></ol><p>​</p>`,120)])])}const o=s(e,[["render",l]]),u=JSON.parse('{"path":"/supplementary/h505-canvas.html","title":"canvas 绘制","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"1. hello world","slug":"_1-hello-world","link":"#_1-hello-world","children":[]},{"level":2,"title":"2. 基本API","slug":"_2-基本api","link":"#_2-基本api","children":[]},{"level":2,"title":"3. 绘制基础","slug":"_3-绘制基础","link":"#_3-绘制基础","children":[{"level":3,"title":"3.1 绘制线段","slug":"_3-1-绘制线段","link":"#_3-1-绘制线段","children":[]},{"level":3,"title":"3.2 设置绘制颜色","slug":"_3-2-设置绘制颜色","link":"#_3-2-设置绘制颜色","children":[]},{"level":3,"title":"3.3 beginPath与closePath","slug":"_3-3-beginpath与closepath","link":"#_3-3-beginpath与closepath","children":[]},{"level":3,"title":"3.4 绘制矩形线段","slug":"_3-4-绘制矩形线段","link":"#_3-4-绘制矩形线段","children":[]},{"level":3,"title":"3.5 擦除区域","slug":"_3-5-擦除区域","link":"#_3-5-擦除区域","children":[]},{"level":3,"title":"3.6 绘制圆形(或圆的一部分)","slug":"_3-6-绘制圆形-或圆的一部分","link":"#_3-6-绘制圆形-或圆的一部分","children":[]},{"level":3,"title":"3.7 绘制弧线","slug":"_3-7-绘制弧线","link":"#_3-7-绘制弧线","children":[]},{"level":3,"title":"3.8 贝塞尔曲线","slug":"_3-8-贝塞尔曲线","link":"#_3-8-贝塞尔曲线","children":[]}]},{"level":2,"title":"4.各种样式","slug":"_4-各种样式","link":"#_4-各种样式","children":[{"level":3,"title":"4.1 线条样式","slug":"_4-1-线条样式","link":"#_4-1-线条样式","children":[]},{"level":3,"title":"4.2 阴影样式","slug":"_4-2-阴影样式","link":"#_4-2-阴影样式","children":[]},{"level":3,"title":"4.3 渐变色","slug":"_4-3-渐变色","link":"#_4-3-渐变色","children":[]},{"level":3,"title":"4.4 转换","slug":"_4-4-转换","link":"#_4-4-转换","children":[]}]},{"level":2,"title":"5.绘制文字","slug":"_5-绘制文字","link":"#_5-绘制文字","children":[{"level":3,"title":"5.1 绘制方式","slug":"_5-1-绘制方式","link":"#_5-1-绘制方式","children":[]},{"level":3,"title":"5.2 文字样式","slug":"_5-2-文字样式","link":"#_5-2-文字样式","children":[]}]},{"level":2,"title":"6.绘制图片","slug":"_6-绘制图片","link":"#_6-绘制图片","children":[{"level":3,"title":"绘制视频","slug":"绘制视频","link":"#绘制视频","children":[]}]},{"level":2,"title":"7.像素操作","slug":"_7-像素操作","link":"#_7-像素操作","children":[{"level":3,"title":"7.1 获取区域像素数据","slug":"_7-1-获取区域像素数据","link":"#_7-1-获取区域像素数据","children":[]},{"level":3,"title":"7.2 创建空白的imageData对象","slug":"_7-2-创建空白的imagedata对象","link":"#_7-2-创建空白的imagedata对象","children":[]},{"level":3,"title":"7.3 将图像数据绘制到画布","slug":"_7-3-将图像数据绘制到画布","link":"#_7-3-将图像数据绘制到画布","children":[]}]},{"level":2,"title":"8.合成","slug":"_8-合成","link":"#_8-合成","children":[{"level":3,"title":"8.1 透明度","slug":"_8-1-透明度","link":"#_8-1-透明度","children":[]},{"level":3,"title":"8.2 绘制内容重叠时合成方式","slug":"_8-2-绘制内容重叠时合成方式","link":"#_8-2-绘制内容重叠时合成方式","children":[]}]},{"level":2,"title":"9.补充","slug":"_9-补充","link":"#_9-补充","children":[{"level":3,"title":"9.1 clip","slug":"_9-1-clip","link":"#_9-1-clip","children":[]}]}],"git":{},"filePathRelative":"supplementary/h505-canvas.md"}');export{o as comp,u as data};
