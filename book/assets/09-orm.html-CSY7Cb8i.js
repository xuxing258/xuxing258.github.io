import{_ as s,c as a,a as e,o as p}from"./app-B89-99AF.js";const l={};function t(o,n){return p(),a("div",null,[...n[0]||(n[0]=[e(`<h1 id="orm" tabindex="-1"><a class="header-anchor" href="#orm"><span>orm</span></a></h1><h2 id="表和表之间的关系" tabindex="-1"><a class="header-anchor" href="#表和表之间的关系"><span>表和表之间的关系</span></a></h2><ul><li><p>一对一</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">人和身份证</span>
<span class="line">一个人只有一个身份证号<span class="token punctuation">,</span> 一个身份证号对应一个人</span>
<span class="line"><span class="token comment"># 一对一关系字段</span></span>
<span class="line">外键字段 <span class="token operator">=</span> models<span class="token punctuation">.</span>OneToOneFiled<span class="token punctuation">(</span>to<span class="token operator">=</span><span class="token string">&#39;关联的表&#39;</span><span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># on_delete参数:表示删除数据时表之间数据的反应</span></span>
<span class="line">	<span class="token comment"># 取值models.CASCADE表示:当删除主表数据时,会将关联的外键字段对应的数据全部删除,当删除外键字段对应的数据时,不会影响主表</span></span>
<span class="line"><span class="token comment"># 外键字段创建在哪张表中谁就是外表,关联的表就是主表</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 学生表(外表)</span></span>
<span class="line">    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;名字&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    age <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;年龄&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    sex <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;性别&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># 学生和学生详情之间一对一的关系</span></span>
<span class="line">    student_detail <span class="token operator">=</span> models<span class="token punctuation">.</span>OneToOneField<span class="token punctuation">(</span>to<span class="token operator">=</span><span class="token string">&#39;StudentDetail&#39;</span><span class="token punctuation">,</span> </span>
<span class="line">                                          on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">StudentDetail</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 学生详情表(主表)</span></span>
<span class="line">    user_id <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;身份证号&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    addr <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;家庭住址&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line"><span class="token comment"># 删除学生表信息时,不会影响学生详情表信息</span></span>
<span class="line"><span class="token comment"># 删除学生详情表信息时,会将关联的学生表信息删除</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>一对多</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">班级和学生</span>
<span class="line">一个班级有多个学生<span class="token punctuation">,</span> 一个学生属于一个班级</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 一对多关系字段</span></span>
<span class="line">外键字段 <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>to<span class="token operator">=</span><span class="token string">&#39;关联的表&#39;</span><span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># 一对多关系创建时,需要将外键字段防在多的一方的表中</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 学生表(外表)</span></span>
<span class="line">    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;名字&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    age <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;年龄&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    sex <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;性别&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># 学生和学生详情之间一对一的关系</span></span>
<span class="line">    student_detail <span class="token operator">=</span> models<span class="token punctuation">.</span>OneToOneField<span class="token punctuation">(</span>to<span class="token operator">=</span><span class="token string">&#39;StudentDetail&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                                          on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment"># 学生和班级之间一对多的关系</span></span>
<span class="line">    cls <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>to<span class="token operator">=</span><span class="token string">&#39;Class&#39;</span><span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    </span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Class</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 班级表(主表)</span></span>
<span class="line">    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;班级名字&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line"><span class="token comment"># 删除学生信息时,不会影响班级表</span></span>
<span class="line"><span class="token comment"># 删除班级信息时,会将当前班级的所有学生信息删除</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>多对多</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">学生和课程</span>
<span class="line">一个学生可以学习多门课程<span class="token punctuation">,</span> 一门课程可以被多个学生学习</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 多对多关系字段创建</span></span>
<span class="line">虚拟字段 <span class="token operator">=</span> models<span class="token punctuation">.</span>ManyToManyField<span class="token punctuation">(</span>to<span class="token operator">=</span><span class="token string">&#39;关联的表&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 学生表(外表)</span></span>
<span class="line">    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;名字&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    age <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;年龄&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    sex <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;性别&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># 学生和学生详情之间一对一的关系</span></span>
<span class="line">    student_detail <span class="token operator">=</span> models<span class="token punctuation">.</span>OneToOneField<span class="token punctuation">(</span>to<span class="token operator">=</span><span class="token string">&#39;StudentDetail&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                                          on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># 学生和班级之间一对多的关系</span></span>
<span class="line">    cls <span class="token operator">=</span> models<span class="token punctuation">.</span>ForeignKey<span class="token punctuation">(</span>to<span class="token operator">=</span><span class="token string">&#39;Class&#39;</span><span class="token punctuation">,</span> on_delete<span class="token operator">=</span>models<span class="token punctuation">.</span>CASCADE<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment"># 学生和课程之间多对多的关系</span></span>
<span class="line">    courses <span class="token operator">=</span> models<span class="token punctuation">.</span>ManyToManyField<span class="token punctuation">(</span>to<span class="token operator">=</span><span class="token string">&#39;Course&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Course</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;课程名字&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    price <span class="token operator">=</span> models<span class="token punctuation">.</span>FloatField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&#39;课程价格&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># 注意:给多表添加数据时,必须将主表数据添加,才能添加关联的外键数据</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="orm基本操作" tabindex="-1"><a class="header-anchor" href="#orm基本操作"><span>orm基本操作</span></a></h2><ul><li><p>数据库表名:模型类没有指定表名,django默认以<strong>小写应用名_小写类名</strong>作为数据库表的名</p></li><li><p>主键:django在创建表时会自动创建一个叫id的自动增长的主键列.如果自己手动创建了一个自动增长的主键列,那么django将不会创建主键列.</p><p>可以用<strong>pk</strong>表示主键(不管主键列叫什么名字,都可以用pk查询)</p></li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># 手动创建</span></span>
<span class="line"><span class="token builtin">id</span> <span class="token operator">=</span> models<span class="token punctuation">.</span>AutoFiled<span class="token punctuation">(</span>primary_key<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># 不写这样的列,django会默认创建</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>字段类型</p><ul><li>AutoField:自动增长的整型列.(如果删除了某个数据,只会继续往后增加)</li><li>BooleanField:布尔类型,只支持存True和False</li><li>NullBooleanField:支持True,False和Null</li><li>CharField:字符串类型,必须指定参数max_length表示最大字符数</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>TextField:大文本字段,一般用来存几千个字符</li><li>IntegerField:整型字段.(不能存手机号)</li><li>BigIntegerField:能存更大范围的整型,一般用来存手机号</li><li>FloatField:浮点数</li><li>DecimalField:浮点型,必须指定两个参数:max_digits表示总位数;decimal_places表示小数位</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">price <span class="token operator">=</span> models<span class="token punctuation">.</span>DecimalField<span class="token punctuation">(</span>max_digits<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> decimal_places<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>DateField:日期类型,年月日</li><li>TimeField:时分秒</li><li>DateTimeField:年月日,时分秒</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">三种日期时间类型字段都有两个参数<span class="token punctuation">(</span>不是必须的<span class="token punctuation">)</span><span class="token punctuation">:</span>两个参数是互斥的<span class="token punctuation">(</span>要使用就只能用其中一个<span class="token punctuation">)</span></span>
<span class="line">    auto_now<span class="token punctuation">:</span>默认值为<span class="token boolean">False</span><span class="token punctuation">.</span>设置为<span class="token boolean">True</span>时表示每次保存数据时<span class="token punctuation">,</span>自动设置当前时间</span>
<span class="line">    auto_now_add<span class="token punctuation">:</span>设置为<span class="token boolean">True</span>时表示创建数据时保存当前时间<span class="token punctuation">,</span>后续不手动更改时间都不会变化</span>
<span class="line">        </span>
<span class="line">birthday <span class="token operator">=</span> models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span>auto_now_add<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>FileField:上传文件字段,参数upload_to表示上传地址</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">photo <span class="token operator">=</span> models<span class="token punctuation">.</span>FileField<span class="token punctuation">(</span>upload_to<span class="token operator">=</span><span class="token string">&#39;media/&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>ImageField:图片类型.对上传的文件进行校验判断是否是图片</li><li>EmailField:邮箱.对于数据库只是varchar(254).对于django可以用于校验是否符合邮箱格式</li></ul></li><li><p>字段的参数(所有字段都能用的)</p><ul><li>null:用于表示字段可以为空</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">birthday <span class="token operator">=</span> models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span>verbose_name<span class="token operator">=</span><span class="token string">&#39;出生日期&#39;</span><span class="token punctuation">,</span> auto_now_add<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>unique:用于表示字段唯一</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">user_id <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;身份证号&#39;</span><span class="token punctuation">,</span> unique<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>default:用于给字段设置默认值</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">sex <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;性别&#39;</span><span class="token punctuation">,</span> default<span class="token operator">=</span><span class="token string">&#39;女&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>primary_key:设置主键,django会自动创建</li><li>db_index:为字段创建索引,提高字段查询速度</li><li>db_column:为字段设置名字.没有指定则使用类中的属性名作为字段名</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">sex <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> verbose_name<span class="token operator">=</span><span class="token string">&#39;性别&#39;</span><span class="token punctuation">,</span> db_column<span class="token operator">=</span><span class="token string">&#39;gender&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>class Meta</p></li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">在django模型类中<span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span> 可以用来给模型进行元数据配置<span class="token punctuation">,</span>比如数据库表名<span class="token punctuation">,</span>排序方式等等</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">:</span></span>
<span class="line">    字段<span class="token number">1</span> <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">    字段<span class="token number">2</span> <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span></span>
<span class="line">        db_table <span class="token operator">=</span> <span class="token string">&#39;student&#39;</span>  <span class="token comment"># 数据库表名</span></span>
<span class="line">        ordering <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;age&#39;</span><span class="token punctuation">]</span>  <span class="token comment"># 按照年龄升序进行排序</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="测试" tabindex="-1"><a class="header-anchor" href="#测试"><span>测试</span></a></h2><p>如果想要测试django项目中的某个py文件的数据是否能够正常运行,可以通过tests.py配置后进行测试</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># tests.py环境配置</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> os</span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span></span>
<span class="line">    os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>setdefault<span class="token punctuation">(</span><span class="token string">&#39;DJANGO_SETTINGS_MODULE&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;day9.settings&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">import</span> django</span>
<span class="line">    django<span class="token punctuation">.</span>setup<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment"># 在代码体中测试其他文件的使用</span></span>
<span class="line">    <span class="token comment"># 包括模块的带入也需要写在这个代码体之后</span></span>
<span class="line">    <span class="token keyword">from</span> app01 <span class="token keyword">import</span> models</span>
<span class="line">    res <span class="token operator">=</span> models<span class="token punctuation">.</span>Student<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,12)])])}const c=s(l,[["render",t]]),u=JSON.parse('{"path":"/django/09-orm.html","title":"orm","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"表和表之间的关系","slug":"表和表之间的关系","link":"#表和表之间的关系","children":[]},{"level":2,"title":"orm基本操作","slug":"orm基本操作","link":"#orm基本操作","children":[]},{"level":2,"title":"测试","slug":"测试","link":"#测试","children":[]}],"git":{},"filePathRelative":"django/09-orm.md"}');export{c as comp,u as data};
