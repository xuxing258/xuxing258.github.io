import{_ as s,c as a,a as e,o as l}from"./app-BD3X-Yt7.js";const i={};function p(t,n){return l(),a("div",null,[...n[0]||(n[0]=[e(`<h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><p>Mysql下载地址: https://dev.mysql.com/downloads/</p><p>搜索Mysql官网 选择download 选择社区版本 选择Mysql installer for windows</p><p>进入之后可以选项window 或 mac 系统进行安装</p><p>如无法进入对应网址, 通过之前下载的mysql程序 进行下载</p><p>安装时请注意: 电脑用户名不要为中文</p><h3 id="第一步安装" tabindex="-1"><a class="header-anchor" href="#第一步安装"><span>第一步安装</span></a></h3><ol><li>安装完成后选择对应类型 <ul><li>Developer Default(默认安装类型)</li><li>Server only(仅作为服务器) 选择服务器类型 <ul><li>仅安装MySQL服务器。此安装类型安装您在下载MySQL安装程序时选择的一般可用性（GA）或发布和开发阶段中间版本的服务器</li></ul></li><li>Client only(仅作为客户端) <ul><li>仅安装最新的MySQL应用程序</li></ul></li><li>Full(完全安装) <ul><li>安装所有可用的MySQL产品，不包括MySQL连接器</li></ul></li><li>Custom(自定义安装类型)</li></ul></li><li>路径冲突(Path Conflicts) <ul><li>设置安装地址</li></ul></li><li>检查需求(Check Requirements) <ul><li>需要安装对应产品, 以满足要求</li><li>点击 <strong>Execute</strong>让MySQL安装程序尝试下载并安装所有项目所需的软件，而无需手动状态</li><li>同意安装</li></ul></li><li>安装(Installation) <ul><li>点击 <strong>Execute</strong>让MySQL安装程序尝试下载并安装所有项目所需的软件</li></ul></li><li>产品配置(Product Configuration) <ul><li>产品信息展示</li></ul></li><li>安装完成(Installation Complete ) <ul><li>进行安装第二步, mysql配置</li></ul></li></ol><h3 id="第二步配置" tabindex="-1"><a class="header-anchor" href="#第二步配置"><span>第二步配置</span></a></h3><ol><li>Type and Networking: (MySQL的安装类型和MySQL的网络安装) <ul><li>Development Computer：开发计算机，是用于开发和测试软件的计算机</li><li>Server Computer：服务器计算机，是用于提供网络服务、数据存储和处理等任务的计算机。</li><li>Dedicated Computer：专用计算机，是指专门用于特定任务或应用的计算机，例如工业控制系统、嵌入式系统等。</li></ul></li><li>Authentication Method: 身份验证方式 <ul><li>使用强密码加密进行身份验证（推荐） <ul><li>Use Strong Password Encryption for Authentication (RECOMMENDED)</li></ul></li><li>使用旧身份验证方法(保留MySOL 5.x兼容性) <ul><li>Use Legacy Authentication Method (Retain MySOL 5.x Compatibility)</li></ul></li></ul></li><li>Accounts and Roles: 配置MySQL的用户名和密码 <ul><li>用户名默认为root</li><li>手动设置对应密码. 请记住密码</li></ul></li><li>Windows Service: 配置MySQL服务器实例的Windows服务名称 <ul><li>window service Name: 设置服务器名称</li><li>Start the MlySQL Server at System Startup: 勾选电脑启动时启动MlySQL</li></ul></li><li>Apply Configuration : 对MySQL服务器进行的应用配置 <ul><li>点击 <strong>Execute</strong>进行安装</li></ul></li></ol><h3 id="第三步环境" tabindex="-1"><a class="header-anchor" href="#第三步环境"><span>第三步环境</span></a></h3><ol><li>查看mysql是否安装成功, <ul><li>通过任务管理器的服务查看Mysql服务是否启动</li></ul></li><li>在搜索框位置输入mysql 进行搜索, 打开对应mysql程序</li><li>启动之后输入mysql对应密码</li><li>输入<code>show databases;</code> 查看数据库</li><li>配置电脑环境变量: <ul><li>默认地址<code>C:\\Program Files\\MySQL\\MySQL Server 8.0\\bin</code></li><li>配置完成后进行终端链接</li></ul></li><li>终端链接 <ul><li>cmd输入指令: <code>mysql -uroot -p密码</code> 不用空格,密码是明文</li><li>cmd输入指令: <code>mysql -uroot -p</code> 后续在输入对应的密码</li></ul></li></ol><h3 id="第四步创建" tabindex="-1"><a class="header-anchor" href="#第四步创建"><span>第四步创建</span></a></h3><ol><li><code>create database 数据库名称</code> 创建数据库</li><li><code>use 数据库名称</code> 使用对应数据库</li><li><code>create table user(name varchar(20),age int, height double);</code> 创建表规则</li><li><code>insert into user(name, age, height) values (&#39;why&#39;, 18, 1.88);</code> 添加数据</li></ol><h2 id="可视化数据" tabindex="-1"><a class="header-anchor" href="#可视化数据"><span>可视化数据</span></a></h2><p>vscode编辑工具可安装<code>Database Client</code> 插件mysql数据</p><p>PyCharm编辑工具右侧存在<code>Database Client</code> 按键可直接连接mysql数据库</p><h2 id="sql语句" tabindex="-1"><a class="header-anchor" href="#sql语句"><span>SQL语句</span></a></h2><blockquote><p>设置sql语句进行代码查询, SQL语句可以用于对数据库进行操作</p></blockquote><p><strong>SQL语句的常用规范：</strong></p><ul><li>通常关键字使用大写的，比如CREATE、TABLE、SHOW等等；</li><li>一条语句结束后，需要以 ; 结尾；</li><li>如果遇到关键字作为表明或者字段名称，可以使用\`\`包裹;</li></ul><h3 id="ddl语句" tabindex="-1"><a class="header-anchor" href="#ddl语句"><span>DDL语句</span></a></h3><p>Data Definition Language：数据定义语言, 通过DDL语句对<strong>数据库</strong>或者数据表进行：创建、删除、修改等操作；</p><p>数据库语句</p><ul><li>查看所有的数据库: <code>SHOW DATABASES; </code></li><li>使用某一个数据: <code>USE 数据库名称;</code></li><li>查看当前正在使用的数据库: <code>SELECT DATABASE();</code></li><li>创建数据库: <code>create database 数据库名称; </code><ul><li><code>create database if not exists </code>数据库名称</li></ul></li><li>删除数据库: <code>DROP DATABASE 数据库名称; </code><ul><li><code>DROP DATABASE IF EXISTS 数据库名称</code></li></ul></li></ul><p>数据表语句</p><ul><li>查看当前数据库中所有数据表: <code>show tables;</code></li><li>查看当前某个表结构: <code>desc user;</code></li><li>创建数据表: <code>create table if not exists 表名称( 属性名: 数据类型 )</code><ul><li><code> create table if not exists qwe(age INT,agq2 INT)</code></li></ul></li><li>删除数据表: <code>DROP TABLE 表名</code><ul><li><code>DROP TABLE if exists 表名</code></li></ul></li></ul><h3 id="数据类型" tabindex="-1"><a class="header-anchor" href="#数据类型"><span>数据类型</span></a></h3><ul><li>数字类型: <ul><li>整数 <ul><li><code>INT</code>: 占用4个字节，范围从-2,147,483,648到2,147,483,647。</li><li><code>INTEGER</code>：这是<code>INT</code>的同义词，存储整数值。 <ul><li><code>INT</code>和<code>INTEGER</code>是相同的，都占用4个字节，范围从-2,147,483,648到2,147,483,647。</li></ul></li><li><code>SMALLINT</code>：这个类型占用2个字节，范围从-32,768到32,767。</li><li><code>TINYINT</code>：这个类型占用1个字节，范围从-128到127。</li><li><code>MEDIUMINT</code>：这个类型占用3个字节，范围从-8,388,608到8,388,607。</li><li><code>BIGINT</code>：这个类型占用8个字节， <ul><li>范围 从 -9,223,372,048,584,687,968 到 9,223,372,048,584,687,968</li></ul></li></ul></li><li>浮点数 <ul><li><code>FLOAT</code>: 占用 4 个字节的存储空间，能提供大约 7 位有效数字的精度</li><li><code>DOUBLE</code>: 占用 8 个字节的存储空间，能提供大约 15 位有效数字的精度</li><li><code>FLOAT(m,n)</code> <code>DOUBLE(m,n)</code>: <ul><li>M 表示总的数字位数（包括小数点前面和后面的数字），D 表示小数点后面的数字位数</li></ul></li></ul></li><li>精确数字类型 <ul><li><code>DECIMAL</code> <code>NUMERIC</code>: 精准浮点数</li><li><code>DECIMAL(m,n)</code> <code>NUMERIC(m,n)</code><ul><li>具有精确表示数值的特性，通过指定精度（总共能表示的数字位数）和小数位数（小数点后的数字位数），可以精确地存储符合要求的十进制数值，不存在舍入误差</li><li>M 表示总的数字位数（包括小数点前面和后面的数字），D 表示小数点后面的数字位数</li></ul></li></ul></li></ul></li><li>日期 <ul><li><code>YEAR</code>: 占用 1 个字节的存储空间 <ul><li>用于存储年份相关的信息, 以YYYY格式显示值</li><li><strong>取值范围</strong>：它可以存储的年份值范围是从 1901 年到 2155 年</li></ul></li><li><code>DATE </code>: 占用 3 个字节的存储空间 <ul><li>用于存储年、月、日的日期信息, 格式通常为<code>YYYY-MM-DD</code></li></ul></li><li><code>DATETIME</code>: 占用 8 个字节的存储空间 <ul><li>精确存储年、月、日、时、分、秒的完整日期和时间信息, 格式通常为<code>YYYY-MM-DD HH:MM:SS</code></li><li><strong>取值范围</strong>：其能表示的日期范围从<code>1000-01-01 00:00:00</code>到<code>9999-12-31 23:55:59</code></li></ul></li><li><code>TIMESTAMP</code>: 占用 4 个字节的存储空间</li><li>精确存储年、月、日、时、分、秒的完整日期和时间信息，格式通常为<code>YYYY-MM-DD HH:MM:SS</code></li><li><strong>取值范围</strong>：其能表示的日期范围从<code>1970-01-01 00:00:00</code>到<code>2038-01-19 03:14:07</code></li><li><strong>自动更新特性</strong>：这是<code>TIMESTAMP</code>的一个重要特性。在很多数据库系统（如 MySQL）中，当行数据更新时，<code>TIMESTAMP</code>列的值可能会自动更新为当前时间 <ul><li>应用场景: <code> 记录数据更新时间</code> 或 <code>事件发生时间跟踪</code></li></ul></li></ul></li><li>字符串 <ul><li><code>CHAR类型</code>: 在创建表时为固定长度，长度可以是0到255之间的任何值； <ul><li>无论实际存储的字符数据长度是多少，<code>CHAR</code> 列都会占用指定的固定长度的存储空间</li><li>即使只存储了一个字符，它在磁盘等存储介质上也会占用设置的个字符的存储空间。</li></ul></li><li><code>VARCHAR类型</code>: 是可变长度的字符串，长度可以指定为0到65535之间的值； <ul><li><code>VARCHAR</code> 只会占用实际存储数据长度所需的存储空间</li></ul></li><li><code>BLOB</code>: 存储大的二进制类型； <ul><li>音频和视频文件</li></ul></li><li><code>TEXT</code>: 存储大的字符串类型； <ul><li>适合存储诸如长篇文章、详细的产品描述、用户评论等较长的文本信息 , 字符超过65535</li></ul></li></ul></li></ul><h3 id="表约束" tabindex="-1"><a class="header-anchor" href="#表约束"><span>表约束</span></a></h3><ul><li><p><strong>主键：PRIMARY KEY</strong></p><ul><li>一张表中，我们为了区分每一条记录的唯一性，必须<strong>有一个字段是永远不会重复</strong>，并且<strong>不会为</strong>空的，这个字段我们通常会将它设置为<strong>主键</strong>：</li><li>主键是表中唯一的索引；</li><li>并且必须是NOT NULL的，如果没有设置 NOT NULL，那么MySQL也会隐式的设置为NOT NULL；</li><li>主键也可以是多列索引，PRIMARY KEY(key_part, ...)，我们一般称之为<strong>联合主键</strong></li><li>建议：开发中主键字段应该是和业务无关的，尽量不要使用业务字段来作为主键；</li></ul></li><li><p><strong>唯一：UNIQUE</strong></p><ul><li>某些字段在开发中我们希望是唯一的，不会重复的，比如手机号码、身份证号码等，这个字段我们可以使用UNIQUE来约束：</li><li>使用UNIQUE约束的字段在表中必须是不同的；</li><li>UNIQUE 索引允许NULL包含的列具有多个值NULL；</li></ul></li><li><p><strong>不能为空：NOT NULL</strong></p><ul><li>某些字段我们要求用户必须插入值，不可以为空，这个时候我们可以使用 NOT NULL 来约束</li></ul></li><li><p><strong>默认值：DEFAULT</strong></p><ul><li>某些字段我们希望在没有设置值时给予一个默认值，这个时候我们可以使用 DEFAULT来完成；</li></ul></li><li><p><strong>自动递增：AUTO_INCREMENT</strong></p><ul><li>某些字段我们希望不设置值时可以进行递增，比如用户的id，这个时候可以使用AUTO_INCREMENT来完成；</li></ul></li></ul><h3 id="表约束使用" tabindex="-1"><a class="header-anchor" href="#表约束使用"><span>表约束使用</span></a></h3><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line"># 创建表</span>
<span class="line">CREATE TABLE IF NOT EXISTS \`base\`(</span>
<span class="line">    id INT PRIMARY KEY AUTO_INCREMENT, # id值自动增加</span>
<span class="line">    name VARCHAR(20) NOT NULL, # 20 不能不为</span>
<span class="line">    age INT DEFAULT 0,  # 默认为空</span>
<span class="line">    telPhone VARCHAR(20) DEFAULT &#39;&#39; UNIQUE NOT NULL # 默认为空字符串 不能为空</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="修改表" tabindex="-1"><a class="header-anchor" href="#修改表"><span>修改表</span></a></h4><p>注意: 请使用反引号</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line"># 1.修改表名</span>
<span class="line">ALTER TABLE \`moments\` RENAME TO \`moment\`;</span>
<span class="line"># 2.添加一个新的列</span>
<span class="line">ALTER TABLE \`moment\` ADD \`publishTime\` DATETIME;</span>
<span class="line">ALTER TABLE \`moment\` ADD \`updateTime\` DATETIME;</span>
<span class="line"># 3.删除一列数据</span>
<span class="line">ALTER TABLE \`moment\` DROP \`updateTime\`;</span>
<span class="line"># 4.修改列的名称</span>
<span class="line">ALTER TABLE \`moment\` CHANGE \`publishTime\` \`publishDate\` DATE;</span>
<span class="line"># 5.修改列的数据类型</span>
<span class="line">ALTER TABLE \`moment\` MODIFY \`id\` INT;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="dml数据表操作" tabindex="-1"><a class="header-anchor" href="#dml数据表操作"><span>DML数据表操作</span></a></h2><p>DML（Data Manipulation Language）: 可以通过DML语句对<strong>数据表</strong>进行：添加、删除、修改等操作；</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line">CREATE TABLE IF NOT EXISTS \`products\`(</span>
<span class="line">    \`id\` INT PRIMARY KEY AUTO_INCREMENT,</span>
<span class="line">    \`title\` VARCHAR(20),</span>
<span class="line">    \`description\` VARCHAR(200),</span>
<span class="line">    \`price\` DOUBLE,</span>
<span class="line">    \`publishTime\` DATETIME</span>
<span class="line">);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="插入数据" tabindex="-1"><a class="header-anchor" href="#插入数据"><span>插入数据</span></a></h3><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line">INSERT INTO \`products\` (\`title\`, \`description\`, \`price\`, \`publishTime\`) </span>
<span class="line">VALUES (&#39;iPhone&#39;, &#39;iPhone12只要998&#39;, 998.88, &#39;2020-10-10&#39;);   </span>
<span class="line">INSERT INTO \`products\` (\`title\`, \`description\`, \`price\`, \`publishTime\`) </span>
<span class="line">VALUES (&#39;huawei&#39;, &#39;iPhoneP40只要888&#39;, 888.88, &#39;2020-11-11&#39;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除数据" tabindex="-1"><a class="header-anchor" href="#删除数据"><span>删除数据</span></a></h3><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line"># 会删除表中所有的数据</span>
<span class="line">DELETE FROM \`products\`;      delete from \`表名\`</span>
<span class="line"># 会删除符合条件的数据</span>
<span class="line">DELETE FROM \`products\` WHERE \`title\` = &#39;iPhone&#39;;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改数据" tabindex="-1"><a class="header-anchor" href="#修改数据"><span>修改数据</span></a></h3><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line"># 会修改表中所有的数据</span>
<span class="line">UPDATE \`products\` SET \`title\` = &#39;iPhone12&#39;;  # 单个</span>
<span class="line">UPDATE \`products\` SET \`title\` = &#39;iPhone12&#39;, \`price\` = 1299.88;  #多个</span>
<span class="line"># 会修改符合条件的数据 =&gt;  修改title与price数据: where进行查询</span>
<span class="line">UPDATE \`products\` SET \`title\` = &#39;iPhone12&#39;, \`price\` = 1299.88 WHERE \`title\` = &#39;iPhone&#39;;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果我们希望修改完数据后，直接可以显示最新的更新时间：</p><p><code>CURRENT_TIMESTAMP</code> : 当前时间戳</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line">ALTER TABLE \`products\` ADD \`updateTime\` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP; </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="dql语句数据查询" tabindex="-1"><a class="header-anchor" href="#dql语句数据查询"><span>DQL语句数据查询</span></a></h2><p>DQL（Data Query Language）：通过DQL从<strong>数据库</strong>中查询数据</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line"># 查询的格式: </span>
<span class="line">SELECT select_expr [, select_expr]...</span>
<span class="line">    [FROM table_references]</span>
<span class="line">    [WHERE where_condition]</span>
<span class="line">    [ORDER BY expr [ASC | DESC]]</span>
<span class="line">    [LIMIT {[offset,] row_count | row_count OFFSET offset}]</span>
<span class="line">    [GROUP BY expr]</span>
<span class="line">    [HAVING where_condition]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line">SELECT 查询字段 from &quot;表关联&quot; </span>
<span class="line"></span>
<span class="line">select id,title from &quot;表关联&quot;  where 查询条件  limit 返回数据筛选</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line"># 查询所有字段</span>
<span class="line">select * from &quot;表名&quot;</span>
<span class="line"></span>
<span class="line"># 查询制定对应字段 (比如:查询id 只会显示id)</span>
<span class="line">select id,brand,title,price from &quot;表名&quot;</span>
<span class="line"></span>
<span class="line"># 查询数据更改别名  通过as更改别名</span>
<span class="line">SELECT title as t, brand as b, price as p FROM \`products\`;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="where查询" tabindex="-1"><a class="header-anchor" href="#where查询"><span>where查询</span></a></h3><blockquote><p>根据条件返回数据</p></blockquote><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line"># &lt; &gt;  = != &gt;= &lt;=</span>
<span class="line">SELECT * FROM \`products\` WHERE price &lt; 1000;</span>
<span class="line"># 查询价格大于等于2000的手机</span>
<span class="line">SELECT * FROM \`products\` WHERE price &gt;= 2000;</span>
<span class="line"># 价格等于3399的手机</span>
<span class="line">SELECT * FROM \`products\` WHERE price = 3399;</span>
<span class="line"># 价格不等于3399的手机</span>
<span class="line">SELECT * FROM \`products\` WHERE price != 3399;</span>
<span class="line"># 查询华为品牌的手机</span>
<span class="line">SELECT * FROM \`products\` WHERE \`brand\` = &#39;华为&#39;;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>逻辑运算符</p></blockquote><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line"># 查询品牌是华为，并且小于2000元的手机    and &amp;&amp;</span>
<span class="line">SELECT * FROM \`products\` WHERE \`brand\` = &#39;华为&#39; and \`price\` &lt; 2000;</span>
<span class="line">SELECT * FROM \`products\` WHERE \`brand\` = &#39;华为&#39; &amp;&amp; \`price\` &lt; 2000;</span>
<span class="line"></span>
<span class="line"># 查询1000到2000的手机（不包含1000和2000）</span>
<span class="line">SELECT * FROM \`products\` WHERE price &gt; 1000 and price &lt; 2000;</span>
<span class="line"></span>
<span class="line"># OR: 符合一个条件即可    or || </span>
<span class="line"># 查询所有的华为手机或者价格小于1000的手机</span>
<span class="line">SELECT * FROM \`products\` WHERE brand = &#39;华为&#39; or price &lt; 1000;</span>
<span class="line"></span>
<span class="line"># 查询1000到2000的手机（包含1000和2000）  查询范围</span>
<span class="line">SELECT * FROM \`products\` WHERE price BETWEEN 1000 and 2000;</span>
<span class="line"></span>
<span class="line"># 查看华为和小米的字段</span>
<span class="line">SELECT * FROM \`products\` WHERE brand in (&#39;华为&#39;, &#39;小米&#39;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="模糊查询like" tabindex="-1"><a class="header-anchor" href="#模糊查询like"><span>模糊查询LIKE</span></a></h3><ul><li><p>%表示匹配任意个的任意字符；</p></li><li><p>_表示匹配一个的任意字符；</p><ul><li>_ 匹配存在一个字符</li><li>__ 匹配存在两个字符 <ul><li>以此类推</li></ul></li></ul></li></ul><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line"># 查询所有以v开头的title</span>
<span class="line">SELECT * FROM \`products\` WHERE title LIKE &#39;v%&#39;;</span>
<span class="line"></span>
<span class="line"># 查询带M的title</span>
<span class="line">SELECT * FROM \`products\` WHERE title LIKE &#39;%M%&#39;;</span>
<span class="line"></span>
<span class="line"># 查询带M的title必须是第三个字符</span>
<span class="line">SELECT * FROM \`products\` WHERE title LIKE &#39;__M%&#39;;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="结果排序" tabindex="-1"><a class="header-anchor" href="#结果排序"><span>结果排序</span></a></h3><p>当我们查询到结果的时候，我们希望讲结果按照某种方式进行排序，这个时候使用的是ORDER BY；</p><ul><li>ORDER BY有两个常用的值 <ul><li>ASC：升序排列；</li><li>DESC：降序排列</li></ul></li></ul><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line">SELECT * FROM \`products\` WHERE brand = &#39;华为&#39; or price &lt; 1000 ORDER BY price ASC;</span>
<span class="line"></span>
<span class="line"># 升序</span>
<span class="line">select * from qwe order by price asc</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="分页查询" tabindex="-1"><a class="header-anchor" href="#分页查询"><span>分页查询</span></a></h3><p>在真实开发中，我们都会要求用户传入offset、limit或者page等字段；</p><p>它们的目的是让我们可以在数据库中进行分页查询；</p><p>它的用法有[LIMIT {[offset,] row_count | row_count OFFSET offset}]</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line"># OFFSET 偏移(跳过多少数据)  LIMIT返回数量</span>
<span class="line">SELECT * FROM \`products\` LIMIT 30 OFFSET 0;</span>
<span class="line">SELECT * FROM \`products\` LIMIT 30 OFFSET 30;</span>
<span class="line">SELECT * FROM \`products\` LIMIT 30 OFFSET 60;</span>
<span class="line"># 另外一种写法：offset, row_count</span>
<span class="line">SELECT * FROM \`products\` LIMIT 90, 30;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="创建表关联-外键" tabindex="-1"><a class="header-anchor" href="#创建表关联-外键"><span>创建表关联(外键)</span></a></h2><ul><li>将两张表联系起来，我们可以将products中的brand_id关联到brand中的id</li><li>如果是创建表添加外键约束，我们需要在创建表的()最后添加如下语句；</li></ul><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line">FOREIGN KEY (brand_id) REFERENCES brand(id)</span>
<span class="line"></span>
<span class="line">-- 创建 users 表</span>
<span class="line">CREATE TABLE users (</span>
<span class="line">    id INT PRIMARY KEY AUTO_INCREMENT,</span>
<span class="line">    username VARCHAR(50) NOT NULL</span>
<span class="line">);</span>
<span class="line"></span>
<span class="line">-- 创建 products 表</span>
<span class="line">CREATE TABLE products (</span>
<span class="line">    id INT PRIMARY KEY AUTO_INCREMENT</span>
<span class="line">    name VARCHAR(50) NOT NULL,</span>
<span class="line">    user_id INT,</span>
<span class="line">    FOREIGN KEY (user_id) REFERENCES users(id)</span>
<span class="line"></span>
<span class="line">);</span>
<span class="line"></span>
<span class="line">insert into products(name,user_id) values (&quot;哈哈&quot;,2);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>foreign key (user_id) references users(id) 外键</p><ul><li>如果是表已经创建好，额外添加外键：</li></ul><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line">ALTER  TABLE \`products\` ADD \`brand_id\` INT;</span>
<span class="line">ALTER TABLE \`products\` ADD FOREIGN KEY (brand_id) REFERENCES brand(id);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>现在我们可以将products中的brand_id关联到brand中的id的值</li></ul><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line">UPDATE \`products\` SET \`brand_id\` = 1 WHERE \`brand\` = &#39;华为&#39;; </span>
<span class="line"></span>
<span class="line">UPDATE \`products\` SET \`brand_id\` = 4 WHERE \`brand\` = &#39;OPPO&#39;; </span>
<span class="line"></span>
<span class="line">UPDATE \`products\` SET \`brand_id\` = 3 WHERE \`brand\` = &#39;苹果&#39;; </span>
<span class="line"></span>
<span class="line">UPDATE \`products\` SET \`brand_id\` = 2 WHERE \`brand\` = &#39;小米&#39;;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="多表查询" tabindex="-1"><a class="header-anchor" href="#多表查询"><span>多表查询</span></a></h3><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line"># 查询多个数据</span>
<span class="line">SELECT * FROM \`products\`, \`brand\`;</span>
<span class="line"></span>
<span class="line"># 查询id相关联的数据 </span>
<span class="line">SELECT * FROM \`products\`, \`brand\` WHERE \`products\`.brand_id = \`brand\`.id;</span>
<span class="line"></span>
<span class="line">select * from users,products where products.user_id = brand.id;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="多表连接" tabindex="-1"><a class="header-anchor" href="#多表连接"><span>多表连接</span></a></h3><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line"># 链表查询  on 是链接多表的意思</span>
<span class="line">select * from shop right join user on shop.user_id = user.id  where</span>
<span class="line">select * from shop left join user on shop.user_id = user.id   </span>
<span class="line"># 左连接常用于需要获取左表中的全部数据，并与右表中的相关数据进行匹配的情况</span>
<span class="line"></span>
<span class="line"># 全连接</span>
<span class="line">select * from shop left join user  on shop.user_id = user.id union select * from shop right join user  on shop.user_id = user.id</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mysql2" tabindex="-1"><a class="header-anchor" href="#mysql2"><span>mysql2</span></a></h2><blockquote><p>基本上都是通过query或 execute完成</p></blockquote><h3 id="创建数据库与数据表" tabindex="-1"><a class="header-anchor" href="#创建数据库与数据表"><span>创建数据库与数据表</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mysql2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 创建数据库连接</span></span>
<span class="line"><span class="token keyword">const</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;123123&#39;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 连接到数据库服务器</span></span>
<span class="line">connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">&#39;CREATE DATABASE IF NOT EXISTS your_database&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 使用特定数据库</span></span>
<span class="line">        connection<span class="token punctuation">.</span><span class="token function">changeUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">&#39;your_database&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>创建数据表</p></blockquote><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mysql2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 创建数据库连接</span></span>
<span class="line"><span class="token keyword">const</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 主机地址</span></span>
<span class="line">  <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 用户名</span></span>
<span class="line">  <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 密码</span></span>
<span class="line">  <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">3306</span><span class="token punctuation">,</span> <span class="token comment">// 端口号，默认为 3306</span></span>
<span class="line">  <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">&quot;mydatabase&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 数据库名称</span></span>
<span class="line">  <span class="token literal-property property">charset</span><span class="token operator">:</span> <span class="token string">&quot;UTF8_GENERAL_CI&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 连接字符集，默认为 UTF8_GENERAL_CI</span></span>
<span class="line">  <span class="token literal-property property">connectTimeout</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token comment">// 连接超时时间，单位为毫秒</span></span>
<span class="line">  <span class="token literal-property property">multipleStatements</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 是否允许一个 query 中有多个 MySQL 语句，默认为 false</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 创建数据表</span></span>
<span class="line"><span class="token keyword">const</span> createTableQuery <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string"></span>
<span class="line">    CREATE TABLE IF NOT EXISTS users (</span>
<span class="line">    id INT AUTO_INCREMENT PRIMARY KEY,</span>
<span class="line">    name VARCHAR(255) NOT NULL,</span>
<span class="line">    email VARCHAR(255) NOT NULL</span>
<span class="line">)</span>
<span class="line"></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>createTableQuery<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Table created or already exists!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 在数据库连接关闭时触发</span></span>
<span class="line">connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Database connection closed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 在发生错误时触发</span></span>
<span class="line">connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Database error:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 创建新数据库并且创建数据标签</span></span>
<span class="line">connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token string">&#39;create database if not exists your&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 使用对应数据库</span></span>
<span class="line">            connection<span class="token punctuation">.</span><span class="token function">changeUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">your</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;连接数据库成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                database<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">                    connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">                    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> connection</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="增删改查数据" tabindex="-1"><a class="header-anchor" href="#增删改查数据"><span>增删改查数据</span></a></h3><blockquote><p>connection.query(sql[,params],callback)</p></blockquote><ul><li>sql语句使用字符串写法</li><li><code>sql</code>：要执行的 SQL 查询语句，可以是 SELECT、INSERT、UPDATE、DELETE 等。</li><li><code>params</code>（可选）：一个数组，包含要传递给 SQL 查询的参数。这些参数可以用于预处理语句中的占位符</li><li>callback: 会将查询结果作为回调函数的第二个参数返回</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">let</span> sql <span class="token operator">=</span> <span class="token string">&#39;select * from qqq&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> sql <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">select * from qqq WHERE brand = &#39;小米&#39;</span><span class="token template-punctuation string">\`</span></span></span>
<span class="line">connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result<span class="token punctuation">,</span>fields</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// params参数通过?站位符进行填充</span></span>
<span class="line"><span class="token keyword">const</span> sql <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM users WHERE age &gt; ?&quot;</span><span class="token punctuation">;</span></span>
<span class="line">connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>result<span class="token punctuation">,</span>fields</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span> </span>
<span class="line"><span class="token comment">// SELECT 查询，查找年龄大于 18 的用户</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 使用占位符</span></span>
<span class="line"><span class="token comment">// 示例:  let sql = \`select * from qqq WHERE price &gt; ? and brand = ?\`;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> sql <span class="token operator">=</span> <span class="token string">&#39;SELECT * FROM \`table\` WHERE \`name\` = ? AND \`age\` &gt; ?&#39;</span><span class="token punctuation">;</span></span>
<span class="line">connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span></span>
<span class="line">  sql<span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">[</span><span class="token string">&#39;Page&#39;</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>connection.execute(sql[,params],callback)</p></blockquote><ul><li>会将查询结果作为回调函数的第二个参数返回</li><li>或返回一个 Promise 对象，可以使用 <code>async/await</code> 或 <code>.then()</code> 进行处理</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">let</span> sql <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">select * from qqq WHERE price &gt; ? and brand = ?</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line">connection<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span></span>
<span class="line">    sql<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">[</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token string">&quot;小米&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> results<span class="token punctuation">,</span> fields</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果集</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fields<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 额外的元数据（如果有的话）</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>通过execute 或 query 进行增删改查</p></blockquote><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line"># 插入数据</span>
<span class="line">let sql = \`INSERT INTO qqq (brand, title, price, votecnt) VALUES (&#39;iPhone&#39;, &#39;iPhone12只要998&#39;, 998.88, &#39;2.4&#39;)\`;</span>
<span class="line"></span>
<span class="line">connection.query( sql,[1000,&quot;小米&quot;],(err,result,fields)=&gt;{</span>
<span class="line">    console.log(err,result,fields);</span>
<span class="line">})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line"># 删除对应项</span>
<span class="line">let sql = \`DELETE FROM qqq WHERE brand = &#39;iPhone&#39;;\`</span>
<span class="line">connection.query( sql,(err,result,fields)=&gt;{</span>
<span class="line">    console.log(err,result,fields);</span>
<span class="line">})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line"># 更新数据</span>
<span class="line">let sql = \`UPDATE qqq SET brand = &#39;iPhone123&#39;, price = 1299.88 WHERE brand = &#39;小米&#39;;\`</span>
<span class="line"></span>
<span class="line">connection.query( sql,(err,result,fields)=&gt;{</span>
<span class="line">    console.log(err,result,fields);</span>
<span class="line">})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>async/await</p><div class="language-mysql line-numbers-mode" data-highlighter="prismjs" data-ext="mysql"><pre><code><span class="line">const [rows, fields] = await connection.execute(&#39;SELECT * FROM users&#39;);</span>
<span class="line">console.log(rows);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="链接池" tabindex="-1"><a class="header-anchor" href="#链接池"><span>链接池</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mysql2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 创建连接池，设置连接池的参数</span></span>
<span class="line"><span class="token keyword">const</span> pool <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createPool</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">waitForConnections</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">connectionLimit</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">maxIdle</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 最大空闲连接数，默认等于 \`connectionLimit\`</span></span>
<span class="line">  <span class="token literal-property property">idleTimeout</span><span class="token operator">:</span> <span class="token number">60000</span><span class="token punctuation">,</span> <span class="token comment">// 空闲连接超时，以毫秒为单位，默认值为 60000 ms</span></span>
<span class="line">  <span class="token literal-property property">queueLimit</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">enableKeepAlive</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">keepAliveInitialDelay</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以像直接连接一样使用池（使用 <code>pool.query()</code> 和 <code>pool.execute()</code>）</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 关于连接池初始化，请参阅上文</span></span>
<span class="line">pool<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">&#39;SELECT \`field\` FROM \`table\`&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> rows<span class="token punctuation">,</span> fields</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// 查询解析时，连接会自动释放</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="可视化工具" tabindex="-1"><a class="header-anchor" href="#可视化工具"><span>可视化工具</span></a></h2><p>navicat工具下载地址: https://www.navicat.com/en/products/(注意:不免费)</p><p>破解版</p><ol><li>复制对应注册码 <ul><li>名称和组织不用填写</li><li>NAVH-WK6A-DMVK-DKW3</li></ul></li><li>点击navicat.exe文件执行 <ul><li>点击注册, 粘贴对应注册码</li></ul></li><li>输入对应名称和mysql的密码</li><li>打开mysql工具输入对应指令进行链接 <ul><li><code>ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;你的登录密码&#39;;</code></li><li><code>FLUSH PRIVILEGES;</code></li></ul></li><li>可视化工具即可链接成功</li></ol>`,109)])])}const o=s(i,[["render",p]]),r=JSON.parse('{"path":"/node/09-mysql.html","title":"","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"安装","slug":"安装","link":"#安装","children":[{"level":3,"title":"第一步安装","slug":"第一步安装","link":"#第一步安装","children":[]},{"level":3,"title":"第二步配置","slug":"第二步配置","link":"#第二步配置","children":[]},{"level":3,"title":"第三步环境","slug":"第三步环境","link":"#第三步环境","children":[]},{"level":3,"title":"第四步创建","slug":"第四步创建","link":"#第四步创建","children":[]}]},{"level":2,"title":"可视化数据","slug":"可视化数据","link":"#可视化数据","children":[]},{"level":2,"title":"SQL语句","slug":"sql语句","link":"#sql语句","children":[{"level":3,"title":"DDL语句","slug":"ddl语句","link":"#ddl语句","children":[]},{"level":3,"title":"数据类型","slug":"数据类型","link":"#数据类型","children":[]},{"level":3,"title":"表约束","slug":"表约束","link":"#表约束","children":[]},{"level":3,"title":"表约束使用","slug":"表约束使用","link":"#表约束使用","children":[]}]},{"level":2,"title":"DML数据表操作","slug":"dml数据表操作","link":"#dml数据表操作","children":[{"level":3,"title":"插入数据","slug":"插入数据","link":"#插入数据","children":[]},{"level":3,"title":"删除数据","slug":"删除数据","link":"#删除数据","children":[]},{"level":3,"title":"修改数据","slug":"修改数据","link":"#修改数据","children":[]}]},{"level":2,"title":"DQL语句数据查询","slug":"dql语句数据查询","link":"#dql语句数据查询","children":[{"level":3,"title":"where查询","slug":"where查询","link":"#where查询","children":[]},{"level":3,"title":"模糊查询LIKE","slug":"模糊查询like","link":"#模糊查询like","children":[]},{"level":3,"title":"结果排序","slug":"结果排序","link":"#结果排序","children":[]},{"level":3,"title":"分页查询","slug":"分页查询","link":"#分页查询","children":[]}]},{"level":2,"title":"创建表关联(外键)","slug":"创建表关联-外键","link":"#创建表关联-外键","children":[{"level":3,"title":"多表查询","slug":"多表查询","link":"#多表查询","children":[]},{"level":3,"title":"多表连接","slug":"多表连接","link":"#多表连接","children":[]}]},{"level":2,"title":"mysql2","slug":"mysql2","link":"#mysql2","children":[{"level":3,"title":"创建数据库与数据表","slug":"创建数据库与数据表","link":"#创建数据库与数据表","children":[]},{"level":3,"title":"增删改查数据","slug":"增删改查数据","link":"#增删改查数据","children":[]},{"level":3,"title":"链接池","slug":"链接池","link":"#链接池","children":[]}]},{"level":2,"title":"可视化工具","slug":"可视化工具","link":"#可视化工具","children":[]}],"git":{},"filePathRelative":"node/09-mysql.md"}');export{o as comp,r as data};
