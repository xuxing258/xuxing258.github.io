import{_ as s,c as a,a as p,o as t}from"./app-hJI7UlmO.js";const e={};function c(l,n){return t(),a("div",null,[...n[0]||(n[0]=[p(`<h1 id="非阻塞-io多路复用" tabindex="-1"><a class="header-anchor" href="#非阻塞-io多路复用"><span>非阻塞+IO多路复用</span></a></h1><h2 id="_1-非阻塞" tabindex="-1"><a class="header-anchor" href="#_1-非阻塞"><span>1.非阻塞</span></a></h2><p>socket都是会阻塞的(等待状态)</p><p>在等待客户端连接以及接收客户端的消息的时候会发生阻塞状态(accept,recv)</p><p>设置非阻塞:socket对象.setblocking(False)</p><p><strong>服务端代码</strong></p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> socket</span>
<span class="line"><span class="token keyword">import</span> time</span>
<span class="line"><span class="token keyword">import</span> pprint</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 创建socket对象</span></span>
<span class="line">server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># 绑定ip以及端口号</span></span>
<span class="line">server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># 设置监听模式</span></span>
<span class="line">server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># 设置非阻塞状态的套接字</span></span>
<span class="line">server<span class="token punctuation">.</span>setblocking<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># 保存客户端的连接对象的列表</span></span>
<span class="line">conn_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token comment"># 要断开的连接的客户端列表</span></span>
<span class="line">del_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># 捕获阻塞异常</span></span>
<span class="line">    <span class="token keyword">try</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># 等待客户端连接</span></span>
<span class="line">        conn<span class="token punctuation">,</span> addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        conn_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>conn<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">except</span> BlockingIOError<span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># 发生BlockingIOError的异常,从列表中获取已经保存的客户端,进行消息接收</span></span>
<span class="line">        <span class="token comment"># 从列表中获取连接成功的客户端的对象</span></span>
<span class="line">        <span class="token keyword">for</span> conn <span class="token keyword">in</span> conn_list<span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">try</span><span class="token punctuation">:</span></span>
<span class="line">                <span class="token comment"># 接收客户端的消息</span></span>
<span class="line">                data <span class="token operator">=</span> conn<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token keyword">not</span> data<span class="token punctuation">:</span></span>
<span class="line">                    conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                    del_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>conn<span class="token punctuation">)</span></span>
<span class="line">                    <span class="token keyword">continue</span></span>
<span class="line">                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;客户端</span><span class="token interpolation"><span class="token punctuation">{</span>conn<span class="token punctuation">}</span></span><span class="token string">点菜:</span><span class="token interpolation"><span class="token punctuation">{</span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">                conn<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;成功收到客户端点的菜</span><span class="token interpolation"><span class="token punctuation">{</span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">.马上准备&quot;</span></span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">except</span> BlockingIOError<span class="token punctuation">:</span></span>
<span class="line">                <span class="token comment"># 如果当下客户端没有消息,就循环其他的客户端对象</span></span>
<span class="line">                <span class="token keyword">continue</span></span>
<span class="line">            <span class="token keyword">except</span> ConnectionResetError<span class="token punctuation">:</span></span>
<span class="line">                <span class="token comment"># 客户端强制断开 意外断开</span></span>
<span class="line">                conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                del_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>conn<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">for</span> conn <span class="token keyword">in</span> del_list<span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;断开的conn&quot;</span><span class="token punctuation">,</span> conn<span class="token punctuation">)</span></span>
<span class="line">            conn_list<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>conn<span class="token punctuation">)</span></span>
<span class="line">        del_list<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 清空del_list</span></span>
<span class="line"><span class="token comment"># 关闭套接字对象</span></span>
<span class="line">server<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>客户端代码</strong></p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> socket</span>
<span class="line"></span>
<span class="line">client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span></span>
<span class="line">    msg <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;点菜:&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token keyword">not</span> msg<span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;请重新点菜&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">continue</span></span>
<span class="line">    <span class="token keyword">if</span> msg<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;Q&quot;</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;不点了&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">break</span></span>
<span class="line">    client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>msg<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    data <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;服务端的回应:</span><span class="token interpolation"><span class="token punctuation">{</span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 四次挥手 相当于发了空数据</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-io多路复用" tabindex="-1"><a class="header-anchor" href="#_2-io多路复用"><span>2.IO多路复用</span></a></h2><p>IO多路复用是用于提升效率，单个进程可以同时监听多个网络连接IO（一个服务端可以连接多个客户端）</p><p>IO多路复用 ，通过一种机制， 可以监视多个文件描述符 ， 一旦描述符就绪(读 ， 写)，能够通知程序进行相应的读写操作</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">r <span class="token punctuation">,</span> w <span class="token punctuation">,</span> x <span class="token operator">=</span> select<span class="token punctuation">.</span>select<span class="token punctuation">(</span>rlist <span class="token punctuation">,</span> wlist <span class="token punctuation">,</span> xlist<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">rlist <span class="token operator">-</span><span class="token operator">-</span> wait until ready <span class="token keyword">for</span> reading</span>
<span class="line">wlist <span class="token operator">-</span><span class="token operator">-</span> wait until ready <span class="token keyword">for</span> writing</span>
<span class="line">xlist <span class="token operator">-</span><span class="token operator">-</span> wait <span class="token keyword">for</span> an <span class="token string">&quot;exceptional condition&quot;</span></span>
<span class="line"><span class="token comment"># rlist wlist xlist均是列表</span></span>
<span class="line"><span class="token comment"># rlist等待读描述</span></span>
<span class="line"><span class="token comment"># wlist等待写描述</span></span>
<span class="line"><span class="token comment"># xlist异常</span></span>
<span class="line"><span class="token comment"># wlist xlist目前不需要使用到，直接传入一个空列表即可</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>服务端server</strong></p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> time</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> select</span>
<span class="line"><span class="token keyword">import</span> socket</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 创建socket对象</span></span>
<span class="line">server <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># ip可复用</span></span>
<span class="line">server<span class="token punctuation">.</span>setsockopt<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>SOL_SOCKET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SO_REUSEADDR<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># 绑定ip以及端口号</span></span>
<span class="line">server<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># 设置监听模式</span></span>
<span class="line">server<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># 设置非阻塞状态的套接字</span></span>
<span class="line">server<span class="token punctuation">.</span>setblocking<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># 保存socket对象(第一个数据服务端自己的socket对象,第一个客户端的连接对象conn)</span></span>
<span class="line">inputs <span class="token operator">=</span> <span class="token punctuation">[</span>server<span class="token punctuation">]</span> <span class="token comment"># [server,conn1,conn2,conn3]</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span></span>
<span class="line">    r<span class="token punctuation">,</span> w<span class="token punctuation">,</span> x <span class="token operator">=</span> select<span class="token punctuation">.</span>select<span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment"># 监测客户端发来的请求</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># r = [server]</span></span>
<span class="line">    <span class="token comment"># r = [conn1]</span></span>
<span class="line">    <span class="token comment"># r = [server,conn1]</span></span>
<span class="line">    <span class="token comment"># r = [conn1,conn2]</span></span>
<span class="line">    <span class="token keyword">for</span> read <span class="token keyword">in</span> r<span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># server :有客户端来连接</span></span>
<span class="line">        <span class="token keyword">if</span> read <span class="token operator">==</span> server<span class="token punctuation">:</span></span>
<span class="line">            conn<span class="token punctuation">,</span> addr <span class="token operator">=</span> server<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 接收新连接</span></span>
<span class="line">            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;与</span><span class="token interpolation"><span class="token punctuation">{</span>addr<span class="token punctuation">}</span></span><span class="token string">连接成功&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">            inputs<span class="token punctuation">.</span>append<span class="token punctuation">(</span>conn<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment"># conn : 连接成功的客户端中有客户发来消息了</span></span>
<span class="line">            <span class="token comment"># 接收消息</span></span>
<span class="line">            data <span class="token operator">=</span> read<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">if</span> data<span class="token punctuation">:</span></span>
<span class="line">                <span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">                read<span class="token punctuation">.</span>send<span class="token punctuation">(</span>data<span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">else</span><span class="token punctuation">:</span></span>
<span class="line">                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;关闭连接&quot;</span><span class="token punctuation">)</span></span>
<span class="line">                read<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                inputs<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>read<span class="token punctuation">)</span></span>
<span class="line"><span class="token triple-quoted-string string">&quot;&quot;&quot;</span>
<span class="line">优点:</span>
<span class="line">	1.干点其他的事情</span>
<span class="line">	2.让服务端支持多个客户端同时来连接</span>
<span class="line">&quot;&quot;&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>客户端client</strong></p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> socket</span>
<span class="line"></span>
<span class="line">client <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span></span>
<span class="line">client<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;连接成功&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span></span>
<span class="line">    msg <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;点菜:&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token keyword">not</span> msg<span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;请重新点菜&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">continue</span></span>
<span class="line">    <span class="token keyword">if</span> msg<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;Q&quot;</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;不点了&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">break</span></span>
<span class="line">    client<span class="token punctuation">.</span>send<span class="token punctuation">(</span>msg<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    data <span class="token operator">=</span> client<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;服务端的回应:</span><span class="token interpolation"><span class="token punctuation">{</span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">client<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 四次挥手 相当于发了空数据</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17)])])}const o=s(e,[["render",c]]),u=JSON.parse('{"path":"/python/23_%E9%9D%9E%E9%98%BB%E5%A1%9E_IO%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8.html","title":"非阻塞+IO多路复用","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"1.非阻塞","slug":"_1-非阻塞","link":"#_1-非阻塞","children":[]},{"level":2,"title":"2.IO多路复用","slug":"_2-io多路复用","link":"#_2-io多路复用","children":[]}],"git":{},"filePathRelative":"python/23_非阻塞&IO多路复用.md"}');export{o as comp,u as data};
