import{_ as s,c as a,a as p,o as t}from"./app-2xiJw8gB.js";const e={};function l(o,n){return t(),a("div",null,[...n[0]||(n[0]=[p(`<h1 id="ajax" tabindex="-1"><a class="header-anchor" href="#ajax"><span>ajax</span></a></h1><ul><li>基本语法</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">$<span class="token punctuation">(</span><span class="token string">&#39;#btn&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span>function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    $<span class="token punctuation">.</span>ajax<span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        url<span class="token punctuation">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token builtin">type</span><span class="token punctuation">:</span><span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        data<span class="token punctuation">:</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token string">&#39;键&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;值&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        success<span class="token punctuation">:</span> function<span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment"># 后端返回成功之后执行的函数,args接收后端的返回值</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="前后端传输数据的编码格式" tabindex="-1"><a class="header-anchor" href="#前后端传输数据的编码格式"><span>前后端传输数据的编码格式</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># post请求数据的编码格式</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># get请求提交数据:url/?键=值&amp;键=值</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>form表单</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">默认的数据编码格式是urlencoded</span>
<span class="line">数据格式<span class="token punctuation">:</span>username<span class="token operator">=</span>xixi<span class="token operator">&amp;</span>password<span class="token operator">=</span><span class="token number">123456</span></span>
<span class="line">django后端针对urlencoded编码格式的数据会自动解析封装到request<span class="token punctuation">.</span>POST中</span>
<span class="line"></span>
<span class="line">将编码格式修改为form<span class="token operator">-</span>data之后</span>
<span class="line">针对普通键值对<span class="token punctuation">,</span>还是会封装到request<span class="token punctuation">.</span>POST中<span class="token punctuation">.</span>针对文件格式<span class="token punctuation">,</span>会封装到request<span class="token punctuation">.</span>FILES中</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ajax</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">默认的编码格式也是urlencoded</span>
<span class="line">数据格式<span class="token punctuation">:</span>username<span class="token operator">=</span>xixi<span class="token operator">&amp;</span>password<span class="token operator">=</span><span class="token number">123456</span></span>
<span class="line">所以ajax提交键值也能通过request<span class="token punctuation">.</span>POST接收</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ajax发送json格式的数据" tabindex="-1"><a class="header-anchor" href="#ajax发送json格式的数据"><span>ajax发送json格式的数据</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token number">1.</span> contentType参数指定为<span class="token punctuation">:</span><span class="token string">&#39;application/json&#39;</span></span>
<span class="line"><span class="token number">2.</span> 数据是正在的json格式数据</span>
<span class="line">$<span class="token punctuation">(</span><span class="token string">&#39;#d1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        $<span class="token punctuation">.</span>ajax<span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">            url<span class="token punctuation">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token builtin">type</span><span class="token punctuation">:</span> <span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            data<span class="token punctuation">:</span> JSON<span class="token punctuation">.</span>stringify<span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">                <span class="token string">&#39;username&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;xixi&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">&#39;password&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;123456&#39;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            contentType<span class="token punctuation">:</span> <span class="token string">&#39;application/json&#39;</span><span class="token punctuation">,</span>  <span class="token operator">//</span> 指定编码格式</span>
<span class="line">            success<span class="token punctuation">:</span> function <span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                </span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span> </span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token number">3.</span> django后端不会处理json格式的数据<span class="token punctuation">,</span>需要自己手动去request<span class="token punctuation">.</span>body中获取</span>
<span class="line">json_str <span class="token operator">=</span> request<span class="token punctuation">.</span>body<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span>  <span class="token comment"># json格式字符串</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>json_str<span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token punctuation">(</span>json_str<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># {&quot;username&quot;:&quot;xixi&quot;,&quot;password&quot;:&quot;123456&quot;} &lt;class &#39;str&#39;&gt;</span></span>
<span class="line">dict1 <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>json_str<span class="token punctuation">)</span>  <span class="token comment"># json.loads(json格式):将json格式字符串转换成python数据类型</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>dict1<span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token punctuation">(</span>dict1<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># {&#39;username&#39;: &#39;xixi&#39;, &#39;password&#39;: &#39;123456&#39;} &lt;class &#39;dict&#39;&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ajax发送文件" tabindex="-1"><a class="header-anchor" href="#ajax发送文件"><span>ajax发送文件</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token number">1.</span>利用内置对象FormData保存键值对和文件对象</span>
<span class="line">	formDataObj<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&#39;username&#39;</span><span class="token punctuation">,</span> $<span class="token punctuation">(</span><span class="token string">&#39;#i1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>val<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    formDataObj<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&#39;password&#39;</span><span class="token punctuation">,</span> $<span class="token punctuation">(</span><span class="token string">&#39;#i2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>val<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    formDataObj<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&#39;file&#39;</span><span class="token punctuation">,</span> $<span class="token punctuation">(</span><span class="token string">&#39;#f1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line"><span class="token number">2.</span>需要指定两个参数</span>
<span class="line">	contentType<span class="token punctuation">:</span> false<span class="token punctuation">,</span> <span class="token operator">//</span> 不需要任何编码</span>
<span class="line">    processData<span class="token punctuation">:</span> false<span class="token punctuation">,</span> <span class="token operator">//</span> 告诉浏览器不需要对数据进行处理</span>
<span class="line">        </span>
<span class="line"><span class="token number">3.</span> django后端能够直接识别FormData对象<span class="token punctuation">,</span>并且能够自动将内部的普通键值对自动解析并封装到request<span class="token punctuation">.</span>POST中<span class="token punctuation">,</span>文件数据会自动解析并封装到request<span class="token punctuation">.</span>FILES中</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">$<span class="token punctuation">(</span><span class="token string">&#39;#btn&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token operator">//</span> <span class="token number">1.</span>利用formdata对象</span>
<span class="line">        let formDataObj <span class="token operator">=</span> new FormData<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token operator">//</span> <span class="token number">2.</span>往formdata对象中添加数据</span>
<span class="line">        <span class="token operator">//</span> val<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>获取<span class="token builtin">input</span>框内部文本</span>
<span class="line">        formDataObj<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&#39;username&#39;</span><span class="token punctuation">,</span> $<span class="token punctuation">(</span><span class="token string">&#39;#i1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>val<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        formDataObj<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&#39;password&#39;</span><span class="token punctuation">,</span> $<span class="token punctuation">(</span><span class="token string">&#39;#i2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>val<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token operator">//</span> <span class="token number">3.</span>获取文件对象添加到formdata对象中</span>
<span class="line">        <span class="token operator">//</span> $<span class="token punctuation">(</span><span class="token string">&#39;#f1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token operator">//</span> jquery中没有操作文件的方法<span class="token punctuation">,</span>需要利用js方法</span>
<span class="line">        <span class="token operator">//</span> $<span class="token punctuation">(</span><span class="token string">&#39;#f1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>获取到jquery对象转换成标签对象</span>
<span class="line">        <span class="token operator">//</span> files<span class="token punctuation">:</span>获取到文件列表</span>
<span class="line">        <span class="token operator">//</span> files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 获取到列表中的文件对象</span>
<span class="line">        formDataObj<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&#39;file&#39;</span><span class="token punctuation">,</span> $<span class="token punctuation">(</span><span class="token string">&#39;#f1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">        $<span class="token punctuation">.</span>ajax<span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">            url<span class="token punctuation">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token builtin">type</span><span class="token punctuation">:</span> <span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            data<span class="token punctuation">:</span> formDataObj<span class="token punctuation">,</span></span>
<span class="line">            contentType<span class="token punctuation">:</span> false<span class="token punctuation">,</span> <span class="token operator">//</span> 不需要任何编码</span>
<span class="line">            processData<span class="token punctuation">:</span> false<span class="token punctuation">,</span> <span class="token operator">//</span> 告诉浏览器不需要对数据进行处理</span>
<span class="line">            success<span class="token punctuation">:</span> function <span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                </span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="forms组件" tabindex="-1"><a class="header-anchor" href="#forms组件"><span>forms组件</span></a></h1><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">写一个注册功能<span class="token punctuation">:</span>获取用户名和密码<span class="token punctuation">,</span>利用form表单提交数据</span>
<span class="line">   			在后端你进行判断用户名和密码是否一定的条件</span>
<span class="line">        将不符合条件的提示信息展示到前端页面</span>
<span class="line">        </span>
<span class="line"><span class="token comment"># urls</span></span>
<span class="line">path<span class="token punctuation">(</span><span class="token string">&#39;ab_forms/&#39;</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>ab_forms<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># views.py</span></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">ab_forms</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    back_dict <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&#39;username&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;password&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token triple-quoted-string string">&#39;&#39;&#39;</span>
<span class="line">        无论是post请求还是get请求,页面上都能获取到back_dict字典</span>
<span class="line">        只不过get请求来的时候,字典的值是空的</span>
<span class="line">        而post请求来的时候,经过校验,字典可能会有值</span>
<span class="line">    &#39;&#39;&#39;</span></span>
<span class="line">    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">:</span></span>
<span class="line">        username <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;username&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        password <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;password&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token string">&#39;666&#39;</span> <span class="token keyword">in</span> username<span class="token punctuation">:</span></span>
<span class="line">            back_dict<span class="token punctuation">[</span><span class="token string">&#39;username&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;用户名包含特殊字符&#39;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">:</span></span>
<span class="line">            back_dict<span class="token punctuation">[</span><span class="token string">&#39;password&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;密码太短了&#39;</span></span>
<span class="line">    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&#39;ab_forms.html&#39;</span><span class="token punctuation">,</span> <span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ab_forms.html</span></span>
<span class="line"><span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">&quot;&quot;</span> method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>用户名<span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;username&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">&quot;color: red&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> back_dict<span class="token punctuation">.</span>username <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>密码<span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;password&quot;</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">&quot;color: red&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> back_dict<span class="token punctuation">.</span>password <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>总结一下上面用到了哪些知识点:</p><ul><li>手动书写html代码用户提交的数据---&gt;渲染html代码</li><li>后端获取数据对数据进行校验---&gt;校验数据</li><li>对不符合要求的数据进行前端提示---&gt;展示提示信息</li></ul></li><li><p>forms组件能够完成的事情</p><ul><li>渲染html代码</li><li>校验数据</li><li>展示提示信息</li></ul></li></ul><h2 id="基本使用" tabindex="-1"><a class="header-anchor" href="#基本使用"><span>基本使用</span></a></h2><h3 id="检验数据" tabindex="-1"><a class="header-anchor" href="#检验数据"><span>检验数据</span></a></h3><ul><li>定义forms组件类</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">from</span> django <span class="token keyword">import</span> forms</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">RegForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>Form<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># required=True表示这个字段的值为必传的</span></span>
<span class="line">    <span class="token comment"># label:指定渲染html标签时label的值,默认情况下不指定是以属性名首字母大写的形式展示</span></span>
<span class="line">    username <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> min_length<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&#39;用户名&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    password <span class="token operator">=</span> forms<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> min_length<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">&#39;密码&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># xxx@xx.com---\\w+@\\w+\\.\\w+</span></span>
<span class="line">    email <span class="token operator">=</span> forms<span class="token punctuation">.</span>EmailField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">&#39;邮箱&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>校验数据(只能多传,不能少传)</li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">from</span> app01<span class="token punctuation">.</span>myforms <span class="token keyword">import</span> regforms</span>
<span class="line"><span class="token comment"># 1.将待校验的数据以字典的形式传递给类</span></span>
<span class="line">form_obj <span class="token operator">=</span> regforms<span class="token punctuation">.</span>RegForm<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&#39;username&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                             <span class="token string">&#39;password&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;123456&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                             <span class="token string">&#39;email&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;123@qq.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">                             <span class="token string">&#39;hobby&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;read&#39;</span></span>
<span class="line">                            <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2.判断数据是否合法,该方法只有在所有数据全部合法的情况下才会返回True</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>form_obj<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># True</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 3.查看通过检验的数据</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>form_obj<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">)</span>  <span class="token comment"># 返回值是字典格式</span></span>
<span class="line"><span class="token comment"># {&#39;username&#39;: &#39;admin&#39;, &#39;password&#39;: &#39;123456&#39;, &#39;email&#39;: &#39;123@qq.com&#39;}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 4.查看所有不符合校验规则以及不符合的原因</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>form_obj<span class="token punctuation">.</span>errors<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token triple-quoted-string string">&#39;&#39;&#39;</span>
<span class="line"> &lt;ul class=&quot;errorlist&quot;&gt;</span>
<span class="line">        &lt;li&gt;email</span>
<span class="line">            &lt;ul class=&quot;errorlist&quot;&gt;</span>
<span class="line">                &lt;li&gt;</span>
<span class="line">                    Enter a valid email address.</span>
<span class="line">                &lt;/li&gt;</span>
<span class="line">            &lt;/ul&gt;</span>
<span class="line">        &lt;/li&gt;</span>
<span class="line">&lt;/ul&gt;</span>
<span class="line">{email:[Enter a valid email address.]}</span>
<span class="line">&#39;&#39;&#39;</span></span>
<span class="line">   </span>
<span class="line"></span>
<span class="line"><span class="token comment"># 5.校验数据只会校验类中出现的字段, 多传不影响,且多传的字段在数据校验时会被忽略</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 6.默认情况下,类中的所有字段都必须传值</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="渲染标签" tabindex="-1"><a class="header-anchor" href="#渲染标签"><span>渲染标签</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">forms组件只会帮你渲染用户输入的标签<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">,</span> select<span class="token punctuation">,</span> radio<span class="token punctuation">,</span> checkbox<span class="token punctuation">)</span></span>
<span class="line">不能渲染提交按钮和form表单</span>
<span class="line"><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>第一种渲染方式<span class="token punctuation">:</span>代码书写极少<span class="token punctuation">,</span>封装程度太高<span class="token punctuation">,</span>不利于后续扩展<span class="token punctuation">,</span>一般在测试代码时使用<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token punctuation">{</span> form_obj<span class="token punctuation">.</span>as_p <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token punctuation">{</span> form_obj<span class="token punctuation">.</span>as_ul <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token punctuation">{</span> form_obj<span class="token punctuation">.</span>as_table <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>第二种渲染方式<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">for</span> form <span class="token keyword">in</span> form_obj <span class="token operator">%</span><span class="token punctuation">}</span></span>
<span class="line">        <span class="token operator">&lt;</span>!<span class="token operator">-</span><span class="token operator">-</span>form<span class="token punctuation">.</span>auto_id <span class="token punctuation">:</span>获取到forms字段默认产生的<span class="token builtin">id</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;{{ form.auto_id }}&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> form<span class="token punctuation">.</span>label<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span></span>
<span class="line">    	    <span class="token punctuation">{</span><span class="token punctuation">{</span> form <span class="token punctuation">}</span><span class="token punctuation">}</span>  <span class="token operator">&lt;</span>!<span class="token operator">-</span><span class="token operator">-</span>渲染字段代表的<span class="token builtin">input</span>框<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">&quot;color: red&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">{</span><span class="token operator">%</span> endfor <span class="token operator">%</span><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="展示提示信息" tabindex="-1"><a class="header-anchor" href="#展示提示信息"><span>展示提示信息</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># 1.实例化一个forms组件类的对象</span></span>
<span class="line">    form_obj <span class="token operator">=</span> regforms<span class="token punctuation">.</span>RegForm<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># get请求进来产生一个空的对象</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># 3.将前端提交的数据交给forms类进行校验</span></span>
<span class="line">        <span class="token comment"># 数据校验和空的对象名字必须一致</span></span>
<span class="line">        <span class="token comment"># 既能保存用户之前输入过的内容在value属性中,又能直接给前端页面获取提示信息</span></span>
<span class="line">        form_obj <span class="token operator">=</span> regforms<span class="token punctuation">.</span>RegForm<span class="token punctuation">(</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>  <span class="token comment"># post请求进来对象将会有值</span></span>
<span class="line">        <span class="token keyword">if</span> form_obj<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token comment"># 4.数据合法</span></span>
<span class="line">            <span class="token keyword">print</span><span class="token punctuation">(</span>form_obj<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">&#39;注册成功&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment"># 5.数据不合法, 去前端页面展示提示信息</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># 2.将空的对象传递给前端页面渲染html代码</span></span>
<span class="line">    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&#39;func.html&#39;</span><span class="token punctuation">,</span> <span class="token builtin">locals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># func.html</span></span>
<span class="line"><span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">&quot;&quot;</span> method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span> novalidate<span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span>!<span class="token operator">-</span><span class="token operator">-</span>novalidate<span class="token punctuation">:</span>浏览器不渲染报错信息<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">&gt;</span></span>
<span class="line">   <span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">for</span> form <span class="token keyword">in</span> form_obj <span class="token operator">%</span><span class="token punctuation">}</span></span>
<span class="line">        <span class="token operator">&lt;</span>!<span class="token operator">-</span><span class="token operator">-</span>form<span class="token punctuation">.</span>auto_id <span class="token punctuation">:</span>获取到forms字段默认产生的<span class="token builtin">id</span><span class="token operator">-</span><span class="token operator">-</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;{{ form.auto_id }}&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> form<span class="token punctuation">.</span>label<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span></span>
<span class="line">    	    <span class="token punctuation">{</span><span class="token punctuation">{</span> form <span class="token punctuation">}</span><span class="token punctuation">}</span>  <span class="token operator">&lt;</span>!<span class="token operator">-</span><span class="token operator">-</span>渲染字段代表的<span class="token builtin">input</span>框<span class="token operator">-</span><span class="token operator">-</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token string">&quot;color: red&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> form<span class="token punctuation">.</span>errors<span class="token punctuation">.</span><span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token punctuation">{</span><span class="token operator">%</span> endfor <span class="token operator">%</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span></span>
<span class="line"><span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>报错信息怎么更改,怎么添加更加复杂的校验规则,怎么给input框添加样式(修改input框的类型)</p>`,28)])])}const i=s(e,[["render",l]]),u=JSON.parse('{"path":"/django/15-form%E7%BB%84%E4%BB%B6.html","title":"ajax","lang":"en-US","frontmatter":{},"headers":[{"level":2,"title":"前后端传输数据的编码格式","slug":"前后端传输数据的编码格式","link":"#前后端传输数据的编码格式","children":[{"level":3,"title":"ajax发送json格式的数据","slug":"ajax发送json格式的数据","link":"#ajax发送json格式的数据","children":[]},{"level":3,"title":"ajax发送文件","slug":"ajax发送文件","link":"#ajax发送文件","children":[]}]},{"level":2,"title":"基本使用","slug":"基本使用","link":"#基本使用","children":[{"level":3,"title":"检验数据","slug":"检验数据","link":"#检验数据","children":[]},{"level":3,"title":"渲染标签","slug":"渲染标签","link":"#渲染标签","children":[]},{"level":3,"title":"展示提示信息","slug":"展示提示信息","link":"#展示提示信息","children":[]}]}],"git":{},"filePathRelative":"django/15-form组件.md"}');export{i as comp,u as data};
