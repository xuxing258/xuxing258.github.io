<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>ç¬”è®°åˆ†æ</title><meta name="description" content="å³ä½¿æ˜¯å¾®å°çš„è¿›æ­¥,æ—¥ç§¯æœˆç´¯ä¹Ÿä¼šäº§ç”ŸæƒŠäººçš„å˜åŒ–">
    <link rel="preload" href="/book/assets/style-QXEKf4Y2.css" as="style"><link rel="stylesheet" href="/book/assets/style-QXEKf4Y2.css">
    <link rel="modulepreload" href="/book/assets/app-cH5Xd749.js"><link rel="modulepreload" href="/book/assets/09-Scrapy.html-DVTuF_Mz.js">
    <link rel="prefetch" href="/book/assets/index.html-GS_m2gnX.js" as="script"><link rel="prefetch" href="/book/assets/01-webæœåŠ¡å™¨.html-3fFwNzJz.js" as="script"><link rel="prefetch" href="/book/assets/02-djangoä»‹ç».html-CNy57nKP.js" as="script"><link rel="prefetch" href="/book/assets/03-è·¯ç”±å±‚.html-CwWzHPTI.js" as="script"><link rel="prefetch" href="/book/assets/04-è·¯ç”±å±‚å’Œè§†å›¾å±‚.html-h0Xga9Tf.js" as="script"><link rel="prefetch" href="/book/assets/05-è§†å›¾å±‚.html-C3Imdna6.js" as="script"><link rel="prefetch" href="/book/assets/06-æ¨¡æ¿å±‚.html-BxX7PT9-.js" as="script"><link rel="prefetch" href="/book/assets/07-orm.html-B_m-DM4S.js" as="script"><link rel="prefetch" href="/book/assets/08-orm.html-BHDEHJ6B.js" as="script"><link rel="prefetch" href="/book/assets/09-orm.html-DEtVNdmC.js" as="script"><link rel="prefetch" href="/book/assets/10-orm.html-D-24yvx8.js" as="script"><link rel="prefetch" href="/book/assets/11-orm.html-jUQosQYJ.js" as="script"><link rel="prefetch" href="/book/assets/12-å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ.html-DLP4riqI.js" as="script"><link rel="prefetch" href="/book/assets/13-å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ.html-Bi_fhbC4.js" as="script"><link rel="prefetch" href="/book/assets/14-ajax.html-CSHIm_DY.js" as="script"><link rel="prefetch" href="/book/assets/15-formç»„ä»¶.html-CUZ7cplQ.js" as="script"><link rel="prefetch" href="/book/assets/16-formsç»„ä»¶.html-DVqtWAnd.js" as="script"><link rel="prefetch" href="/book/assets/17-cookieå’Œsession.html-8OuWvnem.js" as="script"><link rel="prefetch" href="/book/assets/18-djangoä¸­é—´ä»¶.html-Dbv21OYS.js" as="script"><link rel="prefetch" href="/book/assets/19-authæ¨¡å—.html-DgDXVeKI.js" as="script"><link rel="prefetch" href="/book/assets/20-åšå®¢å›­é¡¹ç›®.html-CUvyl2pD.js" as="script"><link rel="prefetch" href="/book/assets/21-åšå®¢å›­é¡¹ç›®.html-ddWnsibK.js" as="script"><link rel="prefetch" href="/book/assets/22-åšå®¢å›­é¡¹ç›®.html-Eh0m4gNg.js" as="script"><link rel="prefetch" href="/book/assets/23-åšå®¢å›­é¡¹ç›®.html-DW7BMGxs.js" as="script"><link rel="prefetch" href="/book/assets/24-åšå®¢å›­é¡¹ç›®.html-CF7heu-G.js" as="script"><link rel="prefetch" href="/book/assets/25-åšå®¢å›­é¡¹ç›®.html-HA7tUMrl.js" as="script"><link rel="prefetch" href="/book/assets/26-åšå®¢å›­é¡¹ç›®.html-DaGd0RtC.js" as="script"><link rel="prefetch" href="/book/assets/27-åšå®¢å›­é¡¹ç›®.html-DIldmQDB.js" as="script"><link rel="prefetch" href="/book/assets/28-linuxåŸºç¡€.html-BPiQfRob.js" as="script"><link rel="prefetch" href="/book/assets/28-vmwareå®‰è£…å’Œubuntué…ç½®.html-VGjNkugZ.js" as="script"><link rel="prefetch" href="/book/assets/29-linuxåŸºç¡€.html-slGUGaSj.js" as="script"><link rel="prefetch" href="/book/assets/30-linuxè¿›é˜¶.html-C_VOOq4O.js" as="script"><link rel="prefetch" href="/book/assets/31-éƒ¨ç½².html-DIudkyzz.js" as="script"><link rel="prefetch" href="/book/assets/32-restfulè§„èŒƒ.html-DxdBFTEC.js" as="script"><link rel="prefetch" href="/book/assets/33-drfä»‹ç».html-z1oPgJw8.js" as="script"><link rel="prefetch" href="/book/assets/34-drfæ¡†æ¶.html-BsCvct2n.js" as="script"><link rel="prefetch" href="/book/assets/35-drfæ¡†æ¶.html-DBqU7H-1.js" as="script"><link rel="prefetch" href="/book/assets/36-drfæ¡†æ¶.html-5pA6tB6T.js" as="script"><link rel="prefetch" href="/book/assets/37-drfæ¡†æ¶.html-_Z4KXSW4.js" as="script"><link rel="prefetch" href="/book/assets/38-drfæ¡†æ¶.html-DSHEkHeQ.js" as="script"><link rel="prefetch" href="/book/assets/39-drfé¡¹ç›®.html-DTV60QMH.js" as="script"><link rel="prefetch" href="/book/assets/day28-vmwareå®‰è£…å’Œubuntué…ç½®.html-BF-w13EY.js" as="script"><link rel="prefetch" href="/book/assets/day29-linuxåŸºç¡€.html-59Lp6djR.js" as="script"><link rel="prefetch" href="/book/assets/day30-linuxè¿›é˜¶.html-Ig6mhDam.js" as="script"><link rel="prefetch" href="/book/assets/day31-éƒ¨ç½².html-BcrLAPZq.js" as="script"><link rel="prefetch" href="/book/assets/Djangoæ€»ç»“.html-B42tM1jE.js" as="script"><link rel="prefetch" href="/book/assets/index.html-ClRbrvPx.js" as="script"><link rel="prefetch" href="/book/assets/01-å¼€ç­å­¦ä¹ .html-PpF0QAqQ.js" as="script"><link rel="prefetch" href="/book/assets/02-åŸºç¡€æ ‡ç­¾.html-2RBUN46n.js" as="script"><link rel="prefetch" href="/book/assets/03-cssåŸºç¡€çŸ¥è¯†.html-DLSTqqMF.js" as="script"><link rel="prefetch" href="/book/assets/04-ç›’æ¨¡å‹.html-c9wiJ3Zz.js" as="script"><link rel="prefetch" href="/book/assets/05-å…ƒç´ ç±»å‹.html-4spfq62q.js" as="script"><link rel="prefetch" href="/book/assets/06-æ–‡æœ¬æ–‡å­—å±æ€§.html-_rweQjKZ.js" as="script"><link rel="prefetch" href="/book/assets/07-èƒŒæ™¯å±æ€§.html-D-0OywYx.js" as="script"><link rel="prefetch" href="/book/assets/08-åœ†è§’ã€é€æ˜ã€æ¸å˜ã€é¼ æ ‡.html-CRtErhI9.js" as="script"><link rel="prefetch" href="/book/assets/09-æµ®åŠ¨.html-B4V8Bwr6.js" as="script"><link rel="prefetch" href="/book/assets/10-å®šä½.html-Dq2kIdJ_.js" as="script"><link rel="prefetch" href="/book/assets/11-è¡¨å•ä¸è¡¨æ ¼.html-BvtEnvKH.js" as="script"><link rel="prefetch" href="/book/assets/12-é€‰æ‹©å™¨é«˜çº§.html-BWnp-_z8.js" as="script"><link rel="prefetch" href="/book/assets/13-è¿‡æ¸¡ä¸åŠ¨ç”».html-K2nMJsTb.js" as="script"><link rel="prefetch" href="/book/assets/14-transformå˜å½¢.html-Decy8Cnz.js" as="script"><link rel="prefetch" href="/book/assets/15-å¼¹æ€§ç›’æ¨¡å‹.html-C_xGB5i4.js" as="script"><link rel="prefetch" href="/book/assets/16-å“åº”å¼å¸ƒå±€ã€é˜¿é‡Œå›¾æ ‡ç­‰.html-Cx76j93H.js" as="script"><link rel="prefetch" href="/book/assets/17-ç½‘æ ¼å¸ƒå±€.html-CeXZyEf-.js" as="script"><link rel="prefetch" href="/book/assets/HTML_CSSè§„èŒƒ.html-5z03cL_E.js" as="script"><link rel="prefetch" href="/book/assets/index.html-DSHUCUUL.js" as="script"><link rel="prefetch" href="/book/assets/è¡¥å…….html-B9UkAhVO.js" as="script"><link rel="prefetch" href="/book/assets/01-è®¤è¯†JavaScript.html-4HU4tcFQ.js" as="script"><link rel="prefetch" href="/book/assets/02-åˆå­¦Javascriptç±»å‹.html-C_jgQ4ds.js" as="script"><link rel="prefetch" href="/book/assets/03-è¿ç®—ç¬¦.html-Bsli281X.js" as="script"><link rel="prefetch" href="/book/assets/04-æ§åˆ¶æµç¨‹.html-B25CXkXD.js" as="script"><link rel="prefetch" href="/book/assets/05-å¾ªç¯.html-l2bk6sry.js" as="script"><link rel="prefetch" href="/book/assets/06-å‡½æ•°.html-DfVS_GOn.js" as="script"><link rel="prefetch" href="/book/assets/07-ä½œç”¨åŸŸ.html-lHnFgEAI.js" as="script"><link rel="prefetch" href="/book/assets/08-å­—ç¬¦ä¸²ä¸æ•°ç»„.html-j2z5miSe.js" as="script"><link rel="prefetch" href="/book/assets/09-å®šæ—¶å™¨_Math.html-C_flORQ1.js" as="script"><link rel="prefetch" href="/book/assets/10-æ—¥æœŸå¯¹è±¡.html-C8i9Qi-w.js" as="script"><link rel="prefetch" href="/book/assets/11-ES6è§£æ„ä¸æ‰©å±•.html-bV-aa0HC.js" as="script"><link rel="prefetch" href="/book/assets/12-DOMåŸºç¡€.html-aD-biywn.js" as="script"><link rel="prefetch" href="/book/assets/13-DOMä¸BOM.html-y4ezLt02.js" as="script"><link rel="prefetch" href="/book/assets/14-äº‹ä»¶.html-aiSxF3b2.js" as="script"><link rel="prefetch" href="/book/assets/15-jsonä¸å¯¹è±¡.html-Bx3-bQTb.js" as="script"><link rel="prefetch" href="/book/assets/16-æ­£åˆ™è¡¨è¾¾å¼.html-a6J-9tD4.js" as="script"><link rel="prefetch" href="/book/assets/17-æ„é€ å‡½æ•°.html-Dnjw_p7l.js" as="script"><link rel="prefetch" href="/book/assets/18-Classç±».html-DcFdnY6s.js" as="script"><link rel="prefetch" href="/book/assets/19-promiseå’Œasync.html-CJhIiIf5.js" as="script"><link rel="prefetch" href="/book/assets/20-ajax.html-DoTR1QMY.js" as="script"><link rel="prefetch" href="/book/assets/21-æœ¬åœ°å­˜å‚¨.html-DjTtvFe7.js" as="script"><link rel="prefetch" href="/book/assets/22-è¡¥å……å½•æ’­.html-C-Wu3rTV.js" as="script"><link rel="prefetch" href="/book/assets/23-è¡¥å……å½•æ’­ä»£ç†.html-H_pDrllT.js" as="script"><link rel="prefetch" href="/book/assets/index.html-BJZPXy2U.js" as="script"><link rel="prefetch" href="/book/assets/ä¸¥æ ¼æ¨¡å¼.html-CI5jQUN8.js" as="script"><link rel="prefetch" href="/book/assets/æ—¶é—´çº¿_å¼‚æ­¥åŠ è½½.html-DMdUNjhQ.js" as="script"><link rel="prefetch" href="/book/assets/çŸ¥è¯†è¡¥å…….html-G2TJxWlv.js" as="script"><link rel="prefetch" href="/book/assets/01-node.html-Bu20XTDv.js" as="script"><link rel="prefetch" href="/book/assets/02-fsæ¨¡å—.html-Dq3Si9Yo.js" as="script"><link rel="prefetch" href="/book/assets/03-æ¨¡å—åŒ–.html-CJZyoLBD.js" as="script"><link rel="prefetch" href="/book/assets/04-æ¨¡å—ç®¡ç†.html-v_h8pO41.js" as="script"><link rel="prefetch" href="/book/assets/05-httpæ¨¡å—.html-B7ft9pa3.js" as="script"><link rel="prefetch" href="/book/assets/06-expressæ¨¡å—.html-CdfTAf6t.js" as="script"><link rel="prefetch" href="/book/assets/07-koaæ¨¡å—.html-DEeHsqFE.js" as="script"><link rel="prefetch" href="/book/assets/08-mongoose.html-CiF7nU-n.js" as="script"><link rel="prefetch" href="/book/assets/09-mysql.html-BmnAn-wJ.js" as="script"><link rel="prefetch" href="/book/assets/cookieè·¨åŸŸé—®é¢˜.html-fJgo58EO.js" as="script"><link rel="prefetch" href="/book/assets/index.html-CNHl5q2i.js" as="script"><link rel="prefetch" href="/book/assets/æ¨¡å—è¡¥å…….html-yWN87SQ_.js" as="script"><link rel="prefetch" href="/book/assets/çŸ¥è¯†è¡¥å…….html-CuNJoXt3.js" as="script"><link rel="prefetch" href="/book/assets/é˜¿é‡Œäº‘ç¨‹çŸ¥è¯†.html-BDErdMJh.js" as="script"><link rel="prefetch" href="/book/assets/01-react.html-BXai7M5s.js" as="script"><link rel="prefetch" href="/book/assets/02-å‡½æ•°ç»„ä»¶.html-CiP0MhB-.js" as="script"><link rel="prefetch" href="/book/assets/03-å‡½æ•°åŸºç¡€.html-E7TT25Lj.js" as="script"><link rel="prefetch" href="/book/assets/04-ç»„ä»¶é€šä¿¡.html-qFrtIZ19.js" as="script"><link rel="prefetch" href="/book/assets/05-ç±»ç»„ä»¶çš„ä½¿ç”¨.html-CBDF97X4.js" as="script"><link rel="prefetch" href="/book/assets/06-è„šæ‰‹æ¶.html-AxLkKkdD.js" as="script"><link rel="prefetch" href="/book/assets/07-hookå‡½æ•°.html-CNpNnJP5.js" as="script"><link rel="prefetch" href="/book/assets/08-router.html-5lfxkSag.js" as="script"><link rel="prefetch" href="/book/assets/09-reduc.html-BTsBglKW.js" as="script"><link rel="prefetch" href="/book/assets/index.html-BSELg91M.js" as="script"><link rel="prefetch" href="/book/assets/01-pythonåŸºç¡€.html-DNNCfLph.js" as="script"><link rel="prefetch" href="/book/assets/02-åŸºæœ¬æ•°æ®ç±»å‹ä¸å˜é‡.html-DePX_FZu.js" as="script"><link rel="prefetch" href="/book/assets/03-ç”¨æˆ·äº¤äº’ä¸è¿ç®—ç¬¦.html-Bfz-Re_C.js" as="script"><link rel="prefetch" href="/book/assets/04-æµç¨‹æ§åˆ¶-ä¸Š.html-DT1cw7I4.js" as="script"><link rel="prefetch" href="/book/assets/05-æµç¨‹æ§åˆ¶-ä¸‹.html-Ckqa-odp.js" as="script"><link rel="prefetch" href="/book/assets/06_åºåˆ—ç±»å‹-å­—ç¬¦ä¸².html-B_yGB5x7.js" as="script"><link rel="prefetch" href="/book/assets/07_åºåˆ—ç±»å‹-åˆ—è¡¨_å…ƒç»„.html-LqUCBPdj.js" as="script"><link rel="prefetch" href="/book/assets/08_æ•£åˆ—ç±»å‹-å­—å…¸ä¸é›†åˆ.html-DbR2PFGy.js" as="script"><link rel="prefetch" href="/book/assets/09_å‡½æ•°åŸºç¡€ä¸Š.html-BzN8qjAi.js" as="script"><link rel="prefetch" href="/book/assets/10_å‡½æ•°åŸºç¡€ä¸‹.html-hlpQboo1.js" as="script"><link rel="prefetch" href="/book/assets/11_ä½œç”¨åŸŸä¸åŒ¿åå‡½æ•°.html-n_9mcxfy.js" as="script"><link rel="prefetch" href="/book/assets/12_åŒ¿åå‡½æ•°_å†…ç½®é«˜é˜¶å‡½æ•°.html-vW4aB9W0.js" as="script"><link rel="prefetch" href="/book/assets/13_è£…é¥°å™¨_è¿­ä»£å™¨_ç”Ÿæˆå™¨.html-BZy3eIe2.js" as="script"><link rel="prefetch" href="/book/assets/14_æ–‡ä»¶æ“ä½œ.html-CFpxr1BK.js" as="script"><link rel="prefetch" href="/book/assets/15_æ¨¡å—ä¸åŒ….html-BZ6BwcMG.js" as="script"><link rel="prefetch" href="/book/assets/16_ç¬¬ä¸‰æ–¹æ¨¡å—ä¸å¸¸ç”¨æ¨¡å—.html-B4RbmvFl.js" as="script"><link rel="prefetch" href="/book/assets/17_åˆè¯†é¢å‘å¯¹è±¡.html-DsgaKN4x.js" as="script"><link rel="prefetch" href="/book/assets/18_é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹å¾â€”å°è£….html-B_e6k8bO.js" as="script"><link rel="prefetch" href="/book/assets/19_é¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹å¾â€”ç»§æ‰¿_å¤šæ€.html-BIyW1YH-.js" as="script"><link rel="prefetch" href="/book/assets/20_ç»‘å®šæ–¹æ³•_å†…ç½®æ–¹æ³•_å¼‚å¸¸.html-DWM_5P6a.js" as="script"><link rel="prefetch" href="/book/assets/21_ç½‘ç»œç¼–ç¨‹åŸºç¡€.html-HVMutCd_.js" as="script"><link rel="prefetch" href="/book/assets/22_socketå¥—æ¥å­—.html-j2VR8yfH.js" as="script"><link rel="prefetch" href="/book/assets/23_éé˜»å¡_IOå¤šè·¯å¤ç”¨.html-DvZuAgRm.js" as="script"><link rel="prefetch" href="/book/assets/24_ç²˜åŒ…_ç½‘ç›˜é¡¹ç›®.html-ClBAQAzW.js" as="script"><link rel="prefetch" href="/book/assets/pyæ€»ç»“.html-Bv1u92-8.js" as="script"><link rel="prefetch" href="/book/assets/index.html-NutyAhEj.js" as="script"><link rel="prefetch" href="/book/assets/ç½‘ç›˜é¡¹ç›®.html-C2_-x3MD.js" as="script"><link rel="prefetch" href="/book/assets/01-çˆ¬è™«ç®€ä»‹.html-BRkdbD1B.js" as="script"><link rel="prefetch" href="/book/assets/02-requestsè¯·æ±‚.html-BLoscXGp.js" as="script"><link rel="prefetch" href="/book/assets/03-æ­£åˆ™.html-C5ihaAZR.js" as="script"><link rel="prefetch" href="/book/assets/04-è§£ææ•°æ®.html-BEVSqoPx.js" as="script"><link rel="prefetch" href="/book/assets/05-selenium.html-Bm_Fjumn.js" as="script"><link rel="prefetch" href="/book/assets/06-DrissionPage.html-Bui7TOJ7.js" as="script"><link rel="prefetch" href="/book/assets/07-è¿›ç¨‹å’Œçº¿ç¨‹ä¸åç¨‹.html-D3kg7DnK.js" as="script"><link rel="prefetch" href="/book/assets/08-fiddler.html-CkNqsSIB.js" as="script"><link rel="prefetch" href="/book/assets/10-scrapyåˆ†å¸ƒå¼.html-n2-qL1KL.js" as="script"><link rel="prefetch" href="/book/assets/11-Elasticsearch.html-D7d7V8L2.js" as="script"><link rel="prefetch" href="/book/assets/12-jsé€†å‘-01.html-pyRdDjdB.js" as="script"><link rel="prefetch" href="/book/assets/12-jsé€†å‘-02.html-CRNn5gwl.js" as="script"><link rel="prefetch" href="/book/assets/13-é€†å‘æ¡ˆä¾‹.html-C2fdPL5I.js" as="script"><link rel="prefetch" href="/book/assets/index.html-D3iKzcJy.js" as="script"><link rel="prefetch" href="/book/assets/è¡¥å…….html-CSB7D3zh.js" as="script"><link rel="prefetch" href="/book/assets/h501-å…¨å±ä¸ä¸Šä¼ .html-jYqaHZ0U.js" as="script"><link rel="prefetch" href="/book/assets/h502-æ‹–æ‹½.html-3hcUM-HR.js" as="script"><link rel="prefetch" href="/book/assets/h503-è§†é¢‘-éŸ³é¢‘.html-Cmo19eUT.js" as="script"><link rel="prefetch" href="/book/assets/h504-åŸç”Ÿç§»åŠ¨ç«¯.html-CHmQJ5mx.js" as="script"><link rel="prefetch" href="/book/assets/h505-canvas.html-Y9P15JdC.js" as="script"><link rel="prefetch" href="/book/assets/h506-worker.html-BZeCXLju.js" as="script"><link rel="prefetch" href="/book/assets/h507-map.html-XPbe1Kaz.js" as="script"><link rel="prefetch" href="/book/assets/h508-WebSocket.html-8RpsrV4D.js" as="script"><link rel="prefetch" href="/book/assets/index.html-CTw3vJmK.js" as="script"><link rel="prefetch" href="/book/assets/ts01-TypeScript.html-CemW3hRO.js" as="script"><link rel="prefetch" href="/book/assets/ts02-ç±»å‹.html-CITJHHe6.js" as="script"><link rel="prefetch" href="/book/assets/ts03-ç±»å‹è¿›çº§.html-B9BeWh3u.js" as="script"><link rel="prefetch" href="/book/assets/ts04-è¡¥å…….html-BNQaUmuK.js" as="script"><link rel="prefetch" href="/book/assets/index.html-CSoP9hVN.js" as="script"><link rel="prefetch" href="/book/assets/vite-vueCli.html-DcykKrVc.js" as="script"><link rel="prefetch" href="/book/assets/vue3-01å¼€å§‹.html-f8ZnjFNF.js" as="script"><link rel="prefetch" href="/book/assets/vue3-02æŒ‡ä»¤.html-Cn-TzfgN.js" as="script"><link rel="prefetch" href="/book/assets/vue3-03å“åº”å¼æ•°æ®.html-DURuRhMk.js" as="script"><link rel="prefetch" href="/book/assets/vue3-04é€‰é¡¹å¼API.html-LxMy5nEo.js" as="script"><link rel="prefetch" href="/book/assets/vue3-05ç»„ä»¶-è„šæ‰‹æ¶-ç”Ÿå‘½å‘¨æœŸ.html-B4CFD-Sh.js" as="script"><link rel="prefetch" href="/book/assets/vue3-06ç»„ä»¶ä¸ä¼ å€¼.html-BC1J1gka.js" as="script"><link rel="prefetch" href="/book/assets/vue3-07å†…ç½®å†…å®¹.html-BsYOXOtj.js" as="script"><link rel="prefetch" href="/book/assets/vue3-08vuex.html-CihtBzma.js" as="script"><link rel="prefetch" href="/book/assets/vue3-09Router.html-vdjq1eom.js" as="script"><link rel="prefetch" href="/book/assets/vue3-10ç»„åˆå¼åŸºç¡€.html-BNux3tkS.js" as="script"><link rel="prefetch" href="/book/assets/vue3-11ç»„åˆå¼å†…ç½®.html-DRyn5X4o.js" as="script"><link rel="prefetch" href="/book/assets/vue3-12ç»„åˆå¼API.html-BvPu16pj.js" as="script"><link rel="prefetch" href="/book/assets/vue3-13pinia.html-DSfCn-tf.js" as="script"><link rel="prefetch" href="/book/assets/vueæ¨èé£æ ¼.html-CKa6Hrom.js" as="script"><link rel="prefetch" href="/book/assets/vueè¡¥å……å†…å®¹.html-DjBpGrgR.js" as="script"><link rel="prefetch" href="/book/assets/é…ç½®æ–‡ä»¶.html-BRaalcjK.js" as="script"><link rel="prefetch" href="/book/assets/404.html-NdzkZIAC.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/book/"><!----><span class="vp-site-name" aria-hidden="true">ç¬”è®°åˆ†æ</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/htmlcss/" aria-label="HTML/CSS"><!--[--><!--[--><!--]--><!--]-->HTML/CSS<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/javaScript/" aria-label="JavaScript"><!--[--><!--[--><!--]--><!--]-->JavaScript<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/node/" aria-label="Node"><!--[--><!--[--><!--]--><!--]-->Node<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/vue/" aria-label="Vue"><!--[--><!--[--><!--]--><!--]-->Vue<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/react/" aria-label="React"><!--[--><!--[--><!--]--><!--]-->React<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/python/" aria-label="Python"><!--[--><!--[--><!--]--><!--]-->Python<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/django/" aria-label="Django"><!--[--><!--[--><!--]--><!--]-->Django<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/book/spider/" aria-label="Spider"><!--[--><!--[--><!--]--><!--]-->Spider<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/supplementary/" aria-label="è¡¥å……çŸ¥è¯†"><!--[--><!--[--><!--]--><!--]-->è¡¥å……çŸ¥è¯†<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/htmlcss/" aria-label="HTML/CSS"><!--[--><!--[--><!--]--><!--]-->HTML/CSS<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/javaScript/" aria-label="JavaScript"><!--[--><!--[--><!--]--><!--]-->JavaScript<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/node/" aria-label="Node"><!--[--><!--[--><!--]--><!--]-->Node<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/vue/" aria-label="Vue"><!--[--><!--[--><!--]--><!--]-->Vue<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/react/" aria-label="React"><!--[--><!--[--><!--]--><!--]-->React<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/python/" aria-label="Python"><!--[--><!--[--><!--]--><!--]-->Python<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/django/" aria-label="Django"><!--[--><!--[--><!--]--><!--]-->Django<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/book/spider/" aria-label="Spider"><!--[--><!--[--><!--]--><!--]-->Spider<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/book/supplementary/" aria-label="è¡¥å……çŸ¥è¯†"><!--[--><!--[--><!--]--><!--]-->è¡¥å……çŸ¥è¯†<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/book/spider/01-%E7%88%AC%E8%99%AB%E7%AE%80%E4%BB%8B.html" aria-label="01-çˆ¬è™«ç®€ä»‹"><!--[--><!--[--><!--]--><!--]-->01-çˆ¬è™«ç®€ä»‹<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/book/spider/02-requests%E8%AF%B7%E6%B1%82.html" aria-label="02-requestsè¯·æ±‚"><!--[--><!--[--><!--]--><!--]-->02-requestsè¯·æ±‚<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/book/spider/03-%E6%AD%A3%E5%88%99.html" aria-label="03-æ­£åˆ™"><!--[--><!--[--><!--]--><!--]-->03-æ­£åˆ™<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/book/spider/04-%E8%A7%A3%E6%9E%90%E6%95%B0%E6%8D%AE.html" aria-label="04-è§£ææ•°æ®"><!--[--><!--[--><!--]--><!--]-->04-è§£ææ•°æ®<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/book/spider/05-selenium.html" aria-label="05-selenium"><!--[--><!--[--><!--]--><!--]-->05-selenium<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/book/spider/06-DrissionPage.html" aria-label="06-DrissionPage"><!--[--><!--[--><!--]--><!--]-->06-DrissionPage<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/book/spider/07-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%8D%8F%E7%A8%8B.html" aria-label="07-è¿›ç¨‹å’Œçº¿ç¨‹ä¸åç¨‹"><!--[--><!--[--><!--]--><!--]-->07-è¿›ç¨‹å’Œçº¿ç¨‹ä¸åç¨‹<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/book/spider/08-fiddler.html" aria-label="08-fiddler"><!--[--><!--[--><!--]--><!--]-->08-fiddler<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active" href="/book/spider/09-Scrapy.html" aria-label="09-Scrapy"><!--[--><!--[--><!--]--><!--]-->09-Scrapy<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/book/spider/10-scrapy%E5%88%86%E5%B8%83%E5%BC%8F.html" aria-label="10-scrapyåˆ†å¸ƒå¼"><!--[--><!--[--><!--]--><!--]-->10-scrapyåˆ†å¸ƒå¼<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/book/spider/11-Elasticsearch.html" aria-label="11-Elasticsearch"><!--[--><!--[--><!--]--><!--]-->11-Elasticsearch<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/book/spider/12-js%E9%80%86%E5%90%91-01.html" aria-label="12-jsé€†å‘-01"><!--[--><!--[--><!--]--><!--]-->12-jsé€†å‘-01<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/book/spider/12-js%E9%80%86%E5%90%91-02.html" aria-label="12-jsé€†å‘-02"><!--[--><!--[--><!--]--><!--]-->12-jsé€†å‘-02<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/book/spider/13-%E9%80%86%E5%90%91%E6%A1%88%E4%BE%8B.html" aria-label="13-é€†å‘æ¡ˆä¾‹"><!--[--><!--[--><!--]--><!--]-->13-é€†å‘æ¡ˆä¾‹<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/book/spider/%E8%A1%A5%E5%85%85.html" aria-label="è¡¥å……"><!--[--><!--[--><!--]--><!--]-->è¡¥å……<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h2 id="scrapyçš„æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#scrapyçš„æ¦‚å¿µ"><span>scrapyçš„æ¦‚å¿µ</span></a></h2><p><strong>Scrapyæ˜¯ä¸€ä¸ªPythonç¼–å†™çš„å¼€æºç½‘ç»œçˆ¬è™«æ¡†æ¶ã€‚å®ƒæ˜¯ä¸€ä¸ªè¢«è®¾è®¡ç”¨äºçˆ¬å–ç½‘ç»œæ•°æ®ã€æå–ç»“æ„æ€§æ•°æ®çš„æ¡†æ¶ã€‚</strong></p><p>ä½œç”¨: é€šè¿‡å°‘é‡çš„ä»£ç ï¼Œå°±èƒ½å¤Ÿå¿«é€Ÿçš„æŠ“å– ,æ¡†æ¶æ˜¯ä»£ç çš„åŠæˆå“ï¼Œæé«˜æ•ˆç‡ï¼ˆçˆ¬è™«æ•ˆç‡å’Œå¼€å‘æ•ˆç‡ï¼‰</p><p>å®˜ç½‘åœ°å€: http://scrapy-chs.readthedocs.io/zh_CN/1.0/intro/overview.html</p><h3 id="çˆ¬è™«å·¥ä½œæµç¨‹" tabindex="-1"><a class="header-anchor" href="#çˆ¬è™«å·¥ä½œæµç¨‹"><span>çˆ¬è™«å·¥ä½œæµç¨‹</span></a></h3><p>å¯ä»¥ä½¿ç”¨pptè¿›è¡Œæ›´æ”¹è®²è§£</p><img src="https://api2.mubu.com/v3/document_image/7637318_11a2b4a1-fc75-4202-eaa6-95215793b058.png" referrerpolicy="no-referrer"><p>å¯ä»¥æ”¹å†™æˆä¸‹æ–¹ç¤ºä¾‹:</p><img src="https://api2.mubu.com/v3/document_image/7637318_ea21ff4c-ec67-4333-e4e6-f4b560014ecf.png" referrerpolicy="no-referrer"><h3 id="scrapyçš„æµç¨‹" tabindex="-1"><a class="header-anchor" href="#scrapyçš„æµç¨‹"><span>scrapyçš„æµç¨‹</span></a></h3><img src="https://api2.mubu.com/v3/document_image/7637318_a5056c84-9f58-486e-d1a0-5a5429600ce4.png" referrerpolicy="no-referrer"><h4 id="å…¶æµç¨‹å¯ä»¥æè¿°å¦‚ä¸‹" tabindex="-1"><a class="header-anchor" href="#å…¶æµç¨‹å¯ä»¥æè¿°å¦‚ä¸‹"><span>å…¶æµç¨‹å¯ä»¥æè¿°å¦‚ä¸‹ï¼š</span></a></h4><p>ç”¨æˆ·è¿è¡Œçˆ¬è™«è„šæœ¬åï¼ŒScrapy Engine åˆå§‹åŒ–ï¼Œå¹¶åŠ è½½ Spider ä¸­å®šä¹‰çš„èµ·å§‹ URL</p><ol><li>å°†Spidersçš„URL <ul><li>ä¼ è¾“ â†’ Spider Middlewares(çˆ¬è™«ä¸­é—´ä»¶)è¿›è¡Œè®¾ç½®è¯·æ±‚å¯¹è±¡</li><li>ä¼ è¾“ â†’ Scrapy Engine(å¼•æ“ ==&gt; æ§åˆ¶ä¸­å¿ƒ)</li></ul></li><li>Scrapy Engineæ¥æ”¶spider middleware æ•°æ®ä¿¡æ¯ <ul><li>å°†æ•°æ®ä¿¡æ¯å‘é€ â†’ scheduler(è°ƒåº¦å™¨)è¿›è¡Œå¤„ç†</li></ul></li><li>schedulerå°†æ¥æ”¶åˆ°çš„æ•°æ®ä¿¡æ¯(request)ç”Ÿæˆé˜Ÿåˆ— (ç®¡ç†requestè¯·æ±‚çš„) <ul><li>å°†requestè¯·æ±‚ä¿¡æ¯å‘é€ â†’ Engineå¼•æ“,å†å‘é€ â†’ Downloader middleware(ä¸‹è½½ä¸­é—´ä»¶)</li><li>ä»ä¸‹è½½ä¸­é—´ä»¶å‘é€ â†’ downloader(ä¸‹è½½å™¨)</li></ul></li><li>downloaderæ¥æ”¶è¯·æ±‚ä¿¡æ¯ <ul><li>downloader è·å–è¯·æ±‚ä¿¡æ¯å,ä¼šè¯·æ±‚å¯¹äºçš„ç½‘ç»œåœ°å€çš„æ•°æ®,å¹¶è¿”å›æ•°æ®response</li><li>å°†responseæ•°æ®è¿”å› â†’ Downloader middleware(ä¸‹è½½ä¸­é—´ä»¶) â†’ Engineå¼•æ“å°†responseæ•°æ®å‘é€ â†’ Spider Middlewares(çˆ¬è™«ä¸­é—´ä»¶) â†’ Spiders</li></ul></li><li>Spiders è§£æ <code>Response</code>ï¼Œæå–æ•°æ®æˆ–æ–°é“¾æ¥ <ul><li><strong>æ–° Request</strong> â†’ è¿”å›ç»™ Engineï¼Œè¿›å…¥ä¸‹ä¸€è½®è°ƒåº¦</li><li><strong>ç»“æ„åŒ–æ•°æ®ï¼ˆItemï¼‰</strong> â†’ å¼•æ“â†’ äº¤ç»™ <code>Item Pipeline</code> å¤„ç†ã€‚</li></ul></li></ol><p>æ³¨æ„: å»é‡æ˜¯æ ¹æ®urlè¿›è¡Œå»é‡çš„</p><h4 id="æ¨¡å—ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#æ¨¡å—ä½œç”¨"><span>æ¨¡å—ä½œç”¨</span></a></h4><ul><li><p>å¼•æ“(engine)ï¼šè´Ÿè´£æ•°æ®å’Œä¿¡å·åœ¨ä¸åŒæ¨¡å—é—´çš„ä¼ é€’(ä¸­æ¢æ§åˆ¶å™¨ï¼Œåè°ƒæ‰€æœ‰ç»„ä»¶çš„æ•°æ®æµ)</p></li><li><p>è°ƒåº¦å™¨(scheduler)ï¼šç®¡ç†å¾…çˆ¬å–çš„ <code>Request</code> é˜Ÿåˆ—ï¼ˆURL æ„æˆçš„è¯·æ±‚å¯¹è±¡ï¼‰æ¯”å¦‚: å»é‡</p></li><li><p>ä¸‹è½½å™¨(downloader)ï¼šå‘é€å¼•æ“å‘è¿‡æ¥çš„requestè¯·æ±‚ï¼Œè·å–å“åº”ï¼Œå¹¶å°†å“åº”äº¤ç»™å¼•æ“</p></li><li><p>çˆ¬è™«(spider)ï¼šå¤„ç†å¼•æ“å‘è¿‡æ¥çš„responseï¼Œæå–æ•°æ®ï¼Œæå–urlï¼Œå¹¶äº¤ç»™å¼•æ“</p></li><li><p>ç®¡é“(pipeline)ï¼šå¤„ç†å¼•æ“ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼Œæ¯”å¦‚å­˜å‚¨</p></li><li><p>ä¸‹è½½ä¸­é—´ä»¶(downloader middleware)ï¼šå¯ä»¥è‡ªå®šä¹‰çš„ä¸‹è½½æ‰©å±•ï¼Œæ¯”å¦‚è®¾ç½®ä»£ç†ip</p><ul><li>é¢„å¤„ç† <code>Request</code>ï¼ˆå¦‚è‡ªåŠ¨é‡è¯•ã€æ›´æ¢ä»£ç†ï¼‰</li><li>åå¤„ç† <code>Response</code>ï¼ˆå¦‚ä¿®æ”¹å“åº”å†…å®¹ã€è¿‡æ»¤å¼‚å¸¸é¡µé¢)</li></ul></li><li><p>çˆ¬è™«ä¸­é—´ä»¶(spider middleware)ï¼šå¯ä»¥è‡ªå®šä¹‰requestè¯·æ±‚å’Œè¿›è¡Œresponseè¿‡æ»¤ï¼Œä¸ä¸‹è½½ä¸­é—´ä»¶ä½œç”¨é‡å¤</p><ul><li>å¹²é¢„ Spider çš„è¾“å…¥ï¼ˆ<code>Response</code>ï¼‰å’Œè¾“å‡ºï¼ˆ<code>Item/Request</code>ï¼‰</li></ul></li></ul><img src="https://api2.mubu.com/v3/document_image/7637318_54251048-c8c4-4629-8cb7-b91ad1ab0c95.png" referrerpolicy="no-referrer"><h3 id="scrapy" tabindex="-1"><a class="header-anchor" href="#scrapy"><span>Scrapy</span></a></h3><blockquote><p>windows/Macå®‰è£…å‘½ä»¤</p></blockquote><p><code>pip/pip3 install scrapy </code></p><blockquote><p>é¡¹ç›®æµç¨‹å‘½ä»¤</p></blockquote><ol><li>åˆ›å»ºé¡¹ç›®: <code>scrapy startproject é¡¹ç›®å</code></li><li>åˆ›å»ºä¸€ä¸ªçˆ¬è™«: <code>scrapy genspider æ–‡ä»¶åç§° çˆ¬è™«çš„ç½‘é¡µåŸŸå</code><ul><li>åˆ›å»ºåä¼šç”Ÿæˆåœ¨spideræ–‡ä»¶å¤¹ä¸­</li><li>ç¤ºä¾‹: <code>scrapy genspider lianjia cs.lianjia.com</code></li></ul></li><li>æå–æ•°æ®: æ ¹æ®ç½‘ç«™ç»“æ„åœ¨spiderä¸­å®ç°æ•°æ®é‡‡é›†ç›¸å…³å†…å®¹</li><li>ä¿å­˜æ•°æ®: ä½¿ç”¨pipelineè¿›è¡Œæ•°æ®åç»­å¤„ç†å’Œä¿å­˜</li></ol><h4 id="ç›®å½•ç»“æ„å¦‚ä¸‹" tabindex="-1"><a class="header-anchor" href="#ç›®å½•ç»“æ„å¦‚ä¸‹"><span>ç›®å½•ç»“æ„å¦‚ä¸‹</span></a></h4><p><img src="https://api2.mubu.com/v3/document_image/7637318_8ab03997-2137-455d-da96-95bfc4b41fbd.png" alt=""></p><ul><li><code>scrapy.cfg</code> é¡¹ç›®é…ç½®æ–‡ä»¶ï¼Œ ä¸éœ€è¦åšæ”¹åŠ¨</li><li><code>items.py</code> å®šä¹‰æ•°æ®å­˜å‚¨æ¨¡å‹</li><li><code>middlewares.py</code> ç”¨äºç¼–å†™ä¸­é—´ä»¶ï¼ˆä¸‹è½½ä¸­é—´ä»¶+çˆ¬è™«ä¸­é—´ä»¶ï¼‰ -- æ— ç‰¹æ®Šéœ€æ±‚ï¼Œä¸€èˆ¬ä¸éœ€è¦ç¼–å†™</li><li>spidersæ–‡ä»¶å¤¹å®šä¹‰çš„çˆ¬è™«æ–‡ä»¶ <code>lianjia.py </code>ï¼ˆçˆ¬è™«æ–‡ä»¶,æ–‡ä»¶åç§°è‡ªå·±å®šä¹‰ï¼‰ [åé¢å†æ¥å®Œå–„è¯¥çˆ¬è™«æ¨¡å—]</li><li><code>pipelines.py</code> ç®¡é“ -- ä¸»è¦ç”¨äºç¼–å†™æ•°æ®å¤„ç†æ­¥éª¤ ï¼ˆæ•°æ®çš„æ¸…æ´—+ä¿å­˜ï¼‰</li><li><code>settings.py</code> è¯¦ç»†çš„é…ç½®ä¿¡æ¯ï¼ˆè®¾ç½®æ–‡ä»¶USER_AGENT å¹¶å¯åŠ¨ç®¡é“)</li></ul><h4 id="åˆæ­¥ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#åˆæ­¥ä½¿ç”¨"><span>åˆæ­¥ä½¿ç”¨</span></a></h4><blockquote><p>ä¸å…è®¸ä¸­æ–‡æ³¨é‡Š</p></blockquote><p><code>settings.py</code> æ–‡ä»¶ åªéœ€ä¿®æ”¹<code>ROBOTSTXT_OBEY</code></p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># ğŸ”µã€åŸºç¡€é…ç½®ã€‘</span></span>
<span class="line">BOT_NAME <span class="token operator">=</span> <span class="token string">&quot;scrapymax&quot;</span>  <span class="token comment"># ğŸŸ¢ é¡¹ç›®æ ‡è¯†ï¼ˆä¼šä½œä¸ºé»˜è®¤User-Agentå‰ç¼€ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸŸ£ã€çˆ¬è™«è·¯å¾„é…ç½®ã€‘</span></span>
<span class="line">SPIDER_MODULES <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;scrapymax.spiders&quot;</span><span class="token punctuation">]</span>  <span class="token comment"># ğŸ”µ æŒ‡å®šçˆ¬è™«æ¨¡å—è·¯å¾„</span></span>
<span class="line">NEWSPIDER_MODULE <span class="token operator">=</span> <span class="token string">&quot;scrapymax.spiders&quot;</span>  <span class="token comment"># ğŸ”µ æ–°å»ºçˆ¬è™«çš„é»˜è®¤ä½ç½®</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸŸ ã€æ‰©å±•æ’ä»¶ã€‘ï¼ˆéœ€æ‰‹åŠ¨æ·»åŠ ï¼‰</span></span>
<span class="line">ADDONS <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment"># ğŸŸ¡ é¢„ç•™çš„è‡ªå®šä¹‰æ‰©å±•é…ç½®å­—å…¸</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸ”´ã€çˆ¬è™«ä¼ªè£…ã€‘ # ğŸŸ¤ å»ºè®®å–æ¶ˆæ³¨é‡Šå¹¶ä¿®æ”¹ä¸ºçœŸå®UA</span></span>
<span class="line">USER_AGENT <span class="token operator">=</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36&quot;</span>  </span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸŸ¢ã€çˆ¬è™«åè®®ã€‘ åº”ä¸ºfalse</span></span>
<span class="line">ROBOTSTXT_OBEY <span class="token operator">=</span> <span class="token boolean">False</span>  <span class="token comment"># ğŸŸ  æ˜¯å¦éµå®ˆrobots.txtè§„åˆ™ï¼ˆæ­£å¼ç¯å¢ƒå»ºè®®Trueï¼‰</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ğŸŸ¢ çœŸå®æµè§ˆå™¨UA</span></span>
<span class="line">USER_AGENT <span class="token operator">=</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36&quot;</span>  </span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ§åˆ¶ â€‹â€‹å¹¶å‘è¯·æ±‚æ•°é‡â€‹â€‹ </span></span>
<span class="line">CONCURRENT_REQUESTS <span class="token operator">=</span> <span class="token number">4</span></span>
<span class="line"><span class="token comment"># å¯¹åŒä¸€ä¸ªåŸŸåï¼ˆç½‘ç«™ï¼‰**åŒæ—¶æœ€å¤šå‘ 2 ä¸ªè¯·æ±‚**ï¼ˆé¿å…è¯·æ±‚å¤ªçŒ›è¢«å°ï¼‰ã€‚</span></span>
<span class="line">CONCURRENT_REQUESTS_PER_DOMAIN <span class="token operator">=</span> <span class="token number">2</span></span>
<span class="line"><span class="token comment"># æ¯å‘ä¸€ä¸ªè¯·æ±‚åï¼Œ**ç­‰å¾… 1 ç§’**å†å‘ä¸‹ä¸€ä¸ªï¼ˆé™ä½é¢‘ç‡ï¼Œé˜²æ­¢è¢«å°ï¼‰</span></span>
<span class="line">DOWNLOAD_DELAY <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ä¿å®ˆç­–ç•¥ï¼ˆé€‚åˆæ–°æ‰‹æˆ–æ•æ„Ÿç½‘ç«™ï¼‰â€‹</span></span>
<span class="line">CONCURRENT_REQUESTS <span class="token operator">=</span> <span class="token number">4</span>  <span class="token comment"># å…¨å±€å¹¶å‘4</span></span>
<span class="line">CONCURRENT_REQUESTS_PER_DOMAIN <span class="token operator">=</span> <span class="token number">2</span>  <span class="token comment"># æ¯ä¸ªåŸŸåå¹¶å‘2</span></span>
<span class="line">DOWNLOAD_DELAY <span class="token operator">=</span> <span class="token number">1</span>  <span class="token comment"># æ¯æ¬¡è¯·æ±‚é—´éš”1ç§’</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># ç®¡é“é…ç½®</span></span>
<span class="line">ITEM_PIPELINES <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token string">&quot;scrapymax.pipelines.ScrapymaxPipeline&quot;</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token comment">#ç®¡é“æ–‡ä»¶åœ°å€ä»¥åŠæ–‡ä»¶ä¸­çš„ç±»å   æ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</span></span>
<span class="line">    	</span>
<span class="line">    <span class="token comment"># å¤šä¸ªç®¡é“</span></span>
<span class="line">    <span class="token string">&quot;scrapymax.pipelines.DeduplicationPipeline&quot;</span><span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>  <span class="token comment"># å†å»é‡</span></span>
<span class="line">    <span class="token string">&quot;scrapymax.pipelines.MongoDBPipeline&quot;</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>  <span class="token comment"># æœ€åå­˜æ•°æ®åº“</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>items.py</code> å®šä¹‰çˆ¬è™«çš„æ•°æ®ç±»å‹(å­—æ®µ)</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># æ–¹ä¾¿åç»­çš„ç®¡ç†, å®šä¹‰itemå³æå‰è§„åˆ’å¥½é‚£äº›å­—æ®µéœ€è¦æŠ“,é˜²æ­¢æ‰‹è¯¯,</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ScrapymaxItem</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Item<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># define the fields for your item here like:</span></span>
<span class="line">    name <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># æ ‡é¢˜</span></span>
<span class="line">    price <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># ä»·æ ¼</span></span>
<span class="line">    <span class="token keyword">pass</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>çˆ¬è™«æ–‡ä»¶.py</code> å®šä¹‰çˆ¬è™«</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> scrapy</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">LianjiaSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    name <span class="token operator">=</span> <span class="token string">&quot;lianjia&quot;</span> <span class="token comment">#çˆ¬è™«æ–‡ä»¶çš„åç§°</span></span>
<span class="line">    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;cs.lianjia.com&quot;</span><span class="token punctuation">]</span> <span class="token comment"># åŸŸå</span></span>
<span class="line">    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;https://cs.lianjia.com&quot;</span><span class="token punctuation">]</span> <span class="token comment"># èµ·å§‹çš„è¯·æ±‚è¿æ¥</span></span>
<span class="line">	</span>
<span class="line">    <span class="token comment"># è¯¥æ–¹æ³•ä¼šæ¥æ”¶å¼•æ“ä¼ é€’çš„response</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token comment"># å“åº”ä½“å¯¹è±¡</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token comment">#è¿”å›çš„æ•°æ® æ˜¯bytes ç±»å‹</span></span>
<span class="line">        response<span class="token punctuation">.</span>text  <span class="token comment"># æ–‡æœ¬æ ¼å¼</span></span>
<span class="line">        <span class="token keyword">pass</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è¿è¡Œ" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œ"><span>è¿è¡Œ</span></a></h4><blockquote><p>scrapy crawl çˆ¬è™«æ–‡ä»¶å</p></blockquote><p>ä¼šå‡ºç°æ—¥å¿—ä¿¡æ¯,å¯é€šè¿‡æŒ‡ä»¤ä¸æ˜¾ç¤º</p><blockquote><p>scrapy crawl çˆ¬è™«æ–‡ä»¶å --nolog</p></blockquote><p>ä¸ä¼šå‡ºç°æ—¥å¿—ä¿¡æ¯</p><blockquote><p>è®¾ç½®å¯åŠ¨æ–‡ä»¶,ä¸éœ€è¦å‘½ä»¤å»å¯åŠ¨,</p></blockquote><p>æ³¨æ„: æ–‡ä»¶å¿…é¡»åˆ›å»ºåœ¨é¡¹ç›®çš„æ ¹ç›®å½•</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># è‡ªå®šä¹‰åç§°.py </span></span>
<span class="line"><span class="token keyword">from</span> scrapy <span class="token keyword">import</span> cmdline</span>
<span class="line">cmdline<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;scrapy&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;crawl&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;çˆ¬è™«æ–‡ä»¶åç§°&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">cmdline<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;scrapy&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;crawl&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;lianjia&#39;</span><span class="token punctuation">,</span><span class="token string">&quot;--nolog&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># å»é™¤æ—¥å¿—</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># çˆ¬è™«æ–‡ä»¶</span></span>
<span class="line"><span class="token keyword">import</span> scrapy</span>
<span class="line"><span class="token keyword">from</span> scrapymax<span class="token punctuation">.</span>items <span class="token keyword">import</span> ScrapymaxItem</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">LianjiaSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    name <span class="token operator">=</span> <span class="token string">&quot;lianjia&quot;</span> <span class="token comment">#çˆ¬è™«æ–‡ä»¶çš„åç§°</span></span>
<span class="line">    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;cs.lianjia.com&quot;</span><span class="token punctuation">]</span> <span class="token comment"># åŸŸå</span></span>
<span class="line">    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;https://cs.lianjia.com/zufang/&quot;</span><span class="token punctuation">]</span> <span class="token comment"># èµ·å§‹çš„è¯·æ±‚è¿æ¥</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># extractåªéœ€è¦Selectorå…¶ä¸­çš„æ–‡æœ¬</span></span>
<span class="line">        title <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&#39;//a[@class=&quot;twoline&quot;]/text()&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        pre <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&#39;//span[@class=&quot;content__list--item-price&quot;]/em/text()&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">        <span class="token keyword">for</span> titl<span class="token punctuation">,</span>pric <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span>pre<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            item <span class="token operator">=</span> ScrapymaxItem<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            item<span class="token punctuation">[</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> titl<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            item<span class="token punctuation">[</span><span class="token string">&#39;price&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> pric</span>
<span class="line">            <span class="token comment"># å°†ç»„ä»¶å¥½çš„dictå½¢å¼æ•°æ®é€šè¿‡ yieldè¿”å›ç»™å¼•æ“  ç”±å¼•æ“åˆ¤æ–­æ˜¯å¦è¿”å›ç»™ç®¡é“æ–‡ä»¶</span></span>
<span class="line">            <span class="token keyword">yield</span> item</span>
<span class="line"></span>
<span class="line"><span class="token comment"># itemsæ•°æ®æ–‡ä»¶</span></span>
<span class="line"><span class="token keyword">import</span> scrapy</span>
<span class="line"><span class="token comment"># è®¾è®¡è·å–çš„æ•°æ®å­—å…¸</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ScrapymaxItem</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Item<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    name <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    price <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">pass</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># pipelines ç®¡é“æ–‡ä»¶ ä¸»è¦ç”¨äºç¼–å†™æ•°æ®å¤„ç†æ­¥éª¤  éœ€è¦åˆ°settings.pyä¸­å¼€å¯ç®¡é“</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ScrapymaxPipeline</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span><span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;./12.json&quot;</span><span class="token punctuation">,</span> <span class="token string">&#39;w&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">process_item</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> item<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># print(type(item), &quot;å¼•æ“å‘é€çš„&quot;) è·å–çš„æ˜¯ä¸€ä¸ªclassçš„æ•°æ®</span></span>
<span class="line">        dict_item <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">#  ensure_ascii=False ç¦ç”¨ASCIIè½¬ä¹‰â€‹â€‹ï¼Œç›´æ¥è¾“å‡ºåŸå§‹å­—ç¬¦</span></span>
<span class="line">        data <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>dict_item<span class="token punctuation">,</span> ensure_ascii<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;\n&quot;</span></span>
<span class="line">        self<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>item<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment"># ä¸èƒ½åˆ é™¤,æ•°æ®éœ€è¦è¿›è¡Œè¿”å›å¼•æ“çš„</span></span>
<span class="line">        <span class="token keyword">return</span> item</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ä¸‹è½½ä¸­é—´å™¨(downloader middleware)ä½¿ç”¨</p></blockquote><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># middlewares.py   è®¾ç½®ä¸‹è½½ä¸­é—´ä»¶æˆ–çˆ¬è™«ä¸­é—´ä»¶</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ScrapymaxDownloaderMiddleware</span><span class="token punctuation">:</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment"># åœ¨è¯·æ±‚è¢«å‘é€åˆ°ä¸‹è½½å™¨ä¹‹å‰æ‹¦æˆªå¹¶å¤„ç†è¯·æ±‚</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">process_request</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;requests&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>url<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># éœ€è¦åœ¨setting.pyè¿›è¡Œé…ç½®</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ•°å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼‰ã€‚Scrapy å†…ç½®ä¸­é—´ä»¶çš„ä¼˜å…ˆçº§é€šå¸¸åœ¨ 500-800 ä¹‹é—´</span></span>
<span class="line">DOWNLOADER_MIDDLEWARES <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment"># ç±»åä½ç½®</span></span>
<span class="line">   <span class="token string">&quot;scrapymax.middlewares.ScrapymaxDownloaderMiddleware&quot;</span><span class="token punctuation">:</span> <span class="token number">543</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="requestä¸responseå±æ€§" tabindex="-1"><a class="header-anchor" href="#requestä¸responseå±æ€§"><span>requestä¸responseå±æ€§</span></a></h4><p>requestè¯·æ±‚å¯¹è±¡çš„å¸¸ç”¨å±æ€§</p><ol><li>request.urlï¼ˆå¿…é€‰ï¼‰ï¼šè¯·æ±‚é¡µé¢çš„urlåœ°å€ï¼Œbytesæˆ–strç±»å‹ã€‚</li><li>request.callbackï¼šé¡µé¢è§£æå‡½æ•°ï¼ŒCallbackç±»å‹ï¼ŒRequestè¯·æ±‚å¯¹è±¡çš„é¡µé¢ä¸‹è½½å®Œæˆåï¼Œç”±è¯¥å‚æ•°æŒ‡å®šçš„é¡µé¢è§£æå‡½æ•°è§£æé¡µé¢ï¼Œå¦‚æœæœªä¼ é€’è¯¥å‚æ•°ï¼Œé»˜è®¤è°ƒç”¨Spiderçš„parseæ–¹æ³•ã€‚</li><li>request.methodï¼šHTTPè¯·æ±‚çš„æ–¹æ³•ï¼Œé»˜è®¤ä¸ºâ€˜GETâ€™ã€‚</li><li>request.headersï¼šHTTPè¯·æ±‚çš„å¤´éƒ¨å­—å…¸ï¼Œdict ç±»å‹ã€‚</li><li>request.metaï¼šRequest çš„å…ƒæ•°æ®å­—å…¸ï¼Œdict ç±»å‹ï¼Œç”¨äºç»™æ¡†æ¶ä¸­å…¶ä»–ç»„ä»¶ä¼ é€’ä¿¡æ¯ï¼Œæ¯”å¦‚ä¸­é—´ä»¶ Item Pipelineã€‚å…¶ä»–ç»„ä»¶å¯ä»¥ä½¿ç”¨Request å¯¹è±¡çš„ meta å±æ€§è®¿é—®è¯¥å…ƒæ•°æ®å­—å…¸ (request.meta), ä¹Ÿç”¨äºç»™å“åº”å¤„ç†å‡½æ•°ä¼ é€’ä¿¡æ¯ã€‚</li><li>request.encodingï¼šurl å’Œ body å‚æ•°çš„ç¼–ç é»˜è®¤ä¸º&#39;utf-8&#39;ã€‚å¦‚æœä¼ å…¥çš„urlæˆ–bodyå‚æ•°æ˜¯str ç±»å‹ï¼Œå°±ä½¿ç”¨è¯¥å‚æ•°è¿›è¡Œç¼–ç ã€‚</li><li>request.dont_filterï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ˆdont_filter=Falseï¼‰,å¯¹åŒä¸€ä¸ªurlåœ°å€å¤šæ¬¡æäº¤ä¸‹è½½è¯·æ±‚ï¼Œåé¢çš„è¯·æ±‚ä¼šè¢«å»é‡è¿‡æ»¤å™¨è¿‡æ»¤ï¼ˆé¿å…é‡å¤ä¸‹è½½ï¼‰ã€‚å¦‚æœå°†è¯¥å‚æ•°ç½®ä¸ºTrueï¼Œå¯ä»¥ä½¿è¯·æ±‚é¿å…è¢«è¿‡æ»¤ï¼Œå¼ºåˆ¶ä¸‹è½½ã€‚ä¾‹å¦‚ï¼šåœ¨å¤šæ¬¡çˆ¬å–ä¸€ä¸ªå†…å®¹éšæ—¶é—´è€Œå˜åŒ–çš„é¡µé¢æ—¶ï¼ˆæ¯æ¬¡ä½¿ç”¨ç›¸åŒçš„urlï¼‰ï¼Œå¯ä»¥å°†è¯¥å‚æ•°è®¾ç½®ä¸ºTrueã€‚</li></ol><p>responseå“åº”å¯¹è±¡çš„å¸¸ç”¨å±æ€§</p><ol><li>response.urlï¼šè·å–å½“å‰å“åº”çš„urlåœ°å€</li><li>response.request.urlï¼šè·å–å½“å‰å“åº”å¯¹åº”çš„è¯·æ±‚çš„urlåœ°å€</li><li>response.headersï¼šè·å–å“åº”å¤´</li><li>response.urljoin(url) ï¼šç”¨äºæ„é€ ç»å¯¹url, å½“ä¼ å…¥çš„urlå‚æ•°æ˜¯ä¸€ä¸ªç›¸å¯¹åœ°å€æ—¶, æ ¹æ®response.urlè®¡ç®—å‡ºç›¸åº”çš„ç»å¯¹url.</li><li>response.bodyï¼šè·å–å“åº”ä½“ï¼Œä¹Ÿå°±æ˜¯htmlä»£ç ï¼Œbyteç±»å‹</li><li>response.textï¼š è·å–å“åº”ä½“ï¼Œstrç±»å‹</li><li>response.statusï¼šè·å–å“åº”çŠ¶æ€ç </li></ol><h4 id="ç¿»é¡µ" tabindex="-1"><a class="header-anchor" href="#ç¿»é¡µ"><span>ç¿»é¡µ</span></a></h4><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span>index <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># extractåªéœ€è¦Selectorå…¶ä¸­çš„æ–‡æœ¬</span></span>
<span class="line"></span>
<span class="line">        title <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&#39;//div[@class=&quot;content__list--item&quot;]/a[@class=&quot;content__list--item--aside&quot;]/@title&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        pre <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&#39;//span[@class=&quot;content__list--item-price&quot;]/em/text()&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">for</span> titl<span class="token punctuation">,</span> pric <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> pre<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            items <span class="token operator">=</span> ScrapymaxItem<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            items<span class="token punctuation">[</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> titl<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            items<span class="token punctuation">[</span><span class="token string">&#39;price&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> pric</span>
<span class="line">            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;itemssssss&#39;</span><span class="token punctuation">,</span>items<span class="token punctuation">)</span></span>
<span class="line">            <span class="token comment"># å°†ç»„ä»¶å¥½çš„dictå½¢å¼æ•°æ®é€šè¿‡ yieldè¿”å›ç»™å¼•æ“  ç”±å¼•æ“åˆ¤æ–­æ˜¯å¦è¿”å›ç»™ç®¡é“æ–‡ä»¶</span></span>
<span class="line">            <span class="token keyword">yield</span> items</span>
<span class="line"></span>
<span class="line">        <span class="token keyword">if</span> self<span class="token punctuation">.</span>index <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">:</span></span>
<span class="line">            self<span class="token punctuation">.</span>index <span class="token operator">+=</span> <span class="token number">1</span></span>
<span class="line">            <span class="token comment"># æ„å»ºå¤šæ¬¡è¯·æ±‚åœ°å€</span></span>
<span class="line">            page_url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f&#39;https://cs.lianjia.com/zufang/pg</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>index<span class="token punctuation">}</span></span><span class="token string">&#39;</span></span></span>
<span class="line">            <span class="token comment"># å°†æ–°çš„urlåœ°å€å‘é€åˆ°å¼•æ“   callbackè®¾ç½®åç»­è¯·æ±‚åæ•°æ®äº¤ç»™é‚£ä¸ªå‡½æ•°è¿›è¡Œå¤„ç†</span></span>
<span class="line">            <span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>page_url<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="scrapy-shellä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#scrapy-shellä½¿ç”¨"><span>scrapy Shellä½¿ç”¨</span></a></h3><p>ç”±äºScrapyæ˜¯ä¸€ä¸ªé‡é‡çº§æ¡†æ¶ï¼Œæ¯æ¬¡è¿è¡Œèµ·æ¥éƒ½è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå› æ­¤è¦å»éªŒè¯æˆ‘ä»¬ä¹¦å†™çš„è§„åˆ™æ˜¯å¦æ­£ç¡®ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒéº»çƒ¦çš„äº‹æƒ…ï¼Œå› æ­¤Scrapyæä¾›äº†ä¸€ä¸ªshellï¼Œç”¨èµ·æ¥æ–¹ä¾¿æµ‹è¯•è§„åˆ™</p><p>æ‰“å¼€cmdç»ˆç«¯ï¼Œè¿›å…¥åˆ°Scrapyé¡¹ç›®æ‰€åœ¨ç›®å½•ï¼Œè¿›å…¥åˆ°Scrapyæ¡†æ¶æ‰€åœ¨çš„ç¯å¢ƒä¸­</p><div class="language-cmd line-numbers-mode" data-highlighter="prismjs" data-ext="cmd"><pre><code><span class="line"># scrapy shell éœ€è¦æµ‹è¯•çš„ç½‘ç»œåœ°å€</span>
<span class="line">scrapy shell https://cs.lianjia.com/zufang/</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">title = response.xpath(&#39;//div[@class=&quot;content__list--item&quot;]/a[@class=&quot;content__list--item--aside&quot;]/@title&#39;).extract()</span>
<span class="line"></span>
<span class="line"># æ„Ÿè§‰ä¸å¯¹åŠ², ä¸å¥½ç”¨</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="scrapyè¿›é˜¶" tabindex="-1"><a class="header-anchor" href="#scrapyè¿›é˜¶"><span>scrapyè¿›é˜¶</span></a></h2><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># setting.py</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯  è¿™é‡Œçš„user-Agentå†™äº† ä¸Šæ–¹çš„å¯ä»¥ä¸ç”¨å†™</span></span>
<span class="line">DEFAULT_REQUEST_HEADERS <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token string">&quot;Accept&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&quot;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token string">&quot;Accept-Language&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;en&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;cookie&quot;</span><span class="token punctuation">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>  </span>
<span class="line">    <span class="token string">&quot;User-Agent&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä»£ç†" tabindex="-1"><a class="header-anchor" href="#ä»£ç†"><span>ä»£ç†</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># ç§å¯†ä»£ç†</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">wangyeMide</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">process_request</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;ä¸­é—´:</span><span class="token interpolation"><span class="token punctuation">{</span>request<span class="token punctuation">.</span>url<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># æå–ä»£ç†APIæ¥å£ï¼Œè·å–1ä¸ªä»£ç†IP</span></span>
<span class="line">        api_url <span class="token operator">=</span> <span class="token string">&quot;https://dps.kdlapi.com/api/getdps/?secret_id=o4zsfebj9j4nm0izhp7s&amp;signature=ocoxalcpllkatvl57beyisep1vzj58p8&amp;num=1&amp;sep=1&quot;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># è·å–APIæ¥å£è¿”å›çš„ä»£ç†IP</span></span>
<span class="line">        proxy_ip <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>api_url<span class="token punctuation">)</span><span class="token punctuation">.</span>text</span>
<span class="line"></span>
<span class="line">        <span class="token comment"># ç”¨æˆ·åå¯†ç è®¤è¯(ç§å¯†ä»£ç†/ç‹¬äº«ä»£ç†)</span></span>
<span class="line">        username <span class="token operator">=</span> <span class="token string">&quot;d2089925381&quot;</span></span>
<span class="line">        password <span class="token operator">=</span> <span class="token string">&quot;8ujkam0p&quot;</span></span>
<span class="line">        proxies <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token string">&quot;http&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;http://%(user)s:%(pwd)s@%(proxy)s/&quot;</span> <span class="token operator">%</span> <span class="token punctuation">{</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">:</span> username<span class="token punctuation">,</span> <span class="token string">&quot;pwd&quot;</span><span class="token punctuation">:</span> password<span class="token punctuation">,</span> <span class="token string">&quot;proxy&quot;</span><span class="token punctuation">:</span> proxy_ip<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&quot;https&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;http://%(user)s:%(pwd)s@%(proxy)s/&quot;</span> <span class="token operator">%</span> <span class="token punctuation">{</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">:</span> username<span class="token punctuation">,</span> <span class="token string">&quot;pwd&quot;</span><span class="token punctuation">:</span> password<span class="token punctuation">,</span> <span class="token string">&quot;proxy&quot;</span><span class="token punctuation">:</span> proxy_ip<span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># ä½¿ç”¨ä»£ç†IPå‘é€è¯·æ±‚</span></span>
<span class="line">        request<span class="token punctuation">.</span>meta<span class="token punctuation">[</span><span class="token string">&#39;proxy&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> proxies<span class="token punctuation">[</span><span class="token string">&#39;https&#39;</span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token boolean">None</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è·å–è¯¦ç»†ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#è·å–è¯¦ç»†ä¿¡æ¯"><span>è·å–è¯¦ç»†ä¿¡æ¯</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># çˆ¬è™«æ–‡ä»¶</span></span>
<span class="line"><span class="token keyword">import</span> scrapy</span>
<span class="line"><span class="token keyword">from</span> scrapymax<span class="token punctuation">.</span>items <span class="token keyword">import</span> ScrapymaxItem</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">LianjiaSpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    name <span class="token operator">=</span> <span class="token string">&quot;lianjia&quot;</span> <span class="token comment">#çˆ¬è™«æ–‡ä»¶çš„åç§°</span></span>
<span class="line">    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;cs.lianjia.com&quot;</span><span class="token punctuation">]</span> <span class="token comment"># åŸŸå</span></span>
<span class="line">    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;https://cs.lianjia.com/zufang/&quot;</span><span class="token punctuation">]</span> <span class="token comment"># èµ·å§‹çš„è¯·æ±‚è¿æ¥</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># extractåªéœ€è¦Selectorå…¶ä¸­çš„æ–‡æœ¬</span></span>
<span class="line">        title <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&#39;//a[@class=&quot;twoline&quot;]/text()&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        pre <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&#39;//span[@class=&quot;content__list--item-price&quot;]/em/text()&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">        <span class="token keyword">for</span> titl<span class="token punctuation">,</span>pric <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span>pre<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            item <span class="token operator">=</span> ScrapymaxItem<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            item<span class="token punctuation">[</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> titl<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            item<span class="token punctuation">[</span><span class="token string">&#39;price&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> pric</span>
<span class="line">            </span>
<span class="line">            <span class="token comment"># ä¸éœ€è¦å†™, ç”±åç»­çš„å†…å®¹è¿›è¡Œä¼ é€’äº†</span></span>
<span class="line">            <span class="token comment"># yield items_all</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment"># è·å–è¯¦æƒ…é¡µé¢çš„æ•°æ®ä¿¡æ¯</span></span>
<span class="line">            <span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>items_all<span class="token punctuation">[</span><span class="token string">&quot;link&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse_msg<span class="token punctuation">,</span> meta<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;items_all&quot;</span><span class="token punctuation">:</span> items_all<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">parse_msg</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        items <span class="token operator">=</span> response<span class="token punctuation">.</span>meta<span class="token punctuation">[</span><span class="token string">&#39;items_all&#39;</span><span class="token punctuation">]</span></span>
<span class="line">        text <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&#39;//div[@class=&quot;intro&quot;]//text()&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        items<span class="token punctuation">[</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> text</span>
<span class="line">        <span class="token comment"># å°†è·å–çš„æ•°æ®å‘é€åˆ°å¼•æ“ åœ¨å‘é€åˆ°ç®¡é“</span></span>
<span class="line">        <span class="token keyword">yield</span> items</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä¸­é—´ä»¶ä¸­è®¾ç½®ua" tabindex="-1"><a class="header-anchor" href="#ä¸­é—´ä»¶ä¸­è®¾ç½®ua"><span>ä¸­é—´ä»¶ä¸­è®¾ç½®UA</span></a></h3><p><code>setting.pyæ–‡ä»¶</code> éœ€è¦è¿›è¡Œå¯¹äºçš„è®¾ç½®, æ•°å€¼è¶Šå°</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> random</span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">UserAgentDownloadMiddleware</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    user_agent <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">&#39;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:77.0) Gecko/20190101 Firefox/77.0&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.77 Safari/537.36&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string">&#39;Opera/9.80 (X11; Linux i686; Ubuntu/14.10) Presto/2.12.388 Version/12.16.2&#39;</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">    <span class="token comment"># æ–¹æ³•åæ˜¯scrapyè§„å®šçš„æ–¹æ³• ï¼ˆåå•†æœºåˆ¶ï¼‰</span></span>
<span class="line">    <span class="token comment"># æ¯ä¸ªäº¤ç»™ä¸‹è½½å™¨çš„requestå¯¹è±¡éƒ½ä¼šç»è¿‡è¯¥æ–¹æ³•ï¼Œå¹¶æœŸæœ›è¿”å›response</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">process_request</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># è·å–éšæœºè¯·æ±‚å¤´  random.choiceä»åˆ—è¡¨ä¸­éšæœºè·å–ä¸€ä¸ª</span></span>
<span class="line">        u_a <span class="token operator">=</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>self<span class="token punctuation">.</span>user_agent<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment"># è®¾ç½®è¯·æ±‚å¤´</span></span>
<span class="line">        request<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">&#39;User-Agent&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> u_a</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="postè¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#postè¯·æ±‚"><span>postè¯·æ±‚</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># çˆ¬è™«æ–‡ä»¶.py </span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">start_requests</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># ä½œç”¨: æ­¤æ–¹æ³•æ˜¯scraoyçš„å®šåˆ¶æ–¹æ³•,æ˜¯ä¸€ä¸ªé‡å†™è¯·æ±‚çš„æ–¹æ³•,ä¸èƒ½ä¿®æ”¹åç§°å’Œå‚æ•°</span></span>
<span class="line">    <span class="token comment"># é‡ä¿®æ„é€ çœ‹ä¸€ä¸ªèµ·å§‹çš„è¯·æ±‚,å¹¶ä¸”è¯·æ±‚æ–¹å¼ä¸ºpost</span></span>
<span class="line">    <span class="token comment">#  body: æºå¸¦Postè¯·æ±‚æ•°æ® Method: è¯·æ±‚æ–¹å¼</span></span>
<span class="line">    </span>
<span class="line">   	<span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token punctuation">,</span>method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>body<span class="token operator">=</span><span class="token string">&quot;æ•°æ®&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="scrapyä¸selenium" tabindex="-1"><a class="header-anchor" href="#scrapyä¸selenium"><span>scrapyä¸selenium</span></a></h2><p>seleniumä¹¦å†™åœ¨ä¸‹è½½ä¸­é—´ä»¶çš„è¿”å›æ•°æ®ä½ç½®, é€šè¿‡seleniumé‡æ–°è·å–æ•°æ®,å†æ¬¡å°è£…æ•°æ®,è¿”å›ç»™å¼•æ“,åœ¨è¿”å›spider</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    self<span class="token punctuation">.</span>options <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>ChromeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    self<span class="token punctuation">.</span>options<span class="token punctuation">.</span>add_experimental_option<span class="token punctuation">(</span><span class="token string">&#39;excludeSwitches&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;enable-automation&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># å†™å…¥å‚æ•°</span></span>
<span class="line">    self<span class="token punctuation">.</span>options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&quot;--disable-blink-features=AutomationControlled&quot;</span><span class="token punctuation">)</span>  <span class="token comment"># å…³é”®ï¼éšè—è‡ªåŠ¨åŒ–æ ‡å¿—</span></span>
<span class="line">    self<span class="token punctuation">.</span>options<span class="token punctuation">.</span>add_experimental_option<span class="token punctuation">(</span><span class="token string">&quot;useAutomationExtension&quot;</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span>  <span class="token comment"># ç¦ç”¨è‡ªåŠ¨åŒ–æ‰©å±•</span></span>
<span class="line">    self<span class="token punctuation">.</span>browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>options<span class="token operator">=</span>self<span class="token punctuation">.</span>options<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment"># ä½¿ç”¨ç‰¹å®šç”¨æˆ·æ•°æ®ç›®å½• (ä¿å­˜cookiesã€ç¼“å­˜ç­‰)</span></span>
<span class="line">    self<span class="token punctuation">.</span>urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> <span class="token function">__del__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    self<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">pass</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">def</span> <span class="token function">process_response</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> spider<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># åªå¤„ç†åœ¨spider.urlsåˆ—è¡¨ä¸­çš„URL</span></span>
<span class="line">    <span class="token keyword">if</span> request<span class="token punctuation">.</span>url <span class="token keyword">in</span> spider<span class="token punctuation">.</span>urls<span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;Processing URL with selenium: </span><span class="token interpolation"><span class="token punctuation">{</span>request<span class="token punctuation">.</span>url<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        browser <span class="token operator">=</span> spider<span class="token punctuation">.</span>browser</span>
<span class="line">        browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span></span>
<span class="line">        browser<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span><span class="token string">&quot;window.scrollTo(0, document.body.scrollHeight)&quot;</span><span class="token punctuation">)</span></span>
<span class="line">        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">        page_text <span class="token operator">=</span> browser<span class="token punctuation">.</span>page_source<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># åˆ›å»ºæ–°çš„å“åº”å¯¹è±¡</span></span>
<span class="line">        new_response <span class="token operator">=</span> HtmlResponse<span class="token punctuation">(</span></span>
<span class="line">            url<span class="token operator">=</span>request<span class="token punctuation">.</span>url<span class="token punctuation">,</span></span>
<span class="line">            body<span class="token operator">=</span>page_text<span class="token punctuation">,</span></span>
<span class="line">            encoding<span class="token operator">=</span><span class="token string">&#39;utf-8&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            request<span class="token operator">=</span>request</span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;Selenium processed response for </span><span class="token interpolation"><span class="token punctuation">{</span>request<span class="token punctuation">.</span>url<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># å…³é”®ä¿®å¤ï¼šæ‰‹åŠ¨è°ƒç”¨è¯·æ±‚çš„å›è°ƒå‡½æ•°     ç”µè„‘ç‰ˆæœ¬æ²¡æœ‰åŠæ³•è‡ªåŠ¨å›è°ƒ éœ€è¦æ‰‹åŠ¨è°ƒç”¨  </span></span>
<span class="line">        <span class="token keyword">if</span> request<span class="token punctuation">.</span>callback<span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">return</span> request<span class="token punctuation">.</span>callback<span class="token punctuation">(</span>new_response<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> new_response</span>
<span class="line">    <span class="token keyword">else</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">return</span> response</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è‡ªåŠ¨æŠ“å–é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#è‡ªåŠ¨æŠ“å–é“¾æ¥"><span>è‡ªåŠ¨æŠ“å–é“¾æ¥</span></a></h2><p><code>rom scrapy.spiders import CrawlSpider, Rule</code> æ˜¯ Scrapy æ¡†æ¶ä¸­ç”¨äºæ„å»º <strong>è§„åˆ™çˆ¬è™«ï¼ˆCrawlSpiderï¼‰</strong> çš„å…³é”®å¯¼å…¥è¯­å¥</p><blockquote><p>CrawlSpider</p></blockquote><ul><li><strong>ç”¨é€”</strong>ï¼š<code>CrawlSpider</code> æ˜¯ Scrapy æä¾›çš„ä¸€ä¸ªé«˜çº§çˆ¬è™«ç±»ï¼Œä¸“é—¨ç”¨äº <strong>æŒ‰è§„åˆ™è‡ªåŠ¨è·Ÿè¸ªé“¾æ¥</strong> çš„çˆ¬å–åœºæ™¯ï¼ˆæ¯”å¦‚æ•´ç«™çˆ¬å–ï¼‰ã€‚</li><li>ç‰¹ç‚¹ï¼š <ul><li>è‡ªåŠ¨æ ¹æ®é¢„è®¾è§„åˆ™ï¼ˆ<code>Rule</code>ï¼‰æå–é¡µé¢ä¸­çš„é“¾æ¥ï¼Œå¹¶å†³å®šæ˜¯å¦è·Ÿè¿›ã€‚</li><li>é€‚åˆçˆ¬å–ç›®å½•å‹ç½‘ç«™ï¼ˆå¦‚æ–°é—»ç½‘ç«™ã€åšå®¢ã€ç”µå•†å•†å“åˆ—è¡¨ï¼‰</li></ul></li></ul><blockquote><p>Rule</p></blockquote><ul><li>ä½œç”¨ï¼šå®šä¹‰çˆ¬è™«çš„é“¾æ¥æå–å’Œè·Ÿè¿›è§„åˆ™, ä¸»è¦åŒ…æ‹¬ï¼š <ul><li><strong>å¦‚ä½•ä»é¡µé¢æå–é“¾æ¥</strong>ï¼ˆä½¿ç”¨ <code>LinkExtractor</code>ï¼‰ã€‚</li><li><strong>æ˜¯å¦è·Ÿè¿›è¿™äº›é“¾æ¥</strong>ï¼ˆ<code>follow=True/False</code>ï¼‰ã€‚</li><li><strong>å¦‚ä½•å¤„ç†æå–çš„é“¾æ¥</strong>ï¼ˆå›è°ƒå‡½æ•° <code>callback</code>ï¼‰ã€‚</li></ul></li></ul><blockquote><p>LinkExtractor</p></blockquote><p><code>from scrapy.linkextractors import LinkExtractor</code> æ˜¯ Scrapy æ¡†æ¶ä¸­ç”¨äº <strong>ä»ç½‘é¡µä¸­è‡ªåŠ¨æå–é“¾æ¥</strong> çš„æ ¸å¿ƒç»„ä»¶ï¼Œé€šå¸¸ä¸ <code>CrawlSpider</code> å’Œ <code>Rule</code> é…åˆä½¿ç”¨</p><ul><li>restrict_xpaths ç”¨XPathé™å®šæå–é“¾æ¥çš„åŒºåŸŸ <ul><li>restrict_xpaths=&#39;//div[@class=&quot;pagination&quot;]&#39;ï¼ˆåªä»åˆ†é¡µåŒºåŸŸæå–ï¼‰</li></ul></li><li>restrict_css ç”¨CSSé€‰æ‹©å™¨é™å®šæå–åŒºåŸŸ <ul><li>restrict_css=&#39;.pagination&#39;</li></ul></li><li>allow ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å…è®¸çš„é“¾æ¥ <ul><li>allow=r&#39;/product/\d+&#39;ï¼ˆåŒ¹é… /product/123/ï¼‰</li></ul></li></ul><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>spiders <span class="token keyword">import</span> CrawlSpider<span class="token punctuation">,</span> Rule</span>
<span class="line"><span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>linkextractors <span class="token keyword">import</span> LinkExtractor</span>
<span class="line"><span class="token keyword">from</span> books<span class="token punctuation">.</span>items <span class="token keyword">import</span> BooksItem</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">BooksMsgSpider</span><span class="token punctuation">(</span>CrawlSpider<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    name <span class="token operator">=</span> <span class="token string">&quot;books_msg&quot;</span></span>
<span class="line">    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;toscrape.com&quot;</span><span class="token punctuation">]</span></span>
<span class="line">    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;https://books.toscrape.com/&quot;</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line">    rules <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">        Rule<span class="token punctuation">(</span></span>
<span class="line">            <span class="token comment"># æŠ“å–å¯¹äºåœ°å€, å¹¶ä¸”è·Ÿè¿›è·å–è¯¦æƒ…é¡µé¢,æ‰§è¡Œå›è°ƒå‡½æ•°,åç»­ä¸éœ€è¦å†è¿›è¡Œè·³è½¬</span></span>
<span class="line">            LinkExtractor<span class="token punctuation">(</span>restrict_css<span class="token operator">=</span><span class="token string">&quot;.product_pod&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            callback<span class="token operator">=</span><span class="token string">&#39;parse&#39;</span><span class="token punctuation">,</span></span>
<span class="line">            follow<span class="token operator">=</span> <span class="token boolean">False</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        Rule<span class="token punctuation">(</span> </span>
<span class="line">            <span class="token comment"># æŠ“å–å¯¹äºåœ°å€, è¿›è¡Œè·³è½¬,åç»­åœ¨è¿›è¡ŒæŠ“å–   follow = True åç»­ç»§ç»­ä½¿ç”¨è¯¥æ–¹å¼æŠ“å–æ•°æ®è¿æ¥,è¿›è¡Œè·³è½¬</span></span>
<span class="line">            LinkExtractor<span class="token punctuation">(</span>restrict_xpaths<span class="token operator">=</span><span class="token string">&#39;//li[@class=&quot;next&quot;]/a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            follow <span class="token operator">=</span> <span class="token boolean">True</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/book/spider/08-fiddler.html" aria-label="08-fiddler"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">08-fiddler</span></div><!--]--></a><a class="route-link auto-link next" href="/book/spider/10-scrapy%E5%88%86%E5%B8%83%E5%BC%8F.html" aria-label="10-scrapyåˆ†å¸ƒå¼"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link">10-scrapyåˆ†å¸ƒå¼</span></div><!--]--></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/book/assets/app-cH5Xd749.js" defer></script>
  </body>
</html>
